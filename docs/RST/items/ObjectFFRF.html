

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ObjectFFRF &mdash; Exudyn1.9.83.dev1 1.9.83.dev1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=3ee1c6c6" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/rtd_sphinx_search.min.css" />
      <link rel="stylesheet" type="text/css" href="../../../_static/custom.css?v=e11081fd" />

  
      <script src="../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../_static/documentation_options.js?v=86202e69"></script>
      <script src="../../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../../../_static/copybutton.js?v=f281be69"></script>
      <script src="../../../_static/js/rtd_search_config.js"></script>
      <script src="../../../_static/js/rtd_sphinx_search.min.js"></script>
      <script>window.MathJax = {"loader": {"load": ["[tex]/mathtools"]}, "tex": {"packages": {"[+]": ["mathtools"]}, "macros": {"vspace": ["{}", 1], "ra": "{\\rightarrow}", "Rcal": "{\\mathbb{R}}", "Ccal": "{\\mathbb{C}}", "Ncal": "{\\mathbb{N}}", "Rot": "{\\mathbf{A}}", "dd": "{\\mathrm{d}}", "ps": "{p_\\mathrm{s}}", "co": "{\\mathrm{c}}", "si": "{\\mathrm{s}}", "tp": "{^\\mathrm{T}}", "diag": "{\\mathrm{diag}}", "vec": "{\\mathrm{vec}}", "Null": "{\\mathbf{0}}", "varepsilonDot": "{\\boldsymbol{\\varepsilon}}", "talpha": "{\\boldsymbol{\\alpha}}", "tbeta": "{\\boldsymbol{\\beta}}", "tgamma": "{\\boldsymbol{\\gamma}}", "tchi": "{\\boldsymbol{\\chi}}", "tdelta": "{\\boldsymbol{\\delta}}", "teps": "{\\boldsymbol{\\varepsilon}}", "tepsDot": "{\\boldsymbol{\\dot \\varepsilon}}", "teta": "{\\boldsymbol{\\eta}}", "tkappa": "{\\boldsymbol{\\kappa}}", "tkappaDot": "{\\boldsymbol{\\dot \\kappa}}", "tphi": "{\\boldsymbol{\\phi}}", "boldVarPhi": "{\\boldsymbol{\\varphi}}", "tPhi": "{\\boldsymbol{\\Phi}}", "ttheta": "{\\boldsymbol{\\theta}}", "tTheta": "{\\boldsymbol{\\Theta}}", "tlambda": "{\\boldsymbol{\\lambda}}", "tnu": "{\\boldsymbol{\\nu}}", "tmu": "{\\boldsymbol{\\mu}}", "tpsi": "{\\boldsymbol{\\psi}}", "tPsi": "{\\boldsymbol{\\Psi}}", "ttau": "{\\boldsymbol{\\tau}}", "tsigma": "{\\boldsymbol{\\sigma}}", "txi": "{\\boldsymbol{\\xi}}", "tzeta": "{\\boldsymbol{\\zeta}}", "tomega": "{\\boldsymbol{\\omega}}", "tOmega": "{\\boldsymbol{\\Omega}}", "vareps": "{\\varepsilon}", "myoverline": ["\\overline{#1}", 1], "pluseq": "\\mathrel{+}=", "LU": ["{\\prescript{#1}{}{#2}\\,}", 2], "LUX": ["{\\prescript{#1}{}{#2}#3\\,}", 3], "LUR": ["{\\prescript{#1}{}{#2}_{#3}\\,}", 3], "LURU": ["{\\prescript{#1}{}{#2}_{#3}^{#4}\\,}", 4], "LLdot": ["{\\prescript{}{#1}{\\dot{#2}}_{#3}\\,}", 3], "vr": ["{\\left[ \\begin{array}{c} { #1}\\vspace{0.04cm} \\\\ { #2}\\vspace{0.04cm} \\\\ { #3} \\end{array} \\right]}", 3], "mr": ["{\\left[ \\begin{array}{ccc} #1 & #2 & #3 \\vspace{0.04cm}\\\\ #4 & #5 & #6 \\vspace{0.04cm}\\\\ #7 & #8 & #9  \\end{array} \\right]}", 9], "vp": ["{\\left[ \\begin{array}{c} { #1} \\vspace{0.04cm}\\\\ { #2} \\end{array} \\right]}", 2], "mp": ["{\\left[ \\begin{array}{cc} #1 & #2 \\vspace{0.04cm}\\\\ #3 & #4 \\end{array} \\right]}", 4], "mfour": ["{\\left[ \\begin{array}{cccc} { #1} \\\\ { #2} \\\\ { #3} \\\\ { #4} \\end{array} \\right]}", 4], "vfour": ["{\\left[ \\begin{array}{c} { #1} \\\\ { #2} \\\\ { #3} \\\\ { #4} \\end{array} \\right]}", 4], "vrRow": ["{[#1,\\, #2,\\, #3]}", 3], "vsix": ["{\\left[ \\begin{array}{c} { #1} \\\\ { #2} \\\\ { #3} \\\\ { #4} \\\\ { #5} \\\\ { #6} \\end{array} \\right]}", 6], "vsixb": ["{\\begin{array}{c} { #1} \\\\ { #2} \\\\ { #3} \\\\ { #4} \\\\ { #5} \\\\ { #6} \\end{array} }", 6], "vsixs": ["{ \\begin{array}{c} { #1} \\\\ { #2} \\\\ { #3} \\\\ { #4} \\\\ { #5} \\\\ { #6} \\end{array} }", 6], "SO": "{q}", "FO": "{y}", "AE": "{\\lambda}", "SYS": "{s}", "SON": "{$2^\\mathrm{nd}$ order differential equations}", "FON": "{$1^\\mathrm{st}$ order differential equations}", "AEN": "{algebraic equations}", "SYSN": "{system equations}", "cIni": "{_\\mathrm{ini}}", "cRef": "{_\\mathrm{ref}}", "cCur": "{_\\mathrm{cur}}", "cVis": "{_\\mathrm{vis}}", "cSOS": "{_\\mathrm{start\\;of\\;step}}", "cConfig": "{_\\mathrm{config}}", "pLoc": "{\\mathbf{b}}", "pLocB": "{\\,^{b}{\\mathbf{v}}}", "pRef": "{\\mathbf{r}}", "pRefG": "{\\,^{0}{\\mathbf{r}}}", "indf": "{_\\mathrm{f}}", "indt": "{_\\mathrm{t}}", "indr": "{_\\mathrm{r}}", "indtt": "{_\\mathrm{tt}}", "indrr": "{_\\mathrm{rr}}", "indff": "{_\\mathrm{ff}}", "indtf": "{_\\mathrm{tf}}", "indrf": "{_\\mathrm{rf}}", "indtr": "{_\\mathrm{tr}}", "omegaBDtilde": "{\\LU{b}{\\tilde \\tomega_\\mathrm{bd}}}", "indrigid": "{_\\mathrm{rigid}}", "indred": "{_\\mathrm{red}}", "induser": "{_\\mathrm{user}}", "indu": "{_\\mathrm{u}}", "termA": ["{\\color{blue}{#1}}", 1], "termB": ["{\\color{red}{#1}}", 1], "termC": ["{\\color{green}{#1}}", 1], "acc": "{\\ddot \\mathbf{q}}", "GA": "{G\\alpha}", "aalg": "{\\mathbf{a}}", "vel": "{\\mathbf{v}}"}}}</script>
      <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="ObjectFFRFreducedOrder" href="ObjectFFRFreducedOrder.html" />
    <link rel="prev" title="ObjectKinematicTree" href="ObjectKinematicTree.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            Exudyn1.9.83.dev1
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Exudyn User Manual</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Exudyn.html">Exudyn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../InstallationAndGettingStartedIndex.html">Installation and Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../OverviewOnExudynIndex.html">Overview on Exudyn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../TutorialIndex.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../GraphicsAndVisualizationIndex.html">Graphics and visualization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../NotationIndex.html">Notation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../TheoryAndFormulationsIndex.html">Theory and formulations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../SolversIndex.html">Solvers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cInterface/CInterfaceIndex.html">Python-C++ command interface</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference Manual</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../pythonUtilities/index.html">Python Utility Functions</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="itemsIndex.html">Items reference manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="nodeIndex.html">Node</a></li>
<li class="toctree-l2"><a class="reference internal" href="objectBodyIndex.html">Object (Body)</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="objectSuperElementIndex.html">Object (SuperElement)</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="ObjectGenericODE2.html">ObjectGenericODE2</a></li>
<li class="toctree-l3"><a class="reference internal" href="ObjectKinematicTree.html">ObjectKinematicTree</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">ObjectFFRF</a></li>
<li class="toctree-l3"><a class="reference internal" href="ObjectFFRFreducedOrder.html">ObjectFFRFreducedOrder</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="objectObjectIndex.html">Object (Object)</a></li>
<li class="toctree-l2"><a class="reference internal" href="objectFiniteElementIndex.html">Object (FiniteElement)</a></li>
<li class="toctree-l2"><a class="reference internal" href="objectConnectorIndex.html">Object (Connector)</a></li>
<li class="toctree-l2"><a class="reference internal" href="objectConstraintIndex.html">Object (Constraint)</a></li>
<li class="toctree-l2"><a class="reference internal" href="objectJointIndex.html">Object (Joint)</a></li>
<li class="toctree-l2"><a class="reference internal" href="markerIndex.html">Marker</a></li>
<li class="toctree-l2"><a class="reference internal" href="loadIndex.html">Load</a></li>
<li class="toctree-l2"><a class="reference internal" href="sensorIndex.html">Sensor</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../structures/StructuresAndSettingsIndex.html">Structures and Settings</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Misc</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Abbreviations.html">List of Abbreviations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ExamplesIndex.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../TestModelsIndex.html">TestModels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../trackerlog.html">Issue tracker</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Exudyn1.9.83.dev1</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="itemsIndex.html">Items reference manual</a></li>
          <li class="breadcrumb-item"><a href="objectSuperElementIndex.html">Object (SuperElement)</a></li>
      <li class="breadcrumb-item active">ObjectFFRF</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/docs/RST/items/ObjectFFRF.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="objectffrf">
<span id="sec-item-objectffrf"></span><h1>ObjectFFRF<a class="headerlink" href="#objectffrf" title="Link to this heading"></a></h1>
<p>This object is used to represent equations modelled by the <a class="reference internal" href="../Abbreviations.html#ffrf"><span class="std std-ref">FFRF</span></a>. It contains a RigidBodyNode (always node 0) and a list of other nodes representing the finite element nodes used in the <a class="reference internal" href="../Abbreviations.html#ffrf"><span class="std std-ref">FFRF</span></a>. Note that temporary matrices and vectors are subject of change in future. Usually you SHOULD NOT USE THIS OBJECT - use the much more efficient ObjectFFRFreducedOrder object with modal reduction instead.</p>
<p>Authors: Gerstmayr Johannes, Zwölfer Andreas</p>
<p><strong>Additional information for ObjectFFRF</strong>:</p>
<ul>
<li><div class="line-block">
<div class="line">This <code class="docutils literal notranslate"><span class="pre">Object</span></code> has/provides the following types = <code class="docutils literal notranslate"><span class="pre">Body</span></code>, <code class="docutils literal notranslate"><span class="pre">MultiNoded</span></code>, <code class="docutils literal notranslate"><span class="pre">SuperElement</span></code></div>
</div>
</li>
<li><div class="line-block">
<div class="line">Requested <code class="docutils literal notranslate"><span class="pre">Node</span></code> type: read detailed information of item</div>
</div>
</li>
</ul>
<p>The item <strong>ObjectFFRF</strong> with type = ‘FFRF’ has the following parameters:</p>
<ul>
<li><div class="line-block">
<div class="line"><strong>name</strong> [type = String, default = ‘’]:</div>
<div class="line">objects’s unique name</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>nodeNumbers</strong> [<span class="math notranslate nohighlight">\(\mathbf{n}\indf = [n_0,\,\ldots,\,n_{n_\mathrm{nf}}]\tp\)</span>, type = ArrayNodeIndex, default = []]:</div>
<div class="line">node numbers which provide the coordinates for the object (consecutively as provided in this list); the <span class="math notranslate nohighlight">\((n_\mathrm{nf}+1)\)</span> nodes represent the nodes of the FE mesh (except for node 0); the global nodal position needs to be reconstructed from the rigid-body motion of the reference frame</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>massMatrixFF</strong> [<span class="math notranslate nohighlight">\(\LU{b}{{\mathbf{M}}} \in \Rcal^{n\indf \times n\indf}\)</span>, type = PyMatrixContainer, default = PyMatrixContainer[]]:</div>
<div class="line">body-fixed and ONLY flexible coordinates part of mass matrix of object given in Python numpy format (sparse (CSR) or dense, converted to sparse matrix); internally data is stored in triplet format</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>stiffnessMatrixFF</strong> [<span class="math notranslate nohighlight">\(\LU{b}{{\mathbf{K}}} \in \Rcal^{n\indf \times n\indf}\)</span>, type = PyMatrixContainer, default = PyMatrixContainer[]]:</div>
<div class="line">body-fixed and ONLY flexible coordinates part of stiffness matrix of object in Python numpy format (sparse (CSR) or dense, converted to sparse matrix); internally data is stored in triplet format</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>dampingMatrixFF</strong> [<span class="math notranslate nohighlight">\(\LU{b}{{\mathbf{D}}} \in \Rcal^{n\indf \times n\indf}\)</span>, type = PyMatrixContainer, default = PyMatrixContainer[]]:</div>
<div class="line">body-fixed and ONLY flexible coordinates part of damping matrix of object in Python numpy format (sparse (CSR) or dense, converted to sparse matrix); internally data is stored in triplet format</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>forceVector</strong> [<span class="math notranslate nohighlight">\(\LU{0}{{\mathbf{f}}} = [\LU{0}{{\mathbf{f}}\indr},\; \LU{0}{{\mathbf{f}}\indf}]\tp \in \Rcal^{n_c}\)</span>, type = NumpyVector, default = []]:</div>
<div class="line">generalized, force vector added to RHS; the rigid body part <span class="math notranslate nohighlight">\({\mathbf{f}}_r\)</span> is directly applied to rigid body coordinates while the flexible part <span class="math notranslate nohighlight">\({\mathbf{f}}\indf\)</span> is transformed from global to local coordinates; note that this force vector only allows to add gravity forces for bodies with <a class="reference internal" href="../Abbreviations.html#com"><span class="std std-ref">COM</span></a> at the origin of the reference frame</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>forceUserFunction</strong> [<span class="math notranslate nohighlight">\({\mathbf{f}}_{user} =  [\LU{0}{{\mathbf{f}}_{\mathrm{r},user}},\; \LU{b}{{\mathbf{f}}_{\mathrm{f},user}}]\tp \in \Rcal^{n_c}\)</span>, type = PyFunctionVectorMbsScalarIndex2Vector, default =  0]:</div>
<div class="line">A Python user function which computes the generalized user force vector for the <a class="reference internal" href="../Abbreviations.html#ode2"><span class="std std-ref">ODE2</span></a> equations; note the different coordinate systems for rigid body and flexible part; The function args are mbs, time, objectNumber, coordinates q (without reference values) and coordinate velocities q_t; see description below</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>massMatrixUserFunction</strong> [<span class="math notranslate nohighlight">\({\mathbf{M}}_{user} \in \Rcal^{n_c\times n_c}\)</span>, type = PyFunctionMatrixMbsScalarIndex2Vector, default =  0]:</div>
<div class="line">A Python user function which computes the TOTAL mass matrix (including reference node) and adds the local constant mass matrix; note the different coordinate systems as described in the <a class="reference internal" href="../Abbreviations.html#ffrf"><span class="std std-ref">FFRF</span></a> mass matrix; see description below</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>computeFFRFterms</strong> [type = Bool, default = True]:</div>
<div class="line">flag decides whether the standard <a class="reference internal" href="../Abbreviations.html#ffrf"><span class="std std-ref">FFRF</span></a> terms are computed; use this flag for user-defined definition of <a class="reference internal" href="../Abbreviations.html#ffrf"><span class="std std-ref">FFRF</span></a> terms in mass matrix and quadratic velocity vector</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>coordinateIndexPerNode</strong> [type = ArrayIndex, default = []]:</div>
<div class="line">this list contains the local coordinate index for every node, which is needed, e.g., for markers; the list is generated automatically every time parameters have been changed</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>objectIsInitialized</strong> [type = Bool, default = False]:</div>
<div class="line">ALWAYS set to False! flag used to correctly initialize all <a class="reference internal" href="../Abbreviations.html#ffrf"><span class="std std-ref">FFRF</span></a> matrices; as soon as this flag is False, internal (constant) <a class="reference internal" href="../Abbreviations.html#ffrf"><span class="std std-ref">FFRF</span></a> matrices are recomputed during Assemble()</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>physicsMass</strong> [<span class="math notranslate nohighlight">\(m\)</span>, type = UReal, default = 0.]:</div>
<div class="line">total mass [SI:kg] of <a class="reference internal" href="../Abbreviations.html#ffrf"><span class="std std-ref">FFRF</span></a> object, auto-computed from mass matrix <span class="math notranslate nohighlight">\(\LU{b}{{\mathbf{M}}}\)</span></div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>physicsInertia</strong> [<span class="math notranslate nohighlight">\(J_r \in \Rcal^{3 \times 3}\)</span>, type = Matrix3D, default = [[1,0,0], [0,1,0], [0,0,1]]]:</div>
<div class="line">inertia tensor [SI:kgm<span class="math notranslate nohighlight">\(^2\)</span>] of rigid body w.r.t. to the reference point of the body, auto-computed from the mass matrix <span class="math notranslate nohighlight">\(\LU{b}{{\mathbf{M}}}\)</span></div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>physicsCenterOfMass</strong> [<span class="math notranslate nohighlight">\(\LU{b}{{\mathbf{b}}}_{COM}\)</span>, type = Vector3D, size = 3, default = [0.,0.,0.]]:</div>
<div class="line">local position of center of mass (<a class="reference internal" href="../Abbreviations.html#com"><span class="std std-ref">COM</span></a>); auto-computed from mass matrix <span class="math notranslate nohighlight">\(\LU{b}{{\mathbf{M}}}\)</span></div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>PHItTM</strong> [<span class="math notranslate nohighlight">\(\tPhi\indt\tp \in \Rcal^{n\indf \times 3}\)</span>, type = NumpyMatrix, default = Matrix[]]:</div>
<div class="line">projector matrix; may be removed in future</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>referencePositions</strong> [<span class="math notranslate nohighlight">\({\mathbf{x}}\cRef \in \Rcal^{n\indf}\)</span>, type = NumpyVector, default = []]:</div>
<div class="line">vector containing the reference positions of all flexible nodes</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>tempVector</strong> [<span class="math notranslate nohighlight">\({\mathbf{v}}_{temp} \in \Rcal^{n\indf}\)</span>, type = NumpyVector, default = []]:</div>
<div class="line">temporary vector</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>tempCoordinates</strong> [<span class="math notranslate nohighlight">\({\mathbf{c}}_{temp} \in \Rcal^{n\indf}\)</span>, type = NumpyVector, default = []]:</div>
<div class="line">temporary vector containing coordinates</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>tempCoordinates_t</strong> [<span class="math notranslate nohighlight">\(\dot {\mathbf{c}}_{temp} \in \Rcal^{n\indf}\)</span>, type = NumpyVector, default = []]:</div>
<div class="line">temporary vector containing velocity coordinates</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>tempRefPosSkew</strong> [<span class="math notranslate nohighlight">\(\tilde{\mathbf{p}}\indf \in \Rcal^{n\indf \times 3}\)</span>, type = NumpyMatrix, default = Matrix[]]:</div>
<div class="line">temporary matrix with skew symmetric local (deformed) node positions</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>tempVelSkew</strong> [<span class="math notranslate nohighlight">\(\dot{\tilde{\mathbf{c}}}\indf \in \Rcal^{n\indf \times 3}\)</span>, type = NumpyMatrix, default = Matrix[]]:</div>
<div class="line">temporary matrix with skew symmetric local node velocities</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>visualization</strong> [type = VObjectFFRF]:</div>
<div class="line">parameters for visualization of item</div>
</div>
</li>
</ul>
<p>The item VObjectFFRF has the following parameters:</p>
<ul>
<li><div class="line-block">
<div class="line"><strong>show</strong> [type = Bool, default = True]:</div>
<div class="line">set true, if item is shown in visualization and false if it is not shown; use visualizationSettings.bodies.deformationScaleFactor to draw scaled (local) deformations; the reference frame node is shown with additional letters RF</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>color</strong> [type = Float4, size = 4, default = [-1.,-1.,-1.,-1.]]:</div>
<div class="line">RGBA color for object; 4th value is alpha-transparency; R=-1.f means, that default color is used</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>triangleMesh</strong> [type = NumpyMatrixI, default = MatrixI[]]:</div>
<div class="line">a matrix, containg node number triples in every row, referring to the node numbers of the GenericODE2 object; the mesh uses the nodes to visualize the underlying object; contour plot colors are still computed in the local frame!</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>showNodes</strong> [type = Bool, default = False]:</div>
<div class="line">set true, nodes are drawn uniquely via the mesh, eventually using the floating reference frame, even in the visualization of the node is show=False; node numbers are shown with indicator ‘NF’</div>
</div>
</li>
</ul>
<hr class="docutils" />
<section id="description-of-objectffrf">
<span id="description-objectffrf"></span><h2>DESCRIPTION of ObjectFFRF<a class="headerlink" href="#description-of-objectffrf" title="Link to this heading"></a></h2>
<p><strong>The following output variables are available as OutputVariableType in sensors, Get…Output() and other functions</strong>:</p>
<ul>
<li><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">Coordinates</span></code>:</div>
<div class="line">all <a class="reference internal" href="../Abbreviations.html#ode2"><span class="std std-ref">ODE2</span></a> coordinates</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">Coordinates\_t</span></code>:</div>
<div class="line">all <a class="reference internal" href="../Abbreviations.html#ode2"><span class="std std-ref">ODE2</span></a> velocity coordinates</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">Coordinates\_tt</span></code>:</div>
<div class="line">all <a class="reference internal" href="../Abbreviations.html#ode2"><span class="std std-ref">ODE2</span></a> acceleration coordinates</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">Force</span></code>:</div>
<div class="line">generalized forces for all coordinates (residual of all forces except mass*accleration; corresponds to ComputeODE2LHS)</div>
</div>
</li>
</ul>
</section>
<section id="additional-output-variables-for-superelement-node-access">
<h2>Additional output variables for superelement node access<a class="headerlink" href="#additional-output-variables-for-superelement-node-access" title="Link to this heading"></a></h2>
<p>Functions like <code class="docutils literal notranslate"><span class="pre">GetObjectOutputSuperElement(...)</span></code>, see Section <a class="reference internal" href="../cInterface/MainSystem.html#sec-mainsystem-object"><span class="std std-ref">MainSystem: Object</span></a>,
or <code class="docutils literal notranslate"><span class="pre">SensorSuperElement</span></code>, see Section <a class="reference internal" href="../cInterface/MainSystem.html#sec-mainsystem-sensor"><span class="std std-ref">MainSystem: Sensor</span></a>, directly access special output variables
(<code class="docutils literal notranslate"><span class="pre">OutputVariableType</span></code>) of the mesh nodes <span class="math notranslate nohighlight">\(n_i\)</span> of the superelement.
Additionally, the contour drawing of the object can make use the <code class="docutils literal notranslate"><span class="pre">OutputVariableType</span></code> of the meshnodes.</p>
</section>
<section id="super-element-output-variables">
<span id="sec-objectffrf-superelementoutput"></span><h2>Super element output variables<a class="headerlink" href="#super-element-output-variables" title="Link to this heading"></a></h2>
<table class="docutils align-default" id="id1">
<caption><span class="caption-text"></span><a class="headerlink" href="#id1" title="Link to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><div class="line-block">
<div class="line">super element output variables</div>
</div>
</th>
<th class="head"><div class="line-block">
<div class="line">symbol</div>
</div>
</th>
<th class="head"><div class="line-block">
<div class="line">description</div>
</div>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">Position</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><span class="math notranslate nohighlight">\(\LU{0}{{\mathbf{p}}}\cConfig(n_i) = \LU{0}{\pRef\cConfig} + \LU{0b}{\Rot}\cConfig \LU{b}{{\mathbf{p}}}\cConfig(n_i)\)</span></div>
</div>
</td>
<td><div class="line-block">
<div class="line">global position of mesh node <span class="math notranslate nohighlight">\(n_i\)</span> including rigid body motion and flexible deformation</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">Displacement</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><span class="math notranslate nohighlight">\(\LU{0}{{\mathbf{c}}}\cConfig(n_i) = \LU{0}{{\mathbf{p}}\cConfig(n_i)} - \LU{0}{{\mathbf{p}}\cRef(n_i)}\)</span></div>
</div>
</td>
<td><div class="line-block">
<div class="line">global displacement of mesh node <span class="math notranslate nohighlight">\(n_i\)</span> including rigid body motion and flexible deformation</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">Velocity</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><span class="math notranslate nohighlight">\(\LU{0}{{\mathbf{v}}}\cConfig(n_i) = \LU{0}{\dot \pRef\cConfig} + \LU{0b}{\Rot}\cConfig (\LU{b}{\dot {\mathbf{q}}\indf}\cConfig(n_i) + \LU{b}{\tomega}\cConfig \times \LU{b}{{\mathbf{p}}}\cConfig(n_i))\)</span></div>
</div>
</td>
<td><div class="line-block">
<div class="line">global velocity of mesh node <span class="math notranslate nohighlight">\(n_i\)</span> including rigid body motion and flexible deformation</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">Acceleration</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><span class="math notranslate nohighlight">\(\begin{array}{l} \LU{0}{{\mathbf{a}}}\cConfig(n_i) = \LU{0}{\ddot \pRef\cConfig}\cConfig \\
+ \LU{0b}{\Rot}\cConfig \LU{b}{\ddot {\mathbf{q}}\indf}\cConfig(n_i) \\
+ 2\LU{0}{\tomega}\cConfig \times \LU{0b}{\Rot}\cConfig \LU{b}{\dot {\mathbf{q}}\indf}\cConfig(n_i) \\
+ \LU{0}{\talpha}\cConfig \times \LU{0}{{\mathbf{p}}}\cConfig(n_i) \\
+ \LU{0}{\tomega}\cConfig \times (\LU{0}{\tomega}\cConfig \times \LU{0}{{\mathbf{p}}}\cConfig(n_i)) \end{array}\)</span></div>
</div>
</td>
<td><div class="line-block">
<div class="line">global acceleration of mesh
node <span class="math notranslate nohighlight">\(n_i\)</span> including rigid body motion and flexible deformation; note that <span class="math notranslate nohighlight">\(\LU{0}{{\mathbf{p}}}\cConfig(n_i) = \LU{0b}{\Rot} \LU{b}{{\mathbf{p}}}\cConfig(n_i)\)</span></div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">DisplacementLocal</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><span class="math notranslate nohighlight">\(\LU{b}{{\mathbf{d}}}\cConfig(n_i) = \LU{b}{{\mathbf{p}}}\cConfig(n_i) - \LU{b}{{\mathbf{x}}}\cRef(n_i)\)</span></div>
</div>
</td>
<td><div class="line-block">
<div class="line">local displacement of mesh node <span class="math notranslate nohighlight">\(n_i\)</span>, representing the flexible deformation within the body frame; note that <span class="math notranslate nohighlight">\(\LU{0}{{\mathbf{u}}}\cConfig \neq \LU{0b}{\Rot}\LU{b}{{\mathbf{d}}}\cConfig\)</span> !</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">VelocityLocal</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><span class="math notranslate nohighlight">\(\LU{b}{\dot {\mathbf{q}}\indf}\cConfig(n_i)\)</span></div>
</div>
</td>
<td><div class="line-block">
<div class="line">local velocity of mesh node <span class="math notranslate nohighlight">\(n_i\)</span>, representing the rate of flexible deformation within the body frame</div>
</div>
</td>
</tr>
</tbody>
</table>
</section>
<section id="definition-of-quantities">
<h2>Definition of quantities<a class="headerlink" href="#definition-of-quantities" title="Link to this heading"></a></h2>
<table class="docutils align-default" id="id2">
<caption><span class="caption-text"></span><a class="headerlink" href="#id2" title="Link to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><div class="line-block">
<div class="line">intermediate variables</div>
</div>
</th>
<th class="head"><div class="line-block">
<div class="line">symbol</div>
</div>
</th>
<th class="head"><div class="line-block">
<div class="line">description</div>
</div>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">object coordinates</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><span class="math notranslate nohighlight">\({\mathbf{q}} = [{\mathbf{q}}\indt\tp,\;{\mathbf{q}}\indr\tp,\;{\mathbf{q}}\indf\tp]\tp\)</span></div>
</div>
</td>
<td><div class="line-block">
<div class="line">object coordinates</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">rigid body coordinates</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><span class="math notranslate nohighlight">\({\mathbf{q}}\indrigid = [{\mathbf{q}}\indt\tp,\;{\mathbf{q}}\indr\tp]\tp =  [q_0,\,q_1,\,q_2,\,\psi_0,\,\psi_1,\,\psi_2,\,\psi_3]\tp\)</span></div>
</div>
</td>
<td><div class="line-block">
<div class="line">rigid body coordinates in case of Euler parameters</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">reference frame (rigid body) position</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><span class="math notranslate nohighlight">\(\LU{0}{\pRef\cConfig} = \LU{0}{{\mathbf{q}}_\mathrm{t,config}}+\LU{0}{{\mathbf{q}}_\mathrm{t,ref}}\)</span></div>
</div>
</td>
<td><div class="line-block">
<div class="line">global position of underlying rigid body node <span class="math notranslate nohighlight">\(n_0\)</span> which defines the reference frame origin</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">reference frame (rigid body) orientation</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><span class="math notranslate nohighlight">\(\LU{0b}{\Rot(\ttheta)}\cConfig\)</span></div>
</div>
</td>
<td><div class="line-block">
<div class="line">transformation matrix for transformation of local (reference frame) to global coordinates, given by underlying rigid body node <span class="math notranslate nohighlight">\(n_0\)</span></div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">local nodal position</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><span class="math notranslate nohighlight">\(\LU{b}{{\mathbf{p}}^{(i)}} = \LU{b}{{\mathbf{x}}^{(i)}}\cRef + \LU{b}{{\mathbf{q}}\indf^{(i)}}\)</span></div>
</div>
</td>
<td><div class="line-block">
<div class="line">vector of body-fixed (local) position of node <span class="math notranslate nohighlight">\((i)\)</span>, including flexible part</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">local nodal positions</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><span class="math notranslate nohighlight">\(\LU{b}{{\mathbf{p}}} = \LU{b}{{\mathbf{x}}}\cRef + \LU{b}{{\mathbf{q}}\indf}\)</span></div>
</div>
</td>
<td><div class="line-block">
<div class="line">vector of all body-fixed (local) nodal positions including flexible part</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">rotation coordinates</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><span class="math notranslate nohighlight">\(\ttheta\cCur = [\psi_0,\,\psi_1,\,\psi_2,\,\psi_3]\tp\cRef + [\psi_0,\,\psi_1,\,\psi_2,\,\psi_3]\cCur\tp\)</span></div>
</div>
</td>
<td><div class="line-block">
<div class="line">rigid body coordinates in case of Euler parameters</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">flexible coordinates</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><span class="math notranslate nohighlight">\(\LU{b}{{\mathbf{q}}\indf}\)</span></div>
</div>
</td>
<td><div class="line-block">
<div class="line">flexible, body-fixed coordinates</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">transformation of flexible coordinates</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><span class="math notranslate nohighlight">\(\LU{0b}{{\mathbf{A}}_{bd}} = \mathrm{diag}([\LU{0b}{{\mathbf{A}}},\;\ldots,\;\LU{0b}{{\mathbf{A}}})\)</span></div>
</div>
</td>
<td><div class="line-block">
<div class="line">block diagonal transformation matrix, which transforms all flexible coordinates from local to global coordinates</div>
</div>
</td>
</tr>
</tbody>
</table>
<p>The derivations follow Zwölfer and Gerstmayr  with only small modifications in the notation.</p>
</section>
<section id="nodal-coordinates">
<h2>Nodal coordinates<a class="headerlink" href="#nodal-coordinates" title="Link to this heading"></a></h2>
<p>Consider an object with <span class="math notranslate nohighlight">\(n = 1 + n_\mathrm{nf}\)</span> nodes, <span class="math notranslate nohighlight">\(n_\mathrm{nf}\)</span> being the number of ‘flexible’ nodes and one additional node is the rigid body node for the reference frame.
The list if node numbers is <span class="math notranslate nohighlight">\([n_0,\,\ldots,\,n_{n_\mathrm{nf}}]\)</span> and the according numbers of
nodal coordinates are <span class="math notranslate nohighlight">\([n_{c_0},\,\ldots,\,n_{c_n}]\)</span>, where <span class="math notranslate nohighlight">\(n_0\)</span> denotes the rigid body node.
This gives <span class="math notranslate nohighlight">\(n_c\)</span> total nodal coordinates,</p>
<div class="math notranslate nohighlight">
\[n_c = \sum_{i=0}^{n_\mathrm{nf}} n_{c_i} ,\]</div>
<p>whereof the number of flexible coordinates is</p>
<div class="math notranslate nohighlight">
\[n\indf = 3 \cdot n_\mathrm{nf} .\]</div>
<p>The total number of equations (=coordinates) of the object is <span class="math notranslate nohighlight">\(n_c\)</span>.
The first node <span class="math notranslate nohighlight">\(n_0\)</span> represents the rigid body motion of the underlying reference frame with <span class="math notranslate nohighlight">\(n_{c\indr} = n_{c_0}\)</span> coordinates (e.g.,
<span class="math notranslate nohighlight">\(n_{c\indr}=6\)</span> coordinates for Euler angles and <span class="math notranslate nohighlight">\(n_{c\indr}=7\)</span> coordinates in case of Euler parameters; currently only the Euler parameter
case is implemented.).</p>
</section>
<section id="kinematics">
<h2>Kinematics<a class="headerlink" href="#kinematics" title="Link to this heading"></a></h2>
<p>We assume a finite element mesh with
The kinematics of the <a class="reference internal" href="../Abbreviations.html#ffrf"><span class="std std-ref">FFRF</span></a> is based on a splitting of
translational (<span class="math notranslate nohighlight">\({\mathbf{c}}_t \in \Rcal^{n\indf}\)</span>), rotational (<span class="math notranslate nohighlight">\({\mathbf{c}}\indr \in \Rcal^{n\indf}\)</span>) and flexible (<span class="math notranslate nohighlight">\({\mathbf{c}}\indf \in \Rcal^{n\indf}\)</span>) nodal displacements,</p>
<div class="math notranslate nohighlight" id="equation-eq-objectffrf-coordinatessplitting">
<span class="eqno">(58)<a class="headerlink" href="#equation-eq-objectffrf-coordinatessplitting" title="Link to this equation"></a></span>\[\LU{0}{{\mathbf{c}}} = \LU{0}{{\mathbf{c}}\indt} + \LU{0}{{\mathbf{c}}\indr} + \LU{0}{{\mathbf{c}}\indf} .\]</div>
<p>which are written in global coordinates in Eq. <a class="reference internal" href="#equation-eq-objectffrf-coordinatessplitting">(58)</a> but will be transformed to other coordinates later on.</p>
<p>In the present formulation of <code class="docutils literal notranslate"><span class="pre">ObjectFFRF</span></code>, we use the following set of object coordinates (unknowns)</p>
<div class="math notranslate nohighlight">
\[{\mathbf{q}} = \left[\LU{0}{{\mathbf{q}}\indt\tp} \;\; \ttheta\tp \;\; \LU{b}{{\mathbf{q}}\indf\tp} \right]\tp \in \Rcal^{n_c}\]</div>
<p>with <span class="math notranslate nohighlight">\(\LU{0}{{\mathbf{q}}}\indt \in \Rcal^{3}\)</span>, <span class="math notranslate nohighlight">\(\ttheta \in \Rcal^{4}\)</span> and <span class="math notranslate nohighlight">\(\LU{b}{{\mathbf{q}}}\indf \in \Rcal^{n\indf}\)</span>.
Note that parts of the coordinates <span class="math notranslate nohighlight">\({\mathbf{q}}\)</span> can be already interpreted in specific coordinate systems, which is therefore added.</p>
<p>With the relations</p>
<div class="math notranslate nohighlight" id="equation-eq-objectffrf-phit">
<span class="eqno">(59)<a class="headerlink" href="#equation-eq-objectffrf-phit" title="Link to this equation"></a></span>\[\begin{split}\tPhi\indt &amp;=&amp; \left[\mathbf{I}_{3 \times 3} ,\; \ldots ,\; \mathbf{I}_{3 \times 3} \right]\tp \in \Rcal^{n\indf \times 3} ,\\
\LU{0}{{\mathbf{c}}\indt} &amp;=&amp; \tPhi\indt \LU{0}{{\mathbf{q}}\indt} ,\\
\LU{0}{{\mathbf{c}}\indr} &amp;=&amp; \left(\LU{0b}{{\mathbf{A}}_{bd}} - {\mathbf{I}}_{bd}\right) \LU{b}{{\mathbf{x}}\cRef} ,\\
\LU{0}{{\mathbf{c}}\indf} &amp;=&amp; \LU{0b}{{\mathbf{A}}_{bd}} \LU{b}{{\mathbf{q}}\indf} , \mathrm{and}\\
{\mathbf{I}}_{bd} &amp;=&amp; \mathrm{diag}(\mathbf{I}_{3 \times 3}, \; \ldots ,\; \mathbf{I}_{3 \times 3}) \in \Rcal^{n\indf \times n\indf}  ,\end{split}\]</div>
<p>we obtain the total relation of (global) nodal displacements to the object coordinates</p>
<div class="math notranslate nohighlight">
\[\LU{0}{{\mathbf{c}}} = \tPhi\indt \LU{0}{{\mathbf{q}}\indt} + \left(\LU{0b}{{\mathbf{A}}_{bd}} - {\mathbf{I}}_{bd}\right) \LU{b}{{\mathbf{x}}\cRef} + \LU{0b}{{\mathbf{A}}_{bd}} \LU{b}{{\mathbf{q}}\indf} .\]</div>
<p>On velocity level, we have</p>
<div class="math notranslate nohighlight">
\[\LU{0}{\dot {\mathbf{c}}} = {\mathbf{L}} \dot {\mathbf{q}} ,\]</div>
<p>with the matrix <span class="math notranslate nohighlight">\({\mathbf{L}} \in \Rcal^{n\indf \times n_c}\)</span></p>
<div class="math notranslate nohighlight">
\[{\mathbf{L}} = \left[\tPhi\indt ,\;\; -\LU{0b}{{\mathbf{A}}_{bd}} \LU{b}{\tilde {\mathbf{p}}} \LU{b}{{\mathbf{G}}} ,\;\; \LU{0b}{{\mathbf{A}}_{bd}} \right]\]</div>
<p>with the rotation parameters specific matrix <span class="math notranslate nohighlight">\(\LU{b}{{\mathbf{G}}}\)</span>, implicitly defined in the rigid body node by the relation <span class="math notranslate nohighlight">\(\LU{b}{\tomega} = \LU{b}{{\mathbf{G}}} \dot \ttheta\)</span>and the body-fixed nodal position vector (for node <span class="math notranslate nohighlight">\(i\)</span>)</p>
<div class="math notranslate nohighlight">
\[\LU{b}{{\mathbf{p}}} = \LU{b}{{\mathbf{x}}\cRef} + \LU{b}{{\mathbf{q}}\indf}, \quad \LU{b}{{\mathbf{p}}^{(i)}} = \LU{b}{{\mathbf{x}}^{(i)}\cRef} + \LU{b}{{\mathbf{q}}_{\mathrm{f},i}^{(i)}}\]</div>
<p>and the special tilde matrix for vectors <span class="math notranslate nohighlight">\({\mathbf{p}} \in \Rcal^{3 {n_\mathrm{nf}}}\)</span>,</p>
<div class="math notranslate nohighlight" id="equation-eq-objectffrf-specialtilde">
<span class="eqno">(60)<a class="headerlink" href="#equation-eq-objectffrf-specialtilde" title="Link to this equation"></a></span>\[\LU{b}{\tilde {\mathbf{p}}} = \vr{\LU{b}{\tilde{\mathbf{p}}^{(i)}}}{\vdots}{\LU{b}{\tilde{\mathbf{p}}^{(i)}}} \in \Rcal^{3{n_\mathrm{nf}} \times 3} .\]</div>
<p>with the tilde operator for a <span class="math notranslate nohighlight">\({\mathbf{p}}^{(i)} \in \Rcal^{3}\)</span> defined in the common notations section.</p>
</section>
<section id="equations-of-motion">
<h2>Equations of motion<a class="headerlink" href="#equations-of-motion" title="Link to this heading"></a></h2>
<p>We use the Lagrange equations extended for constraint <span class="math notranslate nohighlight">\({\mathbf{g}}\)</span>,</p>
<div class="math notranslate nohighlight">
\[\frac{d}{dt} \left( \frac{\partial T}{\partial \dot {\mathbf{q}}\tp} \right) - \frac{\partial T}{\partial {\mathbf{q}}\tp} + \frac{\partial V}{\partial {\mathbf{q}}\tp} + \frac{\partial \tlambda\tp {\mathbf{g}}}{\partial {\mathbf{q}}\tp} = \frac{\partial W}{\partial {\mathbf{q}}\tp}\]</div>
<p>with the quantities</p>
<div class="math notranslate nohighlight">
\[\begin{split}T(\LU{0}{\dot {\mathbf{c}}({\mathbf{q}}, \dot {\mathbf{q}})}) &amp;=&amp; \frac{1}{2}\LU{0}{\dot {\mathbf{c}}\tp} \LU{0}{{\mathbf{M}}}  \LU{0}{\dot {\mathbf{c}}} = \frac{1}{2}\LU{0}{\dot {\mathbf{c}}\tp} \LU{0b}{{\mathbf{A}}_{bd}} \LU{b}{{\mathbf{M}}} \LU{0b}{{\mathbf{A}}_{bd}}\tp  \LU{0}{\dot {\mathbf{c}}} = \frac{1}{2}\LU{0}{\dot {\mathbf{c}}\tp} \LU{b}{{\mathbf{M}}}  \LU{0}{\dot {\mathbf{c}}}\\
V(\LU{0}{{\mathbf{q}}\indf}) &amp;=&amp; \frac{1}{2}\LU{b}{{\mathbf{q}}\indf\tp} \LU{b}{{\mathbf{K}}}  \LU{b}{{\mathbf{q}}\indf}  \\
\delta W(\LU{0}{{\mathbf{c}}({\mathbf{q}})},t) &amp;=&amp; \LU{b}{\delta {\mathbf{c}} \tp} {\mathbf{f}}  \\
{\mathbf{g}}({\mathbf{q}}, t) &amp;=&amp; \Null  \\\end{split}\]</div>
<p>Note that <span class="math notranslate nohighlight">\(\LU{b}{{\mathbf{M}}}\)</span> and <span class="math notranslate nohighlight">\(\LU{b}{{\mathbf{K}}}\)</span> are the conventional finite element mass an stiffness
matrices defined in the body frame.</p>
<p>Elementary differentiation rules of the Lagrange equations lead to</p>
<div class="math notranslate nohighlight" id="equation-eq-objectffrf-leq">
<span class="eqno">(61)<a class="headerlink" href="#equation-eq-objectffrf-leq" title="Link to this equation"></a></span>\[{\mathbf{L}}\tp {\mathbf{M}} {\mathbf{L}} \ddot {\mathbf{q}} + {\mathbf{L}}\tp {\mathbf{M}} \dot {\mathbf{L}} \dot {\mathbf{q}} + \hat {\mathbf{K}} {\mathbf{q}} + \frac{\partial {\mathbf{g}}}{\partial {\mathbf{q}}\tp} \tlambda = {\mathbf{L}}\tp {\mathbf{f}}\]</div>
<p>with <span class="math notranslate nohighlight">\({\mathbf{M}} = \LU{b}{{\mathbf{M}}}\)</span> and <span class="math notranslate nohighlight">\(\hat {\mathbf{K}}\)</span> becoming obvious in Eq. <a class="reference internal" href="#equation-eq-objectffrf-eom">(62)</a>.
Note that Eq. <a class="reference internal" href="#equation-eq-objectffrf-leq">(61)</a> is given in global coordinates for the translational part, in terms of rotation parameters
for the rotation part and in body-fixed coordinates for the flexible part of the equations.</p>
<p>In case that <code class="docutils literal notranslate"><span class="pre">computeFFRFterms</span> <span class="pre">=</span> <span class="pre">True</span></code>, the equations  <span class="xref std std-ref">eq-objectffrf-leq</span> can be transformed into the equations of motion,</p>
<div class="math notranslate nohighlight" id="equation-eq-objectffrf-eom">
<span class="eqno">(62)<a class="headerlink" href="#equation-eq-objectffrf-eom" title="Link to this equation"></a></span>\[\left({\mathbf{M}}_{user}(mbs, t, i_N, {\mathbf{q}},\dot {\mathbf{q}}) + \mr{{\mathbf{M}}\indtt}{{\mathbf{M}}\indtr}{{\mathbf{M}}\indtf} {}{{\mathbf{M}}\indrr}{{\mathbf{M}}\indrf} {\mathrm{sym.}}{}{\LU{b}{{\mathbf{M}}}} \right) \ddot {\mathbf{q}} + \mr{0}{0}{0} {0}{0}{0} {0}{0}{\LU{b}{{\mathbf{D}}}} \dot {\mathbf{q}} + \mr{0}{0}{0} {0}{0}{0} {0}{0}{\LU{b}{{\mathbf{K}}}} {\mathbf{q}} = {\mathbf{f}}_{v}({\mathbf{q}},\dot {\mathbf{q}}) + \vp{{\mathbf{f}}\indr}{\LURU{0b}{{\mathbf{A}}}{bd}{\mathrm{T}} {\mathbf{f}}\indf} + {\mathbf{f}}_{user}(mbs, t, i_N, {\mathbf{q}}, \dot {\mathbf{q}})\]</div>
<p>in which <code class="docutils literal notranslate"><span class="pre">iN</span></code> represents the itemNumber (=objectNumber of ObjectFFRF in mbs) in the user function.
The mass terms are given as</p>
<div class="math notranslate nohighlight">
\[\begin{split}{\mathbf{M}}\indtt &amp;=&amp; \tPhi\indt\tp \LU{b}{{\mathbf{M}}} \tPhi\indt,\\
{\mathbf{M}}\indtr &amp;=&amp; -\LU{0b}{\Rot} \tPhi\indt\tp \LU{b}{{\mathbf{M}}} \LU{b}{\tilde {\mathbf{p}}} \LU{b}{{\mathbf{G}}} ,\\
{\mathbf{M}}\indtf &amp;=&amp; \LU{0b}{\Rot} \tPhi\indt\tp \LU{b}{{\mathbf{M}}} ,\\
{\mathbf{M}}\indrr &amp;=&amp; \LU{b}{{\mathbf{G}}}\tp \LU{b}{\tilde {\mathbf{p}}\tp} \LU{b}{{\mathbf{M}}} \LU{b}{\tilde {\mathbf{p}}} \LU{b}{{\mathbf{G}}} ,\\
{\mathbf{M}}\indrf &amp;=&amp; - \LU{b}{{\mathbf{G}}}\tp \LU{b}{\tilde {\mathbf{p}}\tp} \LU{b}{{\mathbf{M}}} .\end{split}\]</div>
<p>In case that <code class="docutils literal notranslate"><span class="pre">computeFFRFterms</span> <span class="pre">=</span> <span class="pre">False</span></code>, the mass terms <span class="math notranslate nohighlight">\({\mathbf{M}}\indtt, {\mathbf{M}}\indtr, {\mathbf{M}}\indtf, {\mathbf{M}}\indrr,
{\mathbf{M}}\indrf, \LU{b}{{\mathbf{M}}}\)</span> in Eq. <a class="reference internal" href="#equation-eq-objectffrf-eom">(62)</a> are set to zero (and not computed) and
the quadratic velocity vector <span class="math notranslate nohighlight">\({\mathbf{f}}_{v} = \Null\)</span>.
Note that the user functions <span class="math notranslate nohighlight">\({\mathbf{f}}_{user}(mbs, t, i_N, {\mathbf{q}},\dot {\mathbf{q}})\)</span> and <span class="math notranslate nohighlight">\({\mathbf{M}}_{user}(mbs, t, i_N, {\mathbf{q}},\dot {\mathbf{q}})\)</span> may be empty (=0).
The detailed equations of motion for this element can be found in .</p>
<p>The quadratic velocity vector follows as</p>
<div class="math notranslate nohighlight">
\[{\mathbf{f}}_{v}({\mathbf{q}},\dot {\mathbf{q}}) = \vr {-\LU{0b}{\Rot} \tPhi\indt\tp \LU{b}{{\mathbf{M}}}\left( \omegaBDtilde \omegaBDtilde \LU{b}{{\mathbf{p}}} + 2 \omegaBDtilde \LU{b}{\dot {\mathbf{q}}}\indf - \LU{b}{\tilde {\mathbf{p}}} \LU{b}{\dot {\mathbf{G}}} \dot \ttheta \right)} {\LU{b}{{\mathbf{G}}}\tp \LU{b}{\tilde {\mathbf{p}}\tp} \LU{b}{{\mathbf{M}}} \left( \omegaBDtilde \omegaBDtilde \LU{b}{{\mathbf{p}}} + 2 \omegaBDtilde \LU{b}{\dot {\mathbf{q}}}\indf - \LU{b}{\tilde {\mathbf{p}}} \LU{b}{\dot {\mathbf{G}}} \dot \ttheta \right)} {-\LU{b}{{\mathbf{M}}} \left( \omegaBDtilde \omegaBDtilde \LU{b}{{\mathbf{p}}} + 2 \omegaBDtilde \LU{b}{\dot {\mathbf{q}}}\indf - \LU{b}{\tilde {\mathbf{p}}} \LU{b}{\dot {\mathbf{G}}} \dot \ttheta \right)}\]</div>
<p>with the special matrix</p>
<div class="math notranslate nohighlight">
\[\omegaBDtilde = \mathrm{diag}\left(\LU{b}{\tilde \tomega_\mathrm{bd}}, \; \ldots ,\; \LU{b}{\tilde \tomega_\mathrm{bd}}  \right) \in \Rcal^{n\indf \times n\indf}\]</div>
<p>CoordinateLoads are added for each <a class="reference internal" href="../Abbreviations.html#ode2"><span class="std std-ref">ODE2</span></a> coordinate on the RHS of the latter equation.</p>
<p>If the rigid body node is using Euler parameters <span class="math notranslate nohighlight">\(\ttheta = [\theta_0,\,\theta_1,\,\theta_2,\,\theta_3]\tp\)</span>, an <strong>additional constraint</strong> (constraint nr.0) is
added automatically for the Euler parameter norm, reading</p>
<div class="math notranslate nohighlight">
\[1 - \sum_{i=0}^{3} \theta_i^2 = 0.\]</div>
<p>In order to suppress the rigid body motion of the mesh nodes, you should apply a ObjectConnectorCoordinateVector object with the following constraint
equations which impose constraints of a so-called Tisserand frame, giving 3 constraints for the position of the center of mass</p>
<div class="math notranslate nohighlight">
\[\Phi\indt\tp \LU{b}{{\mathbf{M}}} {\mathbf{q}}\indf = 0\]</div>
<p>and 3 constraints for the rotation,</p>
<div class="math notranslate nohighlight">
\[\tilde{\mathbf{x}}_{f}\tp \LU{b}{{\mathbf{M}}} {\mathbf{q}}\indf = 0\]</div>
<hr class="docutils" />
<p><strong>Userfunction</strong>: <code class="docutils literal notranslate"><span class="pre">forceUserFunction(mbs,</span> <span class="pre">t,</span> <span class="pre">itemNumber,</span> <span class="pre">q,</span> <span class="pre">q_t)</span></code></p>
<p>A user function, which computes a force vector depending on current time and states of object. Can be used to create any kind of mechanical system by using the object states.</p>
<table class="docutils align-default" id="id3">
<caption><span class="caption-text"></span><a class="headerlink" href="#id3" title="Link to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><div class="line-block">
<div class="line">arguments /  return</div>
</div>
</th>
<th class="head"><div class="line-block">
<div class="line">type or size</div>
</div>
</th>
<th class="head"><div class="line-block">
<div class="line">description</div>
</div>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">mbs</span></code></div>
</div>
</td>
<td><div class="line-block">
<div class="line">MainSystem</div>
</div>
</td>
<td><div class="line-block">
<div class="line">provides MainSystem mbs to which object belongs</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">t</span></code></div>
</div>
</td>
<td><div class="line-block">
<div class="line">Real</div>
</div>
</td>
<td><div class="line-block">
<div class="line">current time in mbs</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">itemNumber</span></code></div>
</div>
</td>
<td><div class="line-block">
<div class="line">Index</div>
</div>
</td>
<td><div class="line-block">
<div class="line">integer number of the object in mbs, allowing easy access to all object data via mbs.GetObjectParameter(itemNumber, …)</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">q</span></code></div>
</div>
</td>
<td><div class="line-block">
<div class="line">Vector <span class="math notranslate nohighlight">\(\in \Rcal^n_c\)</span></div>
</div>
</td>
<td><div class="line-block">
<div class="line">object coordinates (nodal displacement coordinates of rigid body and mesh nodes) in current configuration, without reference values</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">q_t</span></code></div>
</div>
</td>
<td><div class="line-block">
<div class="line">Vector <span class="math notranslate nohighlight">\(\in \Rcal^n_c\)</span></div>
</div>
</td>
<td><div class="line-block">
<div class="line">object velocity coordinates (time derivative of <code class="docutils literal notranslate"><span class="pre">q</span></code>) in current configuration</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">returnValue</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Vector <span class="math notranslate nohighlight">\(\in \Rcal^{n_c}\)</span></div>
</div>
</td>
<td><div class="line-block">
<div class="line">returns force vector for object</div>
</div>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<p><strong>Userfunction</strong>: <code class="docutils literal notranslate"><span class="pre">massMatrixUserFunction(mbs,</span> <span class="pre">t,</span> <span class="pre">itemNumber,</span> <span class="pre">q,</span> <span class="pre">q_t)</span></code></p>
<p>A user function, which computes a mass matrix depending on current time and states of object. Can be used to create any kind of mechanical system by using the object states.</p>
<table class="docutils align-default" id="id4">
<caption><span class="caption-text"></span><a class="headerlink" href="#id4" title="Link to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><div class="line-block">
<div class="line">arguments /  return</div>
</div>
</th>
<th class="head"><div class="line-block">
<div class="line">type or size</div>
</div>
</th>
<th class="head"><div class="line-block">
<div class="line">description</div>
</div>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">mbs</span></code></div>
</div>
</td>
<td><div class="line-block">
<div class="line">MainSystem</div>
</div>
</td>
<td><div class="line-block">
<div class="line">provides MainSystem mbs to which object belongs</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">t</span></code></div>
</div>
</td>
<td><div class="line-block">
<div class="line">Real</div>
</div>
</td>
<td><div class="line-block">
<div class="line">current time in mbs</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">itemNumber</span></code></div>
</div>
</td>
<td><div class="line-block">
<div class="line">Index</div>
</div>
</td>
<td><div class="line-block">
<div class="line">integer number of the object in mbs, allowing easy access to all object data via mbs.GetObjectParameter(itemNumber, …)</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">q</span></code></div>
</div>
</td>
<td><div class="line-block">
<div class="line">Vector <span class="math notranslate nohighlight">\(\in \Rcal^n_c\)</span></div>
</div>
</td>
<td><div class="line-block">
<div class="line">object coordinates (nodal displacement coordinates of rigid body and mesh nodes) in current configuration, without reference values</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">q_t</span></code></div>
</div>
</td>
<td><div class="line-block">
<div class="line">Vector <span class="math notranslate nohighlight">\(\in \Rcal^n_c\)</span></div>
</div>
</td>
<td><div class="line-block">
<div class="line">object velocity coordinates (time derivative of <code class="docutils literal notranslate"><span class="pre">q</span></code>) in current configuration</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">returnValue</div>
</div>
</td>
<td><div class="line-block">
<div class="line">NumpyMatrix <span class="math notranslate nohighlight">\(\in \Rcal^{n_c \times n_c}\)</span></div>
</div>
</td>
<td><div class="line-block">
<div class="line">returns mass matrix for object</div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Relevant Examples and TestModels with weblink:</p>
<blockquote>
<div><p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/objectFFRFTest.py">objectFFRFTest.py</a> (TestModels/), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/objectFFRFTest2.py">objectFFRFTest2.py</a> (TestModels/)</p>
</div></blockquote>
<p><strong>The web version may not be complete. For details, consider also the Exudyn PDF documentation</strong> : <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/docs/theDoc/theDoc.pdf">theDoc.pdf</a></p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="ObjectKinematicTree.html" class="btn btn-neutral float-left" title="ObjectKinematicTree" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="ObjectFFRFreducedOrder.html" class="btn btn-neutral float-right" title="ObjectFFRFreducedOrder" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>