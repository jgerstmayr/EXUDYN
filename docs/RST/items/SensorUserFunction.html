<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SensorUserFunction &mdash; Exudyn1.6.31.dev1 1.6.31.dev1 documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/rtd_sphinx_search.min.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/sphinx_highlight.js"></script>
        <script src="../../../_static/clipboard.min.js"></script>
        <script src="../../../_static/copybutton.js"></script>
        <script src="../../../_static/js/rtd_search_config.js"></script>
        <script src="../../../_static/js/rtd_sphinx_search.min.js"></script>
        <script>window.MathJax = {"loader": {"load": ["[tex]/mathtools"]}, "tex": {"packages": {"[+]": ["mathtools"]}, "macros": {"vspace": ["{}", 1], "ra": "{\\rightarrow}", "Rcal": "{\\mathbb{R}}", "Ccal": "{\\mathbb{C}}", "Ncal": "{\\mathbb{N}}", "Rot": "{\\mathbf{A}}", "dd": "{\\mathrm{d}}", "co": "{\\mathrm{c}}", "si": "{\\mathrm{s}}", "tp": "{^\\mathrm{T}}", "diag": "{\\mathrm{diag}}", "vec": "{\\mathrm{vec}}", "Null": "{\\mathbf{0}}", "varepsilonDot": "{\\boldsymbol{\\varepsilon}}", "talpha": "{\\boldsymbol{\\alpha}}", "tbeta": "{\\boldsymbol{\\beta}}", "tgamma": "{\\boldsymbol{\\gamma}}", "tchi": "{\\boldsymbol{\\chi}}", "tdelta": "{\\boldsymbol{\\delta}}", "teps": "{\\boldsymbol{\\varepsilon}}", "tepsDot": "{\\boldsymbol{\\dot \\varepsilon}}", "teta": "{\\boldsymbol{\\eta}}", "tkappa": "{\\boldsymbol{\\kappa}}", "tkappaDot": "{\\boldsymbol{\\dot \\kappa}}", "tphi": "{\\boldsymbol{\\phi}}", "tPhi": "{\\boldsymbol{\\Phi}}", "ttheta": "{\\boldsymbol{\\theta}}", "tTheta": "{\\boldsymbol{\\Theta}}", "tlambda": "{\\boldsymbol{\\lambda}}", "tnu": "{\\boldsymbol{\\nu}}", "tmu": "{\\boldsymbol{\\mu}}", "tpsi": "{\\boldsymbol{\\psi}}", "tPsi": "{\\boldsymbol{\\Psi}}", "ttau": "{\\boldsymbol{\\tau}}", "tsigma": "{\\boldsymbol{\\sigma}}", "txi": "{\\boldsymbol{\\xi}}", "tzeta": "{\\boldsymbol{\\zeta}}", "tomega": "{\\boldsymbol{\\omega}}", "tOmega": "{\\boldsymbol{\\Omega}}", "vareps": "{\\varepsilon}", "pluseq": "\\mathrel{+}=", "LU": ["{\\prescript{#1}{}{#2}\\,}", 2], "LUX": ["{\\prescript{#1}{}{#2}#3\\,}", 3], "LUR": ["{\\prescript{#1}{}{#2}_{#3}\\,}", 3], "LURU": ["{\\prescript{#1}{}{#2}_{#3}^{#4}\\,}", 4], "LLdot": ["{\\prescript{}{#1}{\\dot{#2}}_{#3}\\,}", 3], "vr": ["{\\left[ \\begin{array}{c} { #1}\\vspace{0.04cm} \\\\ { #2}\\vspace{0.04cm} \\\\ { #3} \\end{array} \\right]}", 3], "mr": ["{\\left[ \\begin{array}{ccc} #1 & #2 & #3 \\vspace{0.04cm}\\\\ #4 & #5 & #6 \\vspace{0.04cm}\\\\ #7 & #8 & #9  \\end{array} \\right]}", 9], "vp": ["{\\left[ \\begin{array}{c} { #1} \\vspace{0.04cm}\\\\ { #2} \\end{array} \\right]}", 2], "mp": ["{\\left[ \\begin{array}{cc} #1 & #2 \\vspace{0.04cm}\\\\ #3 & #4 \\end{array} \\right]}", 4], "vrRow": ["{[#1,\\, #2,\\, #3]}", 3], "vsix": ["{\\left[\\!\\! \\begin{array}{c} { #1} \\\\ { #2} \\\\ { #3} \\\\ { #4} \\\\ { #5} \\\\ { #6} \\end{array} \\!\\!\\right]}", 6], "vsixb": ["{\\begin{array}{c} { #1} \\\\ { #2} \\\\ { #3} \\\\ { #4} \\\\ { #5} \\\\ { #6} \\end{array} }", 6], "vsixs": ["{ \\begin{array}{c} { #1} \\\\ { #2} \\\\ { #3} \\\\ { #4} \\\\ { #5} \\\\ { #6} \\end{array} }", 6], "SO": "{q}", "FO": "{y}", "AE": "{\\lambda}", "SYS": "{s}", "SON": "{$2^\\mathrm{nd}$ order differential equations}", "FON": "{$1^\\mathrm{st}$ order differential equations}", "AEN": "{algebraic equations}", "SYSN": "{system equations}", "cIni": "{_\\mathrm{ini}}", "cRef": "{_\\mathrm{ref}}", "cCur": "{_\\mathrm{cur}}", "cVis": "{_\\mathrm{vis}}", "cSOS": "{_\\mathrm{start\\;of\\;step}}", "cConfig": "{_\\mathrm{config}}", "pLoc": "{\\mathbf{b}}", "pLocB": "{\\,^{b}{\\mathbf{v}}}", "pRef": "{\\mathbf{r}}", "pRefG": "{\\,^{0}{\\mathbf{r}}}", "indf": "{_\\mathrm{f}}", "indt": "{_\\mathrm{t}}", "indr": "{_\\mathrm{r}}", "indtt": "{_\\mathrm{tt}}", "indrr": "{_\\mathrm{rr}}", "indff": "{_\\mathrm{ff}}", "indtf": "{_\\mathrm{tf}}", "indrf": "{_\\mathrm{rf}}", "indtr": "{_\\mathrm{tr}}", "omegaBDtilde": "{\\LU{b}{\\tilde \\tomega_\\mathrm{bd}}}", "indrigid": "{_\\mathrm{rigid}}", "indred": "{_\\mathrm{red}}", "induser": "{_\\mathrm{user}}", "indu": "{_\\mathrm{u}}", "termA": ["{\\color{blue}{#1}}", 1], "termB": ["{\\color{red}{#1}}", 1], "termC": ["{\\color{green}{#1}}", 1], "avu": "{\\ddot \\mathbf{q}}", "GA": "{G\\alpha}", "aalg": "{\\mathbf{a}}", "vel": "{\\mathbf{v}}"}}}</script>
        <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Structures and Settings" href="../structures/StructuresAndSettingsIndex.html" />
    <link rel="prev" title="SensorLoad" href="SensorLoad.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            Exudyn1.6.31.dev1
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Exudyn User Manual</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Exudyn.html">Exudyn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../InstallationAndGettingStartedIndex.html">Installation and Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../OverviewOnExudynIndex.html">Overview on Exudyn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../TutorialIndex.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../GraphicsAndVisualizationIndex.html">Graphics and visualization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../NotationIndex.html">Notation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../TheoryAndFormulationsIndex.html">Theory and formulations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../SolversIndex.html">Solvers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cInterface/CInterfaceIndex.html">Python-C++ command interface</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference Manual</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../pythonUtilities/index.html">Python Utility Functions</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="itemsIndex.html">Items reference manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="nodeIndex.html">Node</a></li>
<li class="toctree-l2"><a class="reference internal" href="objectBodyIndex.html">Object (Body)</a></li>
<li class="toctree-l2"><a class="reference internal" href="objectSuperElementIndex.html">Object (SuperElement)</a></li>
<li class="toctree-l2"><a class="reference internal" href="objectObjectIndex.html">Object (Object)</a></li>
<li class="toctree-l2"><a class="reference internal" href="objectFiniteElementIndex.html">Object (FiniteElement)</a></li>
<li class="toctree-l2"><a class="reference internal" href="objectConnectorIndex.html">Object (Connector)</a></li>
<li class="toctree-l2"><a class="reference internal" href="objectConstraintIndex.html">Object (Constraint)</a></li>
<li class="toctree-l2"><a class="reference internal" href="objectJointIndex.html">Object (Joint)</a></li>
<li class="toctree-l2"><a class="reference internal" href="markerIndex.html">Marker</a></li>
<li class="toctree-l2"><a class="reference internal" href="loadIndex.html">Load</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="sensorIndex.html">Sensor</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="SensorNode.html">SensorNode</a></li>
<li class="toctree-l3"><a class="reference internal" href="SensorObject.html">SensorObject</a></li>
<li class="toctree-l3"><a class="reference internal" href="SensorBody.html">SensorBody</a></li>
<li class="toctree-l3"><a class="reference internal" href="SensorSuperElement.html">SensorSuperElement</a></li>
<li class="toctree-l3"><a class="reference internal" href="SensorKinematicTree.html">SensorKinematicTree</a></li>
<li class="toctree-l3"><a class="reference internal" href="SensorMarker.html">SensorMarker</a></li>
<li class="toctree-l3"><a class="reference internal" href="SensorLoad.html">SensorLoad</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">SensorUserFunction</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../structures/StructuresAndSettingsIndex.html">Structures and Settings</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Misc</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Abbreviations.html">List of Abbreviations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ExamplesIndex.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../TestModelsIndex.html">TestModels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../trackerlog.html">Issue tracker</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Exudyn1.6.31.dev1</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="itemsIndex.html">Items reference manual</a></li>
          <li class="breadcrumb-item"><a href="sensorIndex.html">Sensor</a></li>
      <li class="breadcrumb-item active">SensorUserFunction</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/docs/RST/items/SensorUserFunction.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="sensoruserfunction">
<span id="sec-item-sensoruserfunction"></span><h1>SensorUserFunction<a class="headerlink" href="#sensoruserfunction" title="Permalink to this heading"></a></h1>
<p>A sensor defined by a user function. The sensor is intended to collect sensor values of a list of given sensors and recombine the output into a new value for output or control purposes. It is also possible to use this sensor without any dependence on other sensors in order to generate output for, e.g., any quantities in mbs or solvers.</p>
<p>The item <strong>SensorUserFunction</strong> with type = ‘UserFunction’ has the following parameters:</p>
<ul>
<li><div class="line-block">
<div class="line"><strong>name</strong> [type = String, default = ‘’]:</div>
<div class="line">sensor’s unique name</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>sensorNumbers</strong> [<span class="math notranslate nohighlight">\(\mathbf{n}_s = [s_0,\,\ldots,\,s_n]\tp\)</span>, type = ArraySensorIndex, default = []]:</div>
<div class="line">optional list of <span class="math notranslate nohighlight">\(n\)</span> sensor numbers for use in user function</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>factors</strong> [<span class="math notranslate nohighlight">\(\mathbf{f}_s = [f_0,\,\ldots,\,f_m]\tp\)</span>, type = Vector, default = []]:</div>
<div class="line">optional list of <span class="math notranslate nohighlight">\(m\)</span> factors which can be used, e.g., for weighting sensor values</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>writeToFile</strong> [type = Bool, default = True]:</div>
<div class="line">True: write sensor output to file; flag is ignored (interpreted as False), if fileName=’’</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>fileName</strong> [type = String, default = ‘’]:</div>
<div class="line">directory and file name for sensor file output; default: empty string generates sensor + sensorNumber + outputVariableType; directory will be created if it does not exist</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>sensorUserFunction</strong> [type = PyFunctionVectorMbsScalarArrayIndexVectorConfiguration, default =  0]:</div>
<div class="line">A Python function which defines the time-dependent user function, which usually evaluates one or several sensors and computes a new sensor value, see example</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>storeInternal</strong> [type = Bool, default = False]:</div>
<div class="line">true: store sensor data in memory (faster, but may consume large amounts of memory); false: internal storage not available</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>visualization</strong> [type = VSensorUserFunction]:</div>
<div class="line">parameters for visualization of item</div>
</div>
</li>
</ul>
<p>The item VSensorUserFunction has the following parameters:</p>
<ul>
<li><div class="line-block">
<div class="line"><strong>show</strong> [type = Bool, default = True]:</div>
<div class="line">set true, if item is shown in visualization and false if it is not shown; sensor visualization CURRENTLY NOT IMPLEMENTED</div>
</div>
</li>
</ul>
<hr class="docutils" />
<section id="description-of-sensoruserfunction">
<span id="description-sensoruserfunction"></span><h2>DESCRIPTION of SensorUserFunction<a class="headerlink" href="#description-of-sensoruserfunction" title="Permalink to this heading"></a></h2>
<p>The sensor collects data via a user function, which completely describes the output itself.
Note that the sensorNumbers and factors need to be consistent.
The return value of the user function is a list of <code class="docutils literal notranslate"><span class="pre">float</span></code> numbers which cast to a <code class="docutils literal notranslate"><span class="pre">std::vector</span></code> in pybind.
This list can have arbitrary dimension, but should be kept constant during simulation.</p>
<hr class="docutils" />
<p><strong>Userfunction</strong>: <code class="docutils literal notranslate"><span class="pre">sensorUserFunction(mbs,</span> <span class="pre">t,</span> <span class="pre">sensorNumbers,</span> <span class="pre">factors,</span> <span class="pre">configuration)</span></code></p>
<p>A user function, which computes a sensor output from other sensor outputs (or from generic time dependent functions).
The configuration in general will be the exudyn.ConfigurationType.Current, but others could be used as well except for SensorMarker.
The user function arguments are as follows:</p>
<table class="docutils align-default" id="id1">
<caption><span class="caption-text"></span><a class="headerlink" href="#id1" title="Permalink to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><div class="line-block">
<div class="line">arguments /  return</div>
</div>
</th>
<th class="head"><div class="line-block">
<div class="line">type or size</div>
</div>
</th>
<th class="head"><div class="line-block">
<div class="line">description</div>
</div>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">mbs</span></code></div>
</div>
</td>
<td><div class="line-block">
<div class="line">MainSystem</div>
</div>
</td>
<td><div class="line-block">
<div class="line">provides MainSystem mbs to which object belongs</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">t</span></code></div>
</div>
</td>
<td><div class="line-block">
<div class="line">Real</div>
</div>
</td>
<td><div class="line-block">
<div class="line">current time in mbs</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">sensorNumbers</span></code></div>
</div>
</td>
<td><div class="line-block">
<div class="line">Array <span class="math notranslate nohighlight">\(\in \Ncal^n\)</span></div>
</div>
</td>
<td><div class="line-block">
<div class="line">list of sensor numbers</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">factors</span></code></div>
</div>
</td>
<td><div class="line-block">
<div class="line">Vector <span class="math notranslate nohighlight">\(\in \Rcal^n\)</span></div>
</div>
</td>
<td><div class="line-block">
<div class="line">list of factors that can be freely used for the user function</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">configuration</span></code></div>
</div>
</td>
<td><div class="line-block">
<div class="line">exudyn.ConfigurationType</div>
</div>
</td>
<td><div class="line-block">
<div class="line">usually the exudyn.ConfigurationType.Current, but could also be different in user defined functions.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">returnValue</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Vector <span class="math notranslate nohighlight">\(\in \Rcal^{n_r}\)</span></div>
</div>
</td>
<td><div class="line-block">
<div class="line">returns list or numpy array of sensor output values; size <span class="math notranslate nohighlight">\(n_r\)</span> is implicitly defined by the returned list and may not be changed during simulation.</div>
</div>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<p><strong>User function example</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">exudyn</span> <span class="k">as</span> <span class="nn">exu</span>
<span class="kn">from</span> <span class="nn">exudyn.itemInterface</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">pi</span><span class="p">,</span> <span class="n">atan2</span>
<span class="n">SC</span> <span class="o">=</span> <span class="n">exu</span><span class="o">.</span><span class="nc">SystemContainer</span><span class="p">()</span>
<span class="n">mbs</span> <span class="o">=</span> <span class="n">SC</span><span class="o">.</span><span class="nf">AddSystem</span><span class="p">()</span>
<span class="n">node</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">AddNode</span><span class="p">(</span><span class="nc">NodePoint</span><span class="p">(</span><span class="n">referenceCoordinates</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
                             <span class="n">initialCoordinates</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
                             <span class="n">initialVelocities</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">]))</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">AddObject</span><span class="p">(</span><span class="nc">MassPoint</span><span class="p">(</span><span class="n">nodeNumber</span> <span class="o">=</span> <span class="n">node</span><span class="p">,</span> <span class="n">physicsMass</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>

<span class="n">sNode</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">AddSensor</span><span class="p">(</span><span class="nc">SensorNode</span><span class="p">(</span><span class="n">nodeNumber</span><span class="o">=</span><span class="n">node</span><span class="p">,</span> <span class="n">fileName</span><span class="o">=</span><span class="s1">&#39;solution/sensorTest.txt&#39;</span><span class="p">,</span>
                      <span class="n">outputVariableType</span><span class="o">=</span><span class="n">exu</span><span class="o">.</span><span class="nc">OutputVariableType</span><span class="o">.</span><span class="n">Position</span><span class="p">))</span>

<span class="c1">#user function for sensor, convert position into angle:</span>
<span class="k">def</span> <span class="nf">UFsensor</span><span class="p">(</span><span class="n">mbs</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">sensorNumbers</span><span class="p">,</span> <span class="n">factors</span><span class="p">,</span> <span class="n">configuration</span><span class="p">):</span>
    <span class="n">val</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">GetSensorValues</span><span class="p">(</span><span class="n">sensorNumbers</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="c1">#x,y,z</span>
    <span class="n">phi</span> <span class="o">=</span> <span class="n">atan2</span><span class="p">(</span><span class="n">val</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">val</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="c1">#compute angle from x,y: atan2(y,x)</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">factors</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">phi</span><span class="p">]</span> <span class="c1">#return angle in degree</span>

<span class="n">sUser</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">AddSensor</span><span class="p">(</span><span class="nc">SensorUserFunction</span><span class="p">(</span><span class="n">sensorNumbers</span><span class="o">=</span><span class="p">[</span><span class="n">sNode</span><span class="p">],</span> <span class="n">factors</span><span class="o">=</span><span class="p">[</span><span class="mi">180</span><span class="o">/</span><span class="n">pi</span><span class="p">],</span>
                                 <span class="n">fileName</span><span class="o">=</span><span class="s1">&#39;solution/sensorTest2.txt&#39;</span><span class="p">,</span>
                                 <span class="n">sensorUserFunction</span><span class="o">=</span><span class="n">UFsensor</span><span class="p">))</span>

<span class="c1">#assemble and solve system for default parameters</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">Assemble</span><span class="p">()</span>
<span class="n">exu</span><span class="o">.</span><span class="nf">SolveDynamic</span><span class="p">(</span><span class="n">mbs</span><span class="p">)</span>

<span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">exudyn.plot</span> <span class="kn">import</span> <span class="nf">PlotSensor</span>
    <span class="nf">PlotSensor</span><span class="p">(</span><span class="n">mbs</span><span class="p">,</span> <span class="p">[</span><span class="n">sNode</span><span class="p">,</span> <span class="n">sNode</span><span class="p">,</span> <span class="n">sUser</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
<p><strong>The web version may not be complete. For details, always consider the Exudyn PDF documentation</strong> : <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/docs/theDoc/theDoc.pdf">theDoc.pdf</a></p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="SensorLoad.html" class="btn btn-neutral float-left" title="SensorLoad" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../structures/StructuresAndSettingsIndex.html" class="btn btn-neutral float-right" title="Structures and Settings" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>