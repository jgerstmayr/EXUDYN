

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ObjectConnectorRigidBodySpringDamper &mdash; Exudyn1.9.83.dev1 1.9.83.dev1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=3ee1c6c6" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/rtd_sphinx_search.min.css" />
      <link rel="stylesheet" type="text/css" href="../../../_static/custom.css?v=e11081fd" />

  
      <script src="../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../_static/documentation_options.js?v=86202e69"></script>
      <script src="../../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../../../_static/copybutton.js?v=f281be69"></script>
      <script src="../../../_static/js/rtd_search_config.js"></script>
      <script src="../../../_static/js/rtd_sphinx_search.min.js"></script>
      <script>window.MathJax = {"loader": {"load": ["[tex]/mathtools"]}, "tex": {"packages": {"[+]": ["mathtools"]}, "macros": {"vspace": ["{}", 1], "ra": "{\\rightarrow}", "Rcal": "{\\mathbb{R}}", "Ccal": "{\\mathbb{C}}", "Ncal": "{\\mathbb{N}}", "Rot": "{\\mathbf{A}}", "dd": "{\\mathrm{d}}", "ps": "{p_\\mathrm{s}}", "co": "{\\mathrm{c}}", "si": "{\\mathrm{s}}", "tp": "{^\\mathrm{T}}", "diag": "{\\mathrm{diag}}", "vec": "{\\mathrm{vec}}", "Null": "{\\mathbf{0}}", "varepsilonDot": "{\\boldsymbol{\\varepsilon}}", "talpha": "{\\boldsymbol{\\alpha}}", "tbeta": "{\\boldsymbol{\\beta}}", "tgamma": "{\\boldsymbol{\\gamma}}", "tchi": "{\\boldsymbol{\\chi}}", "tdelta": "{\\boldsymbol{\\delta}}", "teps": "{\\boldsymbol{\\varepsilon}}", "tepsDot": "{\\boldsymbol{\\dot \\varepsilon}}", "teta": "{\\boldsymbol{\\eta}}", "tkappa": "{\\boldsymbol{\\kappa}}", "tkappaDot": "{\\boldsymbol{\\dot \\kappa}}", "tphi": "{\\boldsymbol{\\phi}}", "boldVarPhi": "{\\boldsymbol{\\varphi}}", "tPhi": "{\\boldsymbol{\\Phi}}", "ttheta": "{\\boldsymbol{\\theta}}", "tTheta": "{\\boldsymbol{\\Theta}}", "tlambda": "{\\boldsymbol{\\lambda}}", "tnu": "{\\boldsymbol{\\nu}}", "tmu": "{\\boldsymbol{\\mu}}", "tpsi": "{\\boldsymbol{\\psi}}", "tPsi": "{\\boldsymbol{\\Psi}}", "ttau": "{\\boldsymbol{\\tau}}", "tsigma": "{\\boldsymbol{\\sigma}}", "txi": "{\\boldsymbol{\\xi}}", "tzeta": "{\\boldsymbol{\\zeta}}", "tomega": "{\\boldsymbol{\\omega}}", "tOmega": "{\\boldsymbol{\\Omega}}", "vareps": "{\\varepsilon}", "myoverline": ["\\overline{#1}", 1], "pluseq": "\\mathrel{+}=", "LU": ["{\\prescript{#1}{}{#2}\\,}", 2], "LUX": ["{\\prescript{#1}{}{#2}#3\\,}", 3], "LUR": ["{\\prescript{#1}{}{#2}_{#3}\\,}", 3], "LURU": ["{\\prescript{#1}{}{#2}_{#3}^{#4}\\,}", 4], "LLdot": ["{\\prescript{}{#1}{\\dot{#2}}_{#3}\\,}", 3], "vr": ["{\\left[ \\begin{array}{c} { #1}\\vspace{0.04cm} \\\\ { #2}\\vspace{0.04cm} \\\\ { #3} \\end{array} \\right]}", 3], "mr": ["{\\left[ \\begin{array}{ccc} #1 & #2 & #3 \\vspace{0.04cm}\\\\ #4 & #5 & #6 \\vspace{0.04cm}\\\\ #7 & #8 & #9  \\end{array} \\right]}", 9], "vp": ["{\\left[ \\begin{array}{c} { #1} \\vspace{0.04cm}\\\\ { #2} \\end{array} \\right]}", 2], "mp": ["{\\left[ \\begin{array}{cc} #1 & #2 \\vspace{0.04cm}\\\\ #3 & #4 \\end{array} \\right]}", 4], "mfour": ["{\\left[ \\begin{array}{cccc} { #1} \\\\ { #2} \\\\ { #3} \\\\ { #4} \\end{array} \\right]}", 4], "vfour": ["{\\left[ \\begin{array}{c} { #1} \\\\ { #2} \\\\ { #3} \\\\ { #4} \\end{array} \\right]}", 4], "vrRow": ["{[#1,\\, #2,\\, #3]}", 3], "vsix": ["{\\left[ \\begin{array}{c} { #1} \\\\ { #2} \\\\ { #3} \\\\ { #4} \\\\ { #5} \\\\ { #6} \\end{array} \\right]}", 6], "vsixb": ["{\\begin{array}{c} { #1} \\\\ { #2} \\\\ { #3} \\\\ { #4} \\\\ { #5} \\\\ { #6} \\end{array} }", 6], "vsixs": ["{ \\begin{array}{c} { #1} \\\\ { #2} \\\\ { #3} \\\\ { #4} \\\\ { #5} \\\\ { #6} \\end{array} }", 6], "SO": "{q}", "FO": "{y}", "AE": "{\\lambda}", "SYS": "{s}", "SON": "{$2^\\mathrm{nd}$ order differential equations}", "FON": "{$1^\\mathrm{st}$ order differential equations}", "AEN": "{algebraic equations}", "SYSN": "{system equations}", "cIni": "{_\\mathrm{ini}}", "cRef": "{_\\mathrm{ref}}", "cCur": "{_\\mathrm{cur}}", "cVis": "{_\\mathrm{vis}}", "cSOS": "{_\\mathrm{start\\;of\\;step}}", "cConfig": "{_\\mathrm{config}}", "pLoc": "{\\mathbf{b}}", "pLocB": "{\\,^{b}{\\mathbf{v}}}", "pRef": "{\\mathbf{r}}", "pRefG": "{\\,^{0}{\\mathbf{r}}}", "indf": "{_\\mathrm{f}}", "indt": "{_\\mathrm{t}}", "indr": "{_\\mathrm{r}}", "indtt": "{_\\mathrm{tt}}", "indrr": "{_\\mathrm{rr}}", "indff": "{_\\mathrm{ff}}", "indtf": "{_\\mathrm{tf}}", "indrf": "{_\\mathrm{rf}}", "indtr": "{_\\mathrm{tr}}", "omegaBDtilde": "{\\LU{b}{\\tilde \\tomega_\\mathrm{bd}}}", "indrigid": "{_\\mathrm{rigid}}", "indred": "{_\\mathrm{red}}", "induser": "{_\\mathrm{user}}", "indu": "{_\\mathrm{u}}", "termA": ["{\\color{blue}{#1}}", 1], "termB": ["{\\color{red}{#1}}", 1], "termC": ["{\\color{green}{#1}}", 1], "acc": "{\\ddot \\mathbf{q}}", "GA": "{G\\alpha}", "aalg": "{\\mathbf{a}}", "vel": "{\\mathbf{v}}"}}}</script>
      <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="ObjectConnectorLinearSpringDamper" href="ObjectConnectorLinearSpringDamper.html" />
    <link rel="prev" title="ObjectConnectorCartesianSpringDamper" href="ObjectConnectorCartesianSpringDamper.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            Exudyn1.9.83.dev1
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Exudyn User Manual</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Exudyn.html">Exudyn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../InstallationAndGettingStartedIndex.html">Installation and Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../OverviewOnExudynIndex.html">Overview on Exudyn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../TutorialIndex.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../GraphicsAndVisualizationIndex.html">Graphics and visualization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../NotationIndex.html">Notation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../TheoryAndFormulationsIndex.html">Theory and formulations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../SolversIndex.html">Solvers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cInterface/CInterfaceIndex.html">Python-C++ command interface</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference Manual</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../pythonUtilities/index.html">Python Utility Functions</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="itemsIndex.html">Items reference manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="nodeIndex.html">Node</a></li>
<li class="toctree-l2"><a class="reference internal" href="objectBodyIndex.html">Object (Body)</a></li>
<li class="toctree-l2"><a class="reference internal" href="objectSuperElementIndex.html">Object (SuperElement)</a></li>
<li class="toctree-l2"><a class="reference internal" href="objectObjectIndex.html">Object (Object)</a></li>
<li class="toctree-l2"><a class="reference internal" href="objectFiniteElementIndex.html">Object (FiniteElement)</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="objectConnectorIndex.html">Object (Connector)</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="ObjectConnectorSpringDamper.html">ObjectConnectorSpringDamper</a></li>
<li class="toctree-l3"><a class="reference internal" href="ObjectConnectorCartesianSpringDamper.html">ObjectConnectorCartesianSpringDamper</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">ObjectConnectorRigidBodySpringDamper</a></li>
<li class="toctree-l3"><a class="reference internal" href="ObjectConnectorLinearSpringDamper.html">ObjectConnectorLinearSpringDamper</a></li>
<li class="toctree-l3"><a class="reference internal" href="ObjectConnectorTorsionalSpringDamper.html">ObjectConnectorTorsionalSpringDamper</a></li>
<li class="toctree-l3"><a class="reference internal" href="ObjectConnectorCoordinateSpringDamper.html">ObjectConnectorCoordinateSpringDamper</a></li>
<li class="toctree-l3"><a class="reference internal" href="ObjectConnectorCoordinateSpringDamperExt.html">ObjectConnectorCoordinateSpringDamperExt</a></li>
<li class="toctree-l3"><a class="reference internal" href="ObjectConnectorGravity.html">ObjectConnectorGravity</a></li>
<li class="toctree-l3"><a class="reference internal" href="ObjectConnectorHydraulicActuatorSimple.html">ObjectConnectorHydraulicActuatorSimple</a></li>
<li class="toctree-l3"><a class="reference internal" href="ObjectConnectorReevingSystemSprings.html">ObjectConnectorReevingSystemSprings</a></li>
<li class="toctree-l3"><a class="reference internal" href="ObjectConnectorRollingDiscPenalty.html">ObjectConnectorRollingDiscPenalty</a></li>
<li class="toctree-l3"><a class="reference internal" href="ObjectContactConvexRoll.html">ObjectContactConvexRoll</a></li>
<li class="toctree-l3"><a class="reference internal" href="ObjectContactCoordinate.html">ObjectContactCoordinate</a></li>
<li class="toctree-l3"><a class="reference internal" href="ObjectContactCircleCable2D.html">ObjectContactCircleCable2D</a></li>
<li class="toctree-l3"><a class="reference internal" href="ObjectContactFrictionCircleCable2D.html">ObjectContactFrictionCircleCable2D</a></li>
<li class="toctree-l3"><a class="reference internal" href="ObjectContactSphereSphere.html">ObjectContactSphereSphere</a></li>
<li class="toctree-l3"><a class="reference internal" href="ObjectContactCurveCircles.html">ObjectContactCurveCircles</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="objectConstraintIndex.html">Object (Constraint)</a></li>
<li class="toctree-l2"><a class="reference internal" href="objectJointIndex.html">Object (Joint)</a></li>
<li class="toctree-l2"><a class="reference internal" href="markerIndex.html">Marker</a></li>
<li class="toctree-l2"><a class="reference internal" href="loadIndex.html">Load</a></li>
<li class="toctree-l2"><a class="reference internal" href="sensorIndex.html">Sensor</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../structures/StructuresAndSettingsIndex.html">Structures and Settings</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Misc</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Abbreviations.html">List of Abbreviations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ExamplesIndex.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../TestModelsIndex.html">TestModels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../trackerlog.html">Issue tracker</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Exudyn1.9.83.dev1</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="itemsIndex.html">Items reference manual</a></li>
          <li class="breadcrumb-item"><a href="objectConnectorIndex.html">Object (Connector)</a></li>
      <li class="breadcrumb-item active">ObjectConnectorRigidBodySpringDamper</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/docs/RST/items/ObjectConnectorRigidBodySpringDamper.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="objectconnectorrigidbodyspringdamper">
<span id="sec-item-objectconnectorrigidbodyspringdamper"></span><h1>ObjectConnectorRigidBodySpringDamper<a class="headerlink" href="#objectconnectorrigidbodyspringdamper" title="Link to this heading"></a></h1>
<p>An 3D spring-damper element acting on relative displacements and relative rotations of two rigid body (position+orientation) markers; connects to (position+orientation)-based markers and represents a penalty-based rigid joint (or prismatic, revolute, etc.)</p>
<p><strong>Additional information for ObjectConnectorRigidBodySpringDamper</strong>:</p>
<ul>
<li><div class="line-block">
<div class="line">This <code class="docutils literal notranslate"><span class="pre">Object</span></code> has/provides the following types = <code class="docutils literal notranslate"><span class="pre">Connector</span></code></div>
</div>
</li>
<li><div class="line-block">
<div class="line">Requested <code class="docutils literal notranslate"><span class="pre">Marker</span></code> type = <code class="docutils literal notranslate"><span class="pre">Position</span></code> + <code class="docutils literal notranslate"><span class="pre">Orientation</span></code></div>
</div>
</li>
<li><div class="line-block">
<div class="line">Requested <code class="docutils literal notranslate"><span class="pre">Node</span></code> type = <code class="docutils literal notranslate"><span class="pre">GenericData</span></code></div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>Short name</strong> for Python = <code class="docutils literal notranslate"><span class="pre">RigidBodySpringDamper</span></code></div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>Short name</strong> for Python visualization object = <code class="docutils literal notranslate"><span class="pre">VRigidBodySpringDamper</span></code></div>
</div>
</li>
</ul>
<p>The item <strong>ObjectConnectorRigidBodySpringDamper</strong> with type = ‘ConnectorRigidBodySpringDamper’ has the following parameters:</p>
<ul>
<li><div class="line-block">
<div class="line"><strong>name</strong> [type = String, default = ‘’]:</div>
<div class="line">connector’s unique name</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>markerNumbers</strong> [type = ArrayMarkerIndex, default = [ invalid [-1], invalid [-1] ]]:</div>
<div class="line">list of markers used in connector</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>nodeNumber</strong> [<span class="math notranslate nohighlight">\(n_d\)</span>, type = NodeIndex, default = invalid (-1)]:</div>
<div class="line">node number of a NodeGenericData (size depends on application) for dataCoordinates for user functions (e.g., implementing contact/friction user function)</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>stiffness</strong> [type = Matrix6D, default = np.zeros((6,6))]:</div>
<div class="line">stiffness [SI:N/m or Nm/rad] of translational, torsional and coupled springs; act against relative displacements in x, y, and z-direction as well as the relative angles (calculated as Euler angles); in the simplest case, the first 3 diagonal values correspond to the local stiffness in x,y,z direction and the last 3 diagonal values correspond to the rotational stiffness around x,y and z axis</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>damping</strong> [type = Matrix6D, default = np.zeros((6,6))]:</div>
<div class="line">damping [SI:N/(m/s) or Nm/(rad/s)] of translational, torsional and coupled dampers; very similar to stiffness, however, the rotational velocity is computed from the angular velocity vector</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>rotationMarker0</strong> [type = Matrix3D, default = [[1,0,0], [0,1,0], [0,0,1]]]:</div>
<div class="line">local rotation matrix for marker 0; stiffness, damping, etc. components are measured in local coordinates relative to rotationMarker0</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>rotationMarker1</strong> [type = Matrix3D, default = [[1,0,0], [0,1,0], [0,0,1]]]:</div>
<div class="line">local rotation matrix for marker 1; stiffness, damping, etc. components are measured in local coordinates relative to rotationMarker1</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>offset</strong> [type = Vector6D, default = [0.,0.,0.,0.,0.,0.]]:</div>
<div class="line">translational and rotational offset considered in the spring force calculation</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>intrinsicFormulation</strong> [type = Bool, default = False]:</div>
<div class="line">if True, the joint uses the intrinsic formulation, which is independent on order of markers, using a mid-point and mid-rotation for evaluation and application of connector forces and torques; this uses a Lie group formulation; in this case, the force/torque vector is computed from the stiffness matrix times the 6-vector of the SE3 matrix logarithm between the two marker positions/rotations, see the equations</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>activeConnector</strong> [type = Bool, default = True]:</div>
<div class="line">flag, which determines, if the connector is active; used to deactivate (temporarily) a connector or constraint</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>springForceTorqueUserFunction</strong> [<span class="math notranslate nohighlight">\(\mathrm{UF} \in \Rcal^6\)</span>, type = PyFunctionVector6DmbsScalarIndex4Vector3D2Matrix6D2Matrix3DVector6D, default =  0]:</div>
<div class="line">A Python function which computes the 6D force-torque vector (3D force + 3D torque) between the two rigid body markers, if activeConnector=True; see description below</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>postNewtonStepUserFunction</strong> [<span class="math notranslate nohighlight">\(\mathrm{UF}_{PN} \in \Rcal\)</span>, type = PyFunctionVectorMbsScalarIndex4VectorVector3D2Matrix6D2Matrix3DVector6D, default =  0]:</div>
<div class="line">A Python function which computes the error of the PostNewtonStep; see description below</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>visualization</strong> [type = VObjectConnectorRigidBodySpringDamper]:</div>
<div class="line">parameters for visualization of item</div>
</div>
</li>
</ul>
<p>The item VObjectConnectorRigidBodySpringDamper has the following parameters:</p>
<ul>
<li><div class="line-block">
<div class="line"><strong>show</strong> [type = Bool, default = True]:</div>
<div class="line">set true, if item is shown in visualization and false if it is not shown</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>drawSize</strong> [type = float, default = -1.]:</div>
<div class="line">drawing size = diameter of spring; size == -1.f means that default connector size is used</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>color</strong> [type = Float4, default = [-1.,-1.,-1.,-1.]]:</div>
<div class="line">RGBA connector color; if R==-1, use default color</div>
</div>
</li>
</ul>
<hr class="docutils" />
<section id="description-of-objectconnectorrigidbodyspringdamper">
<span id="description-objectconnectorrigidbodyspringdamper"></span><h2>DESCRIPTION of ObjectConnectorRigidBodySpringDamper<a class="headerlink" href="#description-of-objectconnectorrigidbodyspringdamper" title="Link to this heading"></a></h2>
<p><strong>The following output variables are available as OutputVariableType in sensors, Get…Output() and other functions</strong>:</p>
<ul>
<li><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">DisplacementLocal</span></code>: <span class="math notranslate nohighlight">\(\LU{J0}{\Delta{\mathbf{p}}}\)</span></div>
<div class="line">relative displacement in local joint0 coordinates</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">VelocityLocal</span></code>: <span class="math notranslate nohighlight">\(\LU{J0}{\Delta{\mathbf{v}}}\)</span></div>
<div class="line">relative translational velocity in local joint0 coordinates</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">Rotation</span></code>: <span class="math notranslate nohighlight">\(\LU{J0}{\ttheta}= [\theta_0,\theta_1,\theta_2]\tp\)</span></div>
<div class="line">relative rotation parameters (Tait Bryan Rxyz); these are the angles used for calculation of joint torques (e.g. if cX is the diagonal rotational stiffness, the moment for axis X reads mX=cX*phiX, etc.)</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">AngularVelocityLocal</span></code>: <span class="math notranslate nohighlight">\(\LU{J0}{\Delta\tomega}\)</span></div>
<div class="line">relative angular velocity in local joint0 coordinates</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">ForceLocal</span></code>: <span class="math notranslate nohighlight">\(\LU{J0}{{\mathbf{f}}}\)</span></div>
<div class="line">joint force in local joint0 coordinates</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">TorqueLocal</span></code>: <span class="math notranslate nohighlight">\(\LU{J0}{{\mathbf{m}}}\)</span></div>
<div class="line">joint torque in in local joint0 coordinates</div>
</div>
</li>
</ul>
</section>
<section id="definition-of-quantities">
<h2>Definition of quantities<a class="headerlink" href="#definition-of-quantities" title="Link to this heading"></a></h2>
<table class="docutils align-default" id="id1">
<caption><span class="caption-text"></span><a class="headerlink" href="#id1" title="Link to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><div class="line-block">
<div class="line">input parameter</div>
</div>
</th>
<th class="head"><div class="line-block">
<div class="line">symbol</div>
</div>
</th>
<th class="head"><div class="line-block">
<div class="line">description</div>
</div>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">stiffness</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><span class="math notranslate nohighlight">\({\mathbf{k}} \in \mathbb{R}^{6\times 6}\)</span></div>
</div>
</td>
<td><div class="line-block">
<div class="line">stiffness in <span class="math notranslate nohighlight">\(J0\)</span> coordinates</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">damping</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><span class="math notranslate nohighlight">\({\mathbf{d}} \in \mathbb{R}^{6\times 6}\)</span></div>
</div>
</td>
<td><div class="line-block">
<div class="line">damping in <span class="math notranslate nohighlight">\(J0\)</span> coordinates</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">offset</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><span class="math notranslate nohighlight">\(\LUR{J0}{{\mathbf{v}}}{\mathrm{off}} \in \mathbb{R}^{6}\)</span></div>
</div>
</td>
<td><div class="line-block">
<div class="line">offset in <span class="math notranslate nohighlight">\(J0\)</span> coordinates</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">rotationMarker0</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><span class="math notranslate nohighlight">\(\LU{m0,J0}{\Rot}\)</span></div>
</div>
</td>
<td><div class="line-block">
<div class="line">rotation matrix which transforms from joint 0 into marker 0 coordinates</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">rotationMarker1</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><span class="math notranslate nohighlight">\(\LU{m1,J1}{\Rot}\)</span></div>
</div>
</td>
<td><div class="line-block">
<div class="line">rotation matrix which transforms from joint 1 into marker 1 coordinates</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">markerNumbers[0]</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><span class="math notranslate nohighlight">\(m0\)</span></div>
</div>
</td>
<td><div class="line-block">
<div class="line">global marker number m0</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">markerNumbers[1]</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><span class="math notranslate nohighlight">\(m1\)</span></div>
</div>
</td>
<td><div class="line-block">
<div class="line">global marker number m1</div>
</div>
</td>
</tr>
</tbody>
</table>
<table class="docutils align-default" id="id2">
<caption><span class="caption-text"></span><a class="headerlink" href="#id2" title="Link to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><div class="line-block">
<div class="line">intermediate variables</div>
</div>
</th>
<th class="head"><div class="line-block">
<div class="line">symbol</div>
</div>
</th>
<th class="head"><div class="line-block">
<div class="line">description</div>
</div>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">marker m0 position</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><span class="math notranslate nohighlight">\(\LU{0}{{\mathbf{p}}}_{m0}\)</span></div>
</div>
</td>
<td><div class="line-block">
<div class="line">current global position which is provided by marker m0</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">marker m0 orientation</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><span class="math notranslate nohighlight">\(\LU{0,m0}{\Rot}\)</span></div>
</div>
</td>
<td><div class="line-block">
<div class="line">current rotation matrix provided by marker m0</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">marker m1 position</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><span class="math notranslate nohighlight">\(\LU{0}{{\mathbf{p}}}_{m1}\)</span></div>
</div>
</td>
<td><div class="line-block">
<div class="line">accordingly</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">marker m1 orientation</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><span class="math notranslate nohighlight">\(\LU{0,m1}{\Rot}\)</span></div>
</div>
</td>
<td><div class="line-block">
<div class="line">current rotation matrix provided by marker m1</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">marker m0 velocity</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><span class="math notranslate nohighlight">\(\LU{0}{{\mathbf{v}}}_{m0}\)</span></div>
</div>
</td>
<td><div class="line-block">
<div class="line">current global velocity which is provided by marker m0</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">marker m1 velocity</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><span class="math notranslate nohighlight">\(\LU{0}{{\mathbf{v}}}_{m1}\)</span></div>
</div>
</td>
<td><div class="line-block">
<div class="line">accordingly</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">marker m0 velocity</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><span class="math notranslate nohighlight">\(\LU{m0}{\tomega}_{m0}\)</span></div>
</div>
</td>
<td><div class="line-block">
<div class="line">current local angular velocity vector provided by marker m0</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">marker m1 velocity</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><span class="math notranslate nohighlight">\(\LU{m1}{\tomega}_{m1}\)</span></div>
</div>
</td>
<td><div class="line-block">
<div class="line">current local angular velocity vector provided by marker m1</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">Displacement</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><span class="math notranslate nohighlight">\(\LU{0}{\Delta{\mathbf{p}}}\)</span></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><span class="math notranslate nohighlight">\(\LU{0}{{\mathbf{p}}}_{m1} - \LU{0}{{\mathbf{p}}}_{m0}\)</span></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">Velocity</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><span class="math notranslate nohighlight">\(\LU{0}{\Delta{\mathbf{v}}}\)</span></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><span class="math notranslate nohighlight">\(\LU{0}{{\mathbf{v}}}_{m1} - \LU{0}{{\mathbf{v}}}_{m0}\)</span></div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">DisplacementLocal</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><span class="math notranslate nohighlight">\(\LU{J0}{\Delta{\mathbf{p}}}\)</span></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><span class="math notranslate nohighlight">\(\left(\LU{0,m0}{\Rot}\LU{m0,J0}{\Rot}\right)\tp \LU{0}{\Delta{\mathbf{p}}}\)</span></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">VelocityLocal</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><span class="math notranslate nohighlight">\(\LU{J0}{\Delta{\mathbf{v}}}\)</span></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><span class="math notranslate nohighlight">\(\left(\LU{0,m0}{\Rot}\LU{m0,J0}{\Rot}\right)\tp \LU{0}{\Delta{\mathbf{v}}}\)</span></div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">AngularVelocityLocal</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><span class="math notranslate nohighlight">\(\LU{J0}{\Delta\tomega}\)</span></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><span class="math notranslate nohighlight">\(\left(\LU{0,m0}{\Rot}\LU{m0,J0}{\Rot}\right)\tp \left( \LU{0,m1}{\Rot} \LU{m1}{\tomega} - \LU{0,m0}{\Rot} \LU{m0}{\tomega} \right)\)</span></div>
</div>
</td>
</tr>
</tbody>
</table>
</section>
<section id="connector-forces">
<h2>Connector forces<a class="headerlink" href="#connector-forces" title="Link to this heading"></a></h2>
<p>If <code class="docutils literal notranslate"><span class="pre">activeConnector</span> <span class="pre">=</span> <span class="pre">True</span></code>, the vector spring force is computed as</p>
<div class="math notranslate nohighlight">
\[\vp{\LU{J0}{{\mathbf{f}}_{SD}}}{\LU{J0}{{\mathbf{m}}_{SD}}} = {\mathbf{k}} \left( \vp{\LU{J0}{\Delta{\mathbf{p}}}}{\LU{J0}{\ttheta}} - \LUR{J0}{{\mathbf{v}}}{\mathrm{off}}\right) + {\mathbf{d}} \vp{\LU{J0}{\Delta{\mathbf{v}}}}{\LU{J0}{\Delta\omega}}\]</div>
<p>For the application of joint forces to markers, <span class="math notranslate nohighlight">\([\LU{J0}{{\mathbf{f}}_{SD}},\,\LU{J0}{{\mathbf{m}}_{SD}}]\tp\)</span> is transformed into global coordinates.
if <code class="docutils literal notranslate"><span class="pre">activeConnector</span> <span class="pre">=</span> <span class="pre">False</span></code>, <span class="math notranslate nohighlight">\(\LU{J0}{{\mathbf{f}}_{SD}}\)</span> and  <span class="math notranslate nohighlight">\(\LU{J0}{{\mathbf{m}}_{SD}}\)</span> are set to zero.</p>
<p>If the springForceTorqueUserFunction <span class="math notranslate nohighlight">\(\mathrm{UF}\)</span> is defined and <code class="docutils literal notranslate"><span class="pre">activeConnector</span> <span class="pre">=</span> <span class="pre">True</span></code>,
<span class="math notranslate nohighlight">\({\mathbf{f}}_{SD}\)</span> instead becomes (<span class="math notranslate nohighlight">\(t\)</span> is current time)</p>
<div class="math notranslate nohighlight">
\[{\mathbf{f}}_{SD} = \mathrm{UF}(mbs, t, i_N, \LU{J0}{\Delta{\mathbf{p}}}, \LU{J0}{\ttheta}, \LU{J0}{\Delta{\mathbf{v}}}, \LU{J0}{\Delta\tomega}, \mathrm{stiffness}, \mathrm{damping}, \mathrm{rotationMarker0}, \mathrm{rotationMarker1}, \mathrm{offset})\]</div>
<p>and <code class="docutils literal notranslate"><span class="pre">iN</span></code> represents the itemNumber (=objectNumber).</p>
<hr class="docutils" />
<p><strong>Userfunction</strong>: <code class="docutils literal notranslate"><span class="pre">springForceTorqueUserFunction(mbs,</span> <span class="pre">t,</span> <span class="pre">itemNumber,</span> <span class="pre">displacement,</span> <span class="pre">rotation,</span> <span class="pre">velocity,</span> <span class="pre">angularVelocity,</span> <span class="pre">stiffness,</span> <span class="pre">damping,</span> <span class="pre">rotJ0,</span> <span class="pre">rotJ1,</span> <span class="pre">offset)</span></code></p>
<p>A user function, which computes the 6D spring-damper force-torque vector depending on mbs, time, local quantities
(displacement, rotation, velocity, angularVelocity, stiffness), which are evaluated at current time, which are relative quantities between
both markers and which are defined in joint J0 coordinates.
As relative rotations are defined by Tait-Bryan rotation parameters, it is recommended to use this connector for small relative rotations only
(except for rotations about one axis).
Furthermore, the user function contains object parameters (stiffness, damping, rotationMarker0/1, offset).
Note that itemNumber represents the index of the object in mbs, which can be used to retrieve additional data from the object through
<code class="docutils literal notranslate"><span class="pre">mbs.GetObjectParameter(itemNumber,</span> <span class="pre">...)</span></code>, see the according description of <code class="docutils literal notranslate"><span class="pre">GetObjectParameter</span></code>.</p>
<p>Detailed description of the arguments and local quantities:</p>
<table class="docutils align-default" id="id3">
<caption><span class="caption-text"></span><a class="headerlink" href="#id3" title="Link to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><div class="line-block">
<div class="line">arguments / return</div>
</div>
</th>
<th class="head"><div class="line-block">
<div class="line">type or size</div>
</div>
</th>
<th class="head"><div class="line-block">
<div class="line">description</div>
</div>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">mbs</span></code></div>
</div>
</td>
<td><div class="line-block">
<div class="line">MainSystem</div>
</div>
</td>
<td><div class="line-block">
<div class="line">provides MainSystem mbs in which underlying item is defined</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">t</span></code></div>
</div>
</td>
<td><div class="line-block">
<div class="line">Real</div>
</div>
</td>
<td><div class="line-block">
<div class="line">current time in mbs</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">itemNumber</span></code></div>
</div>
</td>
<td><div class="line-block">
<div class="line">Index</div>
</div>
</td>
<td><div class="line-block">
<div class="line">integer number <span class="math notranslate nohighlight">\(i_N\)</span> of the object in mbs, allowing easy access to all object data via mbs.GetObjectParameter(itemNumber, …)</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">displacement</span></code></div>
</div>
</td>
<td><div class="line-block">
<div class="line">Vector3D</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><span class="math notranslate nohighlight">\(\LU{J0}{\Delta{\mathbf{p}}}\)</span></div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">rotation</span></code></div>
</div>
</td>
<td><div class="line-block">
<div class="line">Vector3D</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><span class="math notranslate nohighlight">\(\LU{J0}{\ttheta}\)</span></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">velocity</span></code></div>
</div>
</td>
<td><div class="line-block">
<div class="line">Vector3D</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><span class="math notranslate nohighlight">\(\LU{J0}{\Delta{\mathbf{v}}}\)</span></div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">angularVelocity</span></code></div>
</div>
</td>
<td><div class="line-block">
<div class="line">Vector3D</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><span class="math notranslate nohighlight">\(\LU{J0}{\Delta\tomega}\)</span></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">stiffness</span></code></div>
</div>
</td>
<td><div class="line-block">
<div class="line">Vector6D</div>
</div>
</td>
<td><div class="line-block">
<div class="line">copied from object</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">damping</span></code></div>
</div>
</td>
<td><div class="line-block">
<div class="line">Vector6D</div>
</div>
</td>
<td><div class="line-block">
<div class="line">copied from object</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">rotJ0</span></code></div>
</div>
</td>
<td><div class="line-block">
<div class="line">Matrix3D</div>
</div>
</td>
<td><div class="line-block">
<div class="line">rotationMarker0 copied from object</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">rotJ1</span></code></div>
</div>
</td>
<td><div class="line-block">
<div class="line">Matrix3D</div>
</div>
</td>
<td><div class="line-block">
<div class="line">rotationMarker1 copied from object</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">offset</span></code></div>
</div>
</td>
<td><div class="line-block">
<div class="line">Vector6D</div>
</div>
</td>
<td><div class="line-block">
<div class="line">copied from object</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">returnValue</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Vector6D</div>
</div>
</td>
<td><div class="line-block">
<div class="line">list or numpy array of computed spring force-torque</div>
</div>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<p><strong>Userfunction</strong>: <code class="docutils literal notranslate"><span class="pre">postNewtonStepUserFunction(mbs,</span> <span class="pre">t,</span> <span class="pre">Index</span> <span class="pre">itemIndex,</span> <span class="pre">dataCoordinates,</span> <span class="pre">displacement,</span> <span class="pre">rotation,</span> <span class="pre">velocity,</span> <span class="pre">angularVelocity,</span> <span class="pre">stiffness,</span> <span class="pre">damping,</span> <span class="pre">rotJ0,</span> <span class="pre">rotJ1,</span> <span class="pre">offset)</span></code></p>
<p>A user function which computes the error of the PostNewtonStep <span class="math notranslate nohighlight">\(\varepsilon_{PN}\)</span>, a recommended for stepsize reduction <span class="math notranslate nohighlight">\(t_{recom}\)</span> (use values &gt; 0 to recommend step size or values &lt; 0 else; 0 gives minimum step size)
and the updated dataCoordinates <span class="math notranslate nohighlight">\({\mathbf{d}}^k\)</span> of <code class="docutils literal notranslate"><span class="pre">NodeGenericData</span></code> <span class="math notranslate nohighlight">\(n_d\)</span>.
Except from <code class="docutils literal notranslate"><span class="pre">dataCoordinates</span></code>, the arguments are the same as in <code class="docutils literal notranslate"><span class="pre">springForceTorqueUserFunction</span></code>.
The <code class="docutils literal notranslate"><span class="pre">postNewtonStepUserFunction</span></code> should be used together with the dataCoordinates in order to implement a active set or switching strategy
for discontinuous events, such as in contact, friction, plasticity, fracture or similar.</p>
<p>Detailed description of the arguments and local quantities:</p>
<table class="docutils align-default" id="id4">
<caption><span class="caption-text"></span><a class="headerlink" href="#id4" title="Link to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><div class="line-block">
<div class="line">arguments / return</div>
</div>
</th>
<th class="head"><div class="line-block">
<div class="line">type or size</div>
</div>
</th>
<th class="head"><div class="line-block">
<div class="line">description</div>
</div>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">mbs</span></code></div>
</div>
</td>
<td><div class="line-block">
<div class="line">MainSystem</div>
</div>
</td>
<td><div class="line-block">
<div class="line">provides MainSystem mbs in which underlying item is defined</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">t</span></code></div>
</div>
</td>
<td><div class="line-block">
<div class="line">Real</div>
</div>
</td>
<td><div class="line-block">
<div class="line">current time in mbs</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">itemNumber</span></code></div>
</div>
</td>
<td><div class="line-block">
<div class="line">Index</div>
</div>
</td>
<td><div class="line-block">
<div class="line">integer number of the object in mbs, allowing easy access to all object data via mbs.GetObjectParameter(itemNumber, …)</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">dataCoordinates</span></code></div>
</div>
</td>
<td><div class="line-block">
<div class="line">Vector</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><span class="math notranslate nohighlight">\({\mathbf{d}}^{k-1} = [d_0^{k-1},\; d_1^{k-1},\; \ldots]\)</span> for previous post Newton step <span class="math notranslate nohighlight">\(k-1\)</span></div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">…</div>
</div>
</td>
<td><div class="line-block">
<div class="line">…</div>
</div>
</td>
<td><div class="line-block">
<div class="line">other arguements see <code class="docutils literal notranslate"><span class="pre">springForceTorqueUserFunction</span></code></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">returnValue</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Vector</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><span class="math notranslate nohighlight">\(\left[\varepsilon_{PN},\; t_{recom},\; d_0^{k},\; d_1^{k}, ...\right]\)</span> where <span class="math notranslate nohighlight">\(k\)</span> indicates the current step</div>
</div>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<p><strong>User function example</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#define simple force for spring-damper:</span>
<span class="k">def</span><span class="w"> </span><span class="nf">UFforce</span><span class="p">(</span><span class="n">mbs</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">itemNumber</span><span class="p">,</span> <span class="n">displacement</span><span class="p">,</span> <span class="n">rotation</span><span class="p">,</span> <span class="n">velocity</span><span class="p">,</span> <span class="n">angularVelocity</span><span class="p">,</span>
            <span class="n">stiffness</span><span class="p">,</span> <span class="n">damping</span><span class="p">,</span> <span class="n">rotJ0</span><span class="p">,</span> <span class="n">rotJ1</span><span class="p">,</span> <span class="n">offset</span><span class="p">):</span>
    <span class="n">k</span> <span class="o">=</span> <span class="n">stiffness</span> <span class="c1">#passed as list</span>
    <span class="n">u</span> <span class="o">=</span> <span class="n">displacement</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">u</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">k</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span><span class="n">u</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="n">k</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span><span class="n">u</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">*</span><span class="n">k</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">2</span><span class="p">],</span> <span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>

<span class="c1">#markerNumbers and parameters taken from mini example</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">AddObject</span><span class="p">(</span><span class="nc">RigidBodySpringDamper</span><span class="p">(</span><span class="n">markerNumbers</span> <span class="o">=</span> <span class="p">[</span><span class="n">mGround</span><span class="p">,</span> <span class="n">mBody</span><span class="p">],</span>
                                    <span class="n">stiffness</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">diag</span><span class="p">([</span><span class="n">k</span><span class="p">,</span><span class="n">k</span><span class="p">,</span><span class="n">k</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]),</span>
                                    <span class="n">damping</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">diag</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="n">k</span><span class="o">*</span><span class="mf">0.01</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]),</span>
                                    <span class="n">offset</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
                                    <span class="n">springForceTorqueUserFunction</span> <span class="o">=</span> <span class="nf">UFforce</span><span class="p">))</span>
</pre></div>
</div>
</section>
<section id="mini-example-for-objectconnectorrigidbodyspringdamper">
<span id="miniexample-objectconnectorrigidbodyspringdamper"></span><h2>MINI EXAMPLE for ObjectConnectorRigidBodySpringDamper<a class="headerlink" href="#mini-example-for-objectconnectorrigidbodyspringdamper" title="Link to this heading"></a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1">#example with rigid body at [0,0,0], 1kg under initial velocity</span>
<span class="linenos"> 2</span><span class="n">k</span><span class="o">=</span><span class="mi">500</span>
<span class="linenos"> 3</span><span class="n">nBody</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">AddNode</span><span class="p">(</span><span class="nc">RigidRxyz</span><span class="p">(</span><span class="n">initialVelocities</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mf">1e3</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]))</span>
<span class="linenos"> 4</span><span class="n">oBody</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">AddObject</span><span class="p">(</span><span class="nc">RigidBody</span><span class="p">(</span><span class="n">physicsMass</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">physicsInertia</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
<span class="linenos"> 5</span>                                <span class="n">nodeNumber</span><span class="o">=</span><span class="n">nBody</span><span class="p">))</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="n">mBody</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">AddMarker</span><span class="p">(</span><span class="nc">MarkerNodeRigid</span><span class="p">(</span><span class="n">nodeNumber</span><span class="o">=</span><span class="n">nBody</span><span class="p">))</span>
<span class="linenos"> 8</span><span class="n">mGround</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">AddMarker</span><span class="p">(</span><span class="nc">MarkerBodyRigid</span><span class="p">(</span><span class="n">bodyNumber</span><span class="o">=</span><span class="n">oGround</span><span class="p">,</span>
<span class="linenos"> 9</span>                                        <span class="n">localPosition</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]))</span>
<span class="linenos">10</span><span class="n">mbs</span><span class="o">.</span><span class="nf">AddObject</span><span class="p">(</span><span class="nc">RigidBodySpringDamper</span><span class="p">(</span><span class="n">markerNumbers</span> <span class="o">=</span> <span class="p">[</span><span class="n">mGround</span><span class="p">,</span> <span class="n">mBody</span><span class="p">],</span>
<span class="linenos">11</span>                                    <span class="n">stiffness</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">diag</span><span class="p">([</span><span class="n">k</span><span class="p">,</span><span class="n">k</span><span class="p">,</span><span class="n">k</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]),</span>
<span class="linenos">12</span>                                    <span class="n">damping</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">diag</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="n">k</span><span class="o">*</span><span class="mf">0.01</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]),</span>
<span class="linenos">13</span>                                    <span class="n">offset</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]))</span>
<span class="linenos">14</span>
<span class="linenos">15</span><span class="c1">#assemble and solve system for default parameters</span>
<span class="linenos">16</span><span class="n">mbs</span><span class="o">.</span><span class="nf">Assemble</span><span class="p">()</span>
<span class="linenos">17</span><span class="n">mbs</span><span class="o">.</span><span class="nf">SolveDynamic</span><span class="p">(</span><span class="n">exu</span><span class="o">.</span><span class="nc">SimulationSettings</span><span class="p">())</span>
<span class="linenos">18</span>
<span class="linenos">19</span><span class="c1">#check result at default integration time</span>
<span class="linenos">20</span><span class="n">exudynTestGlobals</span><span class="o">.</span><span class="n">testResult</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">GetNodeOutput</span><span class="p">(</span><span class="n">nBody</span><span class="p">,</span> <span class="n">exu</span><span class="o">.</span><span class="nc">OutputVariableType</span><span class="o">.</span><span class="n">Displacement</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
<p>Relevant Examples and TestModels with weblink:</p>
<blockquote>
<div><p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/ROSMassPoint.py">ROSMassPoint.py</a> (Examples/), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/ROSMobileManipulator.py">ROSMobileManipulator.py</a> (Examples/), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/stiffFlyballGovernor2.py">stiffFlyballGovernor2.py</a> (Examples/), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/bricardMechanism.py">bricardMechanism.py</a> (TestModels/), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/rigidBodySpringDamperIntrinsic.py">rigidBodySpringDamperIntrinsic.py</a> (TestModels/), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/connectorRigidBodySpringDamperTest.py">connectorRigidBodySpringDamperTest.py</a> (TestModels/), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/rotatingTableTest.py">rotatingTableTest.py</a> (TestModels/), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/stiffFlyballGovernor.py">stiffFlyballGovernor.py</a> (TestModels/), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/superElementRigidJointTest.py">superElementRigidJointTest.py</a> (TestModels/)</p>
</div></blockquote>
<p><strong>The web version may not be complete. For details, consider also the Exudyn PDF documentation</strong> : <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/docs/theDoc/theDoc.pdf">theDoc.pdf</a></p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="ObjectConnectorCartesianSpringDamper.html" class="btn btn-neutral float-left" title="ObjectConnectorCartesianSpringDamper" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="ObjectConnectorLinearSpringDamper.html" class="btn btn-neutral float-right" title="ObjectConnectorLinearSpringDamper" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>