<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Module: FEM &mdash; Exudyn1.7.116.dev1 1.7.116.dev1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=82a976d7" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/rtd_sphinx_search.min.css" />
      <link rel="stylesheet" type="text/css" href="../../../_static/custom.css?v=e11081fd" />

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../_static/documentation_options.js?v=8142d844"></script>
        <script src="../../../_static/doctools.js?v=888ff710"></script>
        <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../../_static/copybutton.js?v=f281be69"></script>
        <script src="../../../_static/js/rtd_search_config.js"></script>
        <script src="../../../_static/js/rtd_sphinx_search.min.js"></script>
        <script>window.MathJax = {"loader": {"load": ["[tex]/mathtools"]}, "tex": {"packages": {"[+]": ["mathtools"]}, "macros": {"vspace": ["{}", 1], "ra": "{\\rightarrow}", "Rcal": "{\\mathbb{R}}", "Ccal": "{\\mathbb{C}}", "Ncal": "{\\mathbb{N}}", "Rot": "{\\mathbf{A}}", "dd": "{\\mathrm{d}}", "ps": "{p_\\mathrm{s}}", "co": "{\\mathrm{c}}", "si": "{\\mathrm{s}}", "tp": "{^\\mathrm{T}}", "diag": "{\\mathrm{diag}}", "vec": "{\\mathrm{vec}}", "Null": "{\\mathbf{0}}", "varepsilonDot": "{\\boldsymbol{\\varepsilon}}", "talpha": "{\\boldsymbol{\\alpha}}", "tbeta": "{\\boldsymbol{\\beta}}", "tgamma": "{\\boldsymbol{\\gamma}}", "tchi": "{\\boldsymbol{\\chi}}", "tdelta": "{\\boldsymbol{\\delta}}", "teps": "{\\boldsymbol{\\varepsilon}}", "tepsDot": "{\\boldsymbol{\\dot \\varepsilon}}", "teta": "{\\boldsymbol{\\eta}}", "tkappa": "{\\boldsymbol{\\kappa}}", "tkappaDot": "{\\boldsymbol{\\dot \\kappa}}", "tphi": "{\\boldsymbol{\\phi}}", "tPhi": "{\\boldsymbol{\\Phi}}", "ttheta": "{\\boldsymbol{\\theta}}", "tTheta": "{\\boldsymbol{\\Theta}}", "tlambda": "{\\boldsymbol{\\lambda}}", "tnu": "{\\boldsymbol{\\nu}}", "tmu": "{\\boldsymbol{\\mu}}", "tpsi": "{\\boldsymbol{\\psi}}", "tPsi": "{\\boldsymbol{\\Psi}}", "ttau": "{\\boldsymbol{\\tau}}", "tsigma": "{\\boldsymbol{\\sigma}}", "txi": "{\\boldsymbol{\\xi}}", "tzeta": "{\\boldsymbol{\\zeta}}", "tomega": "{\\boldsymbol{\\omega}}", "tOmega": "{\\boldsymbol{\\Omega}}", "vareps": "{\\varepsilon}", "myoverline": ["\\overline{#1}", 1], "pluseq": "\\mathrel{+}=", "LU": ["{\\prescript{#1}{}{#2}\\,}", 2], "LUX": ["{\\prescript{#1}{}{#2}#3\\,}", 3], "LUR": ["{\\prescript{#1}{}{#2}_{#3}\\,}", 3], "LURU": ["{\\prescript{#1}{}{#2}_{#3}^{#4}\\,}", 4], "LLdot": ["{\\prescript{}{#1}{\\dot{#2}}_{#3}\\,}", 3], "vr": ["{\\left[ \\begin{array}{c} { #1}\\vspace{0.04cm} \\\\ { #2}\\vspace{0.04cm} \\\\ { #3} \\end{array} \\right]}", 3], "mr": ["{\\left[ \\begin{array}{ccc} #1 & #2 & #3 \\vspace{0.04cm}\\\\ #4 & #5 & #6 \\vspace{0.04cm}\\\\ #7 & #8 & #9  \\end{array} \\right]}", 9], "vp": ["{\\left[ \\begin{array}{c} { #1} \\vspace{0.04cm}\\\\ { #2} \\end{array} \\right]}", 2], "mp": ["{\\left[ \\begin{array}{cc} #1 & #2 \\vspace{0.04cm}\\\\ #3 & #4 \\end{array} \\right]}", 4], "mfour": ["{\\left[ \\begin{array}{cccc} { #1} \\\\ { #2} \\\\ { #3} \\\\ { #4} \\end{array} \\right]}", 4], "vfour": ["{\\left[ \\begin{array}{c} { #1} \\\\ { #2} \\\\ { #3} \\\\ { #4} \\end{array} \\right]}", 4], "vrRow": ["{[#1,\\, #2,\\, #3]}", 3], "vsix": ["{\\left[ \\begin{array}{c} { #1} \\\\ { #2} \\\\ { #3} \\\\ { #4} \\\\ { #5} \\\\ { #6} \\end{array} \\right]}", 6], "vsixb": ["{\\begin{array}{c} { #1} \\\\ { #2} \\\\ { #3} \\\\ { #4} \\\\ { #5} \\\\ { #6} \\end{array} }", 6], "vsixs": ["{ \\begin{array}{c} { #1} \\\\ { #2} \\\\ { #3} \\\\ { #4} \\\\ { #5} \\\\ { #6} \\end{array} }", 6], "SO": "{q}", "FO": "{y}", "AE": "{\\lambda}", "SYS": "{s}", "SON": "{$2^\\mathrm{nd}$ order differential equations}", "FON": "{$1^\\mathrm{st}$ order differential equations}", "AEN": "{algebraic equations}", "SYSN": "{system equations}", "cIni": "{_\\mathrm{ini}}", "cRef": "{_\\mathrm{ref}}", "cCur": "{_\\mathrm{cur}}", "cVis": "{_\\mathrm{vis}}", "cSOS": "{_\\mathrm{start\\;of\\;step}}", "cConfig": "{_\\mathrm{config}}", "pLoc": "{\\mathbf{b}}", "pLocB": "{\\,^{b}{\\mathbf{v}}}", "pRef": "{\\mathbf{r}}", "pRefG": "{\\,^{0}{\\mathbf{r}}}", "indf": "{_\\mathrm{f}}", "indt": "{_\\mathrm{t}}", "indr": "{_\\mathrm{r}}", "indtt": "{_\\mathrm{tt}}", "indrr": "{_\\mathrm{rr}}", "indff": "{_\\mathrm{ff}}", "indtf": "{_\\mathrm{tf}}", "indrf": "{_\\mathrm{rf}}", "indtr": "{_\\mathrm{tr}}", "omegaBDtilde": "{\\LU{b}{\\tilde \\tomega_\\mathrm{bd}}}", "indrigid": "{_\\mathrm{rigid}}", "indred": "{_\\mathrm{red}}", "induser": "{_\\mathrm{user}}", "indu": "{_\\mathrm{u}}", "termA": ["{\\color{blue}{#1}}", 1], "termB": ["{\\color{red}{#1}}", 1], "termC": ["{\\color{green}{#1}}", 1], "acc": "{\\ddot \\mathbf{q}}", "GA": "{G\\alpha}", "aalg": "{\\mathbf{a}}", "vel": "{\\mathbf{v}}"}}}</script>
        <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Module: graphicsDataUtilities" href="graphicsDataUtilities.html" />
    <link rel="prev" title="Module: beams" href="beams.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            Exudyn1.7.116.dev1
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Exudyn User Manual</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Exudyn.html">Exudyn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../InstallationAndGettingStartedIndex.html">Installation and Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../OverviewOnExudynIndex.html">Overview on Exudyn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../TutorialIndex.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../GraphicsAndVisualizationIndex.html">Graphics and visualization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../NotationIndex.html">Notation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../TheoryAndFormulationsIndex.html">Theory and formulations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../SolversIndex.html">Solvers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cInterface/CInterfaceIndex.html">Python-C++ command interface</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference Manual</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Python Utility Functions</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="pythonUtilities.html">Python Utility Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="advancedUtilities.html">Module: advancedUtilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="artificialIntelligence.html">Module: artificialIntelligence</a></li>
<li class="toctree-l2"><a class="reference internal" href="basicUtilities.html">Module: basicUtilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="beams.html">Module: beams</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Module: FEM</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#function-compressedrowsparsetodensematrix">Function: CompressedRowSparseToDenseMatrix</a></li>
<li class="toctree-l3"><a class="reference internal" href="#function-mapsparsematrixindices">Function: MapSparseMatrixIndices</a></li>
<li class="toctree-l3"><a class="reference internal" href="#function-vectordiadicunitmatrix3d">Function: VectorDiadicUnitMatrix3D</a></li>
<li class="toctree-l3"><a class="reference internal" href="#function-cycliccomparereversed">Function: CyclicCompareReversed</a></li>
<li class="toctree-l3"><a class="reference internal" href="#function-addentrytocompressedrowsparsearray">Function: AddEntryToCompressedRowSparseArray</a></li>
<li class="toctree-l3"><a class="reference internal" href="#function-csrtorowsandcolumns">Function: CSRtoRowsAndColumns</a></li>
<li class="toctree-l3"><a class="reference internal" href="#function-csrtoscipysparsecsr">Function: CSRtoScipySparseCSR</a></li>
<li class="toctree-l3"><a class="reference internal" href="#function-scipysparsecsrtocsr">Function: ScipySparseCSRtoCSR</a></li>
<li class="toctree-l3"><a class="reference internal" href="#function-resortindicesofcsrmatrix">Function: ResortIndicesOfCSRmatrix</a></li>
<li class="toctree-l3"><a class="reference internal" href="#function-resortindicesofngvector">Function: ResortIndicesOfNGvector</a></li>
<li class="toctree-l3"><a class="reference internal" href="#function-resortindicesexudyn2ngvector">Function: ResortIndicesExudyn2NGvector</a></li>
<li class="toctree-l3"><a class="reference internal" href="#function-converthextotrigs">Function: ConvertHexToTrigs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#function-converttettotrigs">Function: ConvertTetToTrigs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#function-convertdensetocompressedrowmatrix">Function: ConvertDenseToCompressedRowMatrix</a></li>
<li class="toctree-l3"><a class="reference internal" href="#function-readmatrixfromansysmmf">Function: ReadMatrixFromAnsysMMF</a></li>
<li class="toctree-l3"><a class="reference internal" href="#function-readmatrixdofmappingvectorfromansystxt">Function: ReadMatrixDOFmappingVectorFromAnsysTxt</a></li>
<li class="toctree-l3"><a class="reference internal" href="#function-readnodalcoordinatesfromansystxt">Function: ReadNodalCoordinatesFromAnsysTxt</a></li>
<li class="toctree-l3"><a class="reference internal" href="#function-readelementsfromansystxt">Function: ReadElementsFromAnsysTxt</a></li>
<li class="toctree-l3"><a class="reference internal" href="#function-cmsobjectcomputenorm">Function: CMSObjectComputeNorm</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-materialbaseclass-in-module-fem">CLASS MaterialBaseClass (in module FEM)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-kirchhoffmaterial-materialbaseclass-in-module-fem">CLASS KirchhoffMaterial(MaterialBaseClass) (in module FEM)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-function-strain2stress">Class function: Strain2Stress</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-function-strainvector2stressvector">Class function: StrainVector2StressVector</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-function-strainvector2stressvector2d">Class function: StrainVector2StressVector2D</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-function-lameparameters">Class function: LameParameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-finiteelement-in-module-fem">CLASS FiniteElement (in module FEM)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-tet4-finiteelement-in-module-fem">CLASS Tet4(FiniteElement) (in module FEM)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-objectffrfinterface-in-module-fem">CLASS ObjectFFRFinterface (in module FEM)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-function-init">Class function: __init__</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-function-addobjectffrf">Class function: AddObjectFFRF</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-function-ufforce">Class function: UFforce</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-function-ufmassgenericode2">Class function: UFmassGenericODE2</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-objectffrfreducedorderinterface-in-module-fem">CLASS ObjectFFRFreducedOrderInterface (in module FEM)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sec-fem-objectffrfreducedorderinterface-init">Class function: __init__</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-function-savetofile">Class function: SaveToFile</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-function-loadfromfile">Class function: LoadFromFile</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-function-addobjectffrfreducedorderwithuserfunctions">Class function: AddObjectFFRFreducedOrderWithUserFunctions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-function-ufmassffrfreducedorder">Class function: UFmassFFRFreducedOrder</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-function-ufforceffrfreducedorder">Class function: UFforceFFRFreducedOrder</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-function-addobjectffrfreducedorder">Class function: AddObjectFFRFreducedOrder</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-hcbstaticmodeselection-enum-in-module-fem">CLASS HCBstaticModeSelection(Enum) (in module FEM)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-feminterface-in-module-fem">CLASS FEMinterface (in module FEM)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sec-fem-feminterface-init">Class function: __init__</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sec-fem-feminterface-savetofile">Class function: SaveToFile</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sec-fem-feminterface-loadfromfile">Class function: LoadFromFile</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-function-importfromabaqusinputfile">Class function: ImportFromAbaqusInputFile</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-function-readmassmatrixfromabaqus">Class function: ReadMassMatrixFromAbaqus</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-function-readstiffnessmatrixfromabaqus">Class function: ReadStiffnessMatrixFromAbaqus</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-function-importmeshfromngsolve">Class function: ImportMeshFromNGsolve</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-function-computeeigenmodesngsolve">Class function: ComputeEigenmodesNGsolve</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-function-computehurtycraigbamptonmodesngsolve">Class function: ComputeHurtyCraigBamptonModesNGsolve</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-function-computepostprocessingmodesngsolve">Class function: ComputePostProcessingModesNGsolve</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-function-getmassmatrix">Class function: GetMassMatrix</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-function-getstiffnessmatrix">Class function: GetStiffnessMatrix</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-function-numberofnodes">Class function: NumberOfNodes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-function-getnodepositionsasarray">Class function: GetNodePositionsAsArray</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-function-getnodepositionsmean">Class function: GetNodePositionsMean</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-function-numberofcoordinates">Class function: NumberOfCoordinates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-function-getnodeatpoint">Class function: GetNodeAtPoint</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-function-getnodesinplane">Class function: GetNodesInPlane</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-function-getnodesincube">Class function: GetNodesInCube</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-function-getnodesonline">Class function: GetNodesOnLine</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-function-getnodesoncylinder">Class function: GetNodesOnCylinder</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-function-getnodesoncircle">Class function: GetNodesOnCircle</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-function-getnodeweightsfromsurfaceareas">Class function: GetNodeWeightsFromSurfaceAreas</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-function-getsurfacetriangles">Class function: GetSurfaceTriangles</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-function-volumetosurfaceelements">Class function: VolumeToSurfaceElements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-function-getgyroscopicmatrix">Class function: GetGyroscopicMatrix</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-function-scalemassmatrix">Class function: ScaleMassMatrix</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-function-scalestiffnessmatrix">Class function: ScaleStiffnessMatrix</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-function-addelasticsupportatnode">Class function: AddElasticSupportAtNode</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-function-addnodemass">Class function: AddNodeMass</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-function-createlinearfemobjectgenericode2">Class function: CreateLinearFEMObjectGenericODE2</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-function-createnonlinearfemobjectgenericode2ngsolve">Class function: CreateNonlinearFEMObjectGenericODE2NGsolve</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-function-computeeigenmodes">Class function: ComputeEigenmodes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-function-computeeigenmodeswithboundarynodes">Class function: ComputeEigenModesWithBoundaryNodes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-function-computehurtycraigbamptonmodes">Class function: ComputeHurtyCraigBamptonModes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-function-geteigenfrequencieshz">Class function: GetEigenFrequenciesHz</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-function-computepostprocessingmodes">Class function: ComputePostProcessingModes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-function-computecampbelldiagram">Class function: ComputeCampbellDiagram</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-function-checkconsistency">Class function: CheckConsistency</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-function-readmassmatrixfromansys">Class function: ReadMassMatrixFromAnsys</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-function-readstiffnessmatrixfromansys">Class function: ReadStiffnessMatrixFromAnsys</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-function-readnodalcoordinatesfromansys">Class function: ReadNodalCoordinatesFromAnsys</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-function-readelementsfromansys">Class function: ReadElementsFromAnsys</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="graphicsDataUtilities.html">Module: graphicsDataUtilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="GUI.html">Module: GUI</a></li>
<li class="toctree-l2"><a class="reference internal" href="interactive.html">Module: interactive</a></li>
<li class="toctree-l2"><a class="reference internal" href="kinematicTree.html">Module: kinematicTree</a></li>
<li class="toctree-l2"><a class="reference internal" href="lieGroupBasics.html">Module: lieGroupBasics</a></li>
<li class="toctree-l2"><a class="reference internal" href="mainSystemExtensions.html">Module: mainSystemExtensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="physics.html">Module: physics</a></li>
<li class="toctree-l2"><a class="reference internal" href="plot.html">Module: plot</a></li>
<li class="toctree-l2"><a class="reference internal" href="processing.html">Module: processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="rigidBodyUtilities.html">Module: rigidBodyUtilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="robotics.html">Module: robotics</a></li>
<li class="toctree-l2"><a class="reference internal" href="robotics.rosInterface.html">Module: robotics.rosInterface</a></li>
<li class="toctree-l2"><a class="reference internal" href="robotics.future.html">Module: robotics.future</a></li>
<li class="toctree-l2"><a class="reference internal" href="robotics.models.html">Module: robotics.models</a></li>
<li class="toctree-l2"><a class="reference internal" href="robotics.mobile.html">Module: robotics.mobile</a></li>
<li class="toctree-l2"><a class="reference internal" href="robotics.motion.html">Module: robotics.motion</a></li>
<li class="toctree-l2"><a class="reference internal" href="robotics.special.html">Module: robotics.special</a></li>
<li class="toctree-l2"><a class="reference internal" href="robotics.utilities.html">Module: robotics.utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="signalProcessing.html">Module: signalProcessing</a></li>
<li class="toctree-l2"><a class="reference internal" href="solver.html">Module: solver</a></li>
<li class="toctree-l2"><a class="reference internal" href="utilities.html">Module: utilities</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../items/itemsIndex.html">Items reference manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../structures/StructuresAndSettingsIndex.html">Structures and Settings</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Misc</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Abbreviations.html">List of Abbreviations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ExamplesIndex.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../TestModelsIndex.html">TestModels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../trackerlog.html">Issue tracker</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Exudyn1.7.116.dev1</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Python Utility Functions</a></li>
      <li class="breadcrumb-item active">Module: FEM</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/docs/RST/pythonUtilities/FEM.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-fem">
<span id="sec-module-fem"></span><h1>Module: FEM<a class="headerlink" href="#module-fem" title="Link to this heading"></a></h1>
<p>Support functions and helper classes for import of meshes, finite element models (ABAQUS, ANSYS, NETGEN) and for generation of FFRF (floating frame of reference) objects.</p>
<ul>
<li><div class="line-block">
<div class="line">Author:</div>
<div class="line">Johannes Gerstmayr; Stefan Holzinger (Abaqus and Ansys import utilities); Joachim Schöberl (support for Netgen and NGsolve  import and eigen computations)</div>
</div>
</li>
<li><p>Date:      2020-03-10 (created)</p></li>
<li><p>Notes:     internal CSR matrix storage format contains 3 float numbers per row: [row, column, value], can be converted to scipy csr sparse matrices with function CSRtoScipySparseCSR(…)</p></li>
</ul>
<section id="function-compressedrowsparsetodensematrix">
<span id="sec-fem-compressedrowsparsetodensematrix"></span><h2>Function: CompressedRowSparseToDenseMatrix<a class="headerlink" href="#function-compressedrowsparsetodensematrix" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L43">CompressedRowSparseToDenseMatrix</a>(<code class="docutils literal notranslate"><span class="pre">sparseData</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>function description</em>:</div>
<div class="line">convert zero-based sparse matrix data to dense numpy matrix</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>input</em>:</div>
<div class="line">sparseData: format (per row): [row, column, value] ==&gt; converted into dense format</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>output</em>:</div>
<div class="line">a dense matrix as np.array</div>
</div>
</li>
</ul>
<hr class="docutils" />
</section>
<section id="function-mapsparsematrixindices">
<span id="sec-fem-mapsparsematrixindices"></span><h2>Function: MapSparseMatrixIndices<a class="headerlink" href="#function-mapsparsematrixindices" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L52">MapSparseMatrixIndices</a>(<code class="docutils literal notranslate"><span class="pre">matrix</span></code>, <code class="docutils literal notranslate"><span class="pre">sorting</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>function description</em>:</div>
<div class="line">resort a sparse matrix (internal CSR format) with given sorting for rows and columns; changes matrix directly! used for ANSYS matrix import</div>
</div>
</li>
</ul>
<hr class="docutils" />
</section>
<section id="function-vectordiadicunitmatrix3d">
<span id="sec-fem-vectordiadicunitmatrix3d"></span><h2>Function: VectorDiadicUnitMatrix3D<a class="headerlink" href="#function-vectordiadicunitmatrix3d" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L60">VectorDiadicUnitMatrix3D</a>(<code class="docutils literal notranslate"><span class="pre">v</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>function description</em>:</div>
<div class="line">compute diadic product of vector v and a 3D unit matrix = diadic(v,I<span class="math notranslate nohighlight">\(_{3x3}\)</span>); used for ObjectFFRF and CMS implementation</div>
</div>
</li>
</ul>
<hr class="docutils" />
</section>
<section id="function-cycliccomparereversed">
<span id="sec-fem-cycliccomparereversed"></span><h2>Function: CyclicCompareReversed<a class="headerlink" href="#function-cycliccomparereversed" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L67">CyclicCompareReversed</a>(<code class="docutils literal notranslate"><span class="pre">list1</span></code>, <code class="docutils literal notranslate"><span class="pre">list2</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>function description</em>:</div>
<div class="line">compare cyclic two lists, reverse second list; return True, if any cyclic shifted lists are same, False otherwise</div>
</div>
</li>
</ul>
<hr class="docutils" />
</section>
<section id="function-addentrytocompressedrowsparsearray">
<span id="sec-fem-addentrytocompressedrowsparsearray"></span><h2>Function: AddEntryToCompressedRowSparseArray<a class="headerlink" href="#function-addentrytocompressedrowsparsearray" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L76">AddEntryToCompressedRowSparseArray</a>(<code class="docutils literal notranslate"><span class="pre">sparseData</span></code>, <code class="docutils literal notranslate"><span class="pre">row</span></code>, <code class="docutils literal notranslate"><span class="pre">column</span></code>, <code class="docutils literal notranslate"><span class="pre">value</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>function description</em>:</div>
<div class="line">add entry to compressedRowSparse matrix, avoiding duplicates</div>
<div class="line">value is either added to existing entry (avoid duplicates) or a new entry is appended</div>
</div>
</li>
</ul>
<hr class="docutils" />
</section>
<section id="function-csrtorowsandcolumns">
<span id="sec-fem-csrtorowsandcolumns"></span><h2>Function: CSRtoRowsAndColumns<a class="headerlink" href="#function-csrtorowsandcolumns" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L94">CSRtoRowsAndColumns</a>(<code class="docutils literal notranslate"><span class="pre">sparseMatrixCSR</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>function description</em>:</div>
<div class="line">compute rows and columns of a compressed sparse matrix and return as tuple: (rows,columns)</div>
</div>
</li>
</ul>
<hr class="docutils" />
</section>
<section id="function-csrtoscipysparsecsr">
<span id="sec-fem-csrtoscipysparsecsr"></span><h2>Function: CSRtoScipySparseCSR<a class="headerlink" href="#function-csrtoscipysparsecsr" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L100">CSRtoScipySparseCSR</a>(<code class="docutils literal notranslate"><span class="pre">sparseMatrixCSR</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>function description</em>:</div>
<div class="line">convert internal compressed CSR to scipy.sparse csr matrix</div>
</div>
</li>
</ul>
<p>Relevant Examples (Ex) and TestModels (TM) with weblink to github:</p>
<blockquote>
<div><p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/shapeOptimization.py">shapeOptimization.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/ACFtest.py">ACFtest.py</a> (TM)</p>
</div></blockquote>
<hr class="docutils" />
</section>
<section id="function-scipysparsecsrtocsr">
<span id="sec-fem-scipysparsecsrtocsr"></span><h2>Function: ScipySparseCSRtoCSR<a class="headerlink" href="#function-scipysparsecsrtocsr" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L108">ScipySparseCSRtoCSR</a>(<code class="docutils literal notranslate"><span class="pre">scipyCSR</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>function description</em>:</div>
<div class="line">convert scipy.sparse csr matrix to internal compressed CSR</div>
</div>
</li>
</ul>
<hr class="docutils" />
</section>
<section id="function-resortindicesofcsrmatrix">
<span id="sec-fem-resortindicesofcsrmatrix"></span><h2>Function: ResortIndicesOfCSRmatrix<a class="headerlink" href="#function-resortindicesofcsrmatrix" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L116">ResortIndicesOfCSRmatrix</a>(<code class="docutils literal notranslate"><span class="pre">mXXYYZZ</span></code>, <code class="docutils literal notranslate"><span class="pre">numberOfRows</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>function description</em>:</div>
<div class="line">resort indices of given NGsolve CSR matrix in XXXYYYZZZ format to XYZXYZXYZ format; numberOfRows must be equal to columns</div>
<div class="line">needed for import from NGsolve</div>
</div>
</li>
</ul>
<hr class="docutils" />
</section>
<section id="function-resortindicesofngvector">
<span id="sec-fem-resortindicesofngvector"></span><h2>Function: ResortIndicesOfNGvector<a class="headerlink" href="#function-resortindicesofngvector" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L134">ResortIndicesOfNGvector</a>(<code class="docutils literal notranslate"><span class="pre">vXXYYZZ</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>function description</em>:</div>
<div class="line">resort indices of given NGsolve vector in XXXYYYZZZ format to XYZXYZXYZ format</div>
</div>
</li>
</ul>
<hr class="docutils" />
</section>
<section id="function-resortindicesexudyn2ngvector">
<span id="sec-fem-resortindicesexudyn2ngvector"></span><h2>Function: ResortIndicesExudyn2NGvector<a class="headerlink" href="#function-resortindicesexudyn2ngvector" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L154">ResortIndicesExudyn2NGvector</a>(<code class="docutils literal notranslate"><span class="pre">vXYZXYZ</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>function description</em>:</div>
<div class="line">resort indices of given Exudyun vector XYZXYZXYZ to NGsolve vector in XXXYYYZZZ format</div>
</div>
</li>
</ul>
<hr class="docutils" />
</section>
<section id="function-converthextotrigs">
<span id="sec-fem-converthextotrigs"></span><h2>Function: ConvertHexToTrigs<a class="headerlink" href="#function-converthextotrigs" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L291">ConvertHexToTrigs</a>(<code class="docutils literal notranslate"><span class="pre">nodeNumbers</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>function description</em>:</div>
<div class="line">convert list of Hex8/C3D8  element with 8 nodes in nodeNumbers into triangle-List</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>notes</em>:</div>
<div class="line">works for Hex20 elements, but does only take the corner nodes for drawing!</div>
</div>
</li>
</ul>
<p>Relevant Examples (Ex) and TestModels (TM) with weblink to github:</p>
<blockquote>
<div><p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/objectFFRFTest.py">objectFFRFTest.py</a> (TM)</p>
</div></blockquote>
<hr class="docutils" />
</section>
<section id="function-converttettotrigs">
<span id="sec-fem-converttettotrigs"></span><h2>Function: ConvertTetToTrigs<a class="headerlink" href="#function-converttettotrigs" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L302">ConvertTetToTrigs</a>(<code class="docutils literal notranslate"><span class="pre">nodeNumbers</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>function description</em>:</div>
<div class="line">convert list of Tet4/Tet10 element with 4 or 10 nodes in nodeNumbers into triangle-List</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>notes</em>:</div>
<div class="line">works for Tet10 elements, but does only take the corner nodes for drawing!</div>
</div>
</li>
</ul>
<hr class="docutils" />
</section>
<section id="function-convertdensetocompressedrowmatrix">
<span id="sec-fem-convertdensetocompressedrowmatrix"></span><h2>Function: ConvertDenseToCompressedRowMatrix<a class="headerlink" href="#function-convertdensetocompressedrowmatrix" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L314">ConvertDenseToCompressedRowMatrix</a>(<code class="docutils literal notranslate"><span class="pre">denseMatrix</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>function description</em>:</div>
<div class="line">convert numpy.array dense matrix to (internal) compressed row format</div>
</div>
</li>
</ul>
<hr class="docutils" />
</section>
<section id="function-readmatrixfromansysmmf">
<span id="sec-fem-readmatrixfromansysmmf"></span><h2>Function: ReadMatrixFromAnsysMMF<a class="headerlink" href="#function-readmatrixfromansysmmf" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L362">ReadMatrixFromAnsysMMF</a>(<code class="docutils literal notranslate"><span class="pre">fileName</span></code>, <code class="docutils literal notranslate"><span class="pre">verbose</span> <span class="pre">=</span> <span class="pre">False</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>function description</em>:</div>
<div class="line">This function reads either the mass or stiffness matrix from an Ansys</div>
<div class="line">Matrix Market Format (MMF). The corresponding matrix can either be exported</div>
<div class="line">as dense matrix or sparse matrix.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>input</em>:</div>
<div class="line">fileName of MMF file</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>output</em>:</div>
<div class="line">internal compressed row sparse matrix (as (nrows x 3) numpy array)</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>author</em>:</div>
<div class="line">Stefan Holzinger</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>notes</em>:</div>
<div class="line">A MMF file can be created in Ansys by placing the following APDL code inside</div>
<div class="line">the solution tree in Ansys Workbench:</div>
<div class="line">!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!</div>
<div class="line">! APDL code that exports sparse stiffnes and mass matrix in MMF format. If</div>
<div class="line">! the dense matrix is needed, replace *SMAT with *DMAT in the following</div>
<div class="line">! APDL code.</div>
<div class="line">! Export the stiffness matrix in MMF format</div>
<div class="line">*SMAT,MatKD,D,IMPORT,FULL,file.full,STIFF</div>
<div class="line">*EXPORT,MatKD,MMF,fileNameStiffnessMatrix,,,</div>
<div class="line">! Export the mass matrix in MMF format</div>
<div class="line">*SMAT,MatMD,D,IMPORT,FULL,file.full,MASS</div>
<div class="line">*EXPORT,MatMD,MMF,fileNameMassMatrix,,,</div>
<div class="line">!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!</div>
<div class="line">In case a lumped mass matrix is needed, place the following APDL Code inside</div>
<div class="line">the Modal Analysis Tree:</div>
<div class="line">!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!</div>
<div class="line">! APDL code to force Ansys to use a lumped mass formulation (if available for</div>
<div class="line">! used elements)</div>
<div class="line">LUMPM, ON, , 0</div>
<div class="line">!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!</div>
</div>
</li>
</ul>
<hr class="docutils" />
</section>
<section id="function-readmatrixdofmappingvectorfromansystxt">
<span id="sec-fem-readmatrixdofmappingvectorfromansystxt"></span><h2>Function: ReadMatrixDOFmappingVectorFromAnsysTxt<a class="headerlink" href="#function-readmatrixdofmappingvectorfromansystxt" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L403">ReadMatrixDOFmappingVectorFromAnsysTxt</a>(<code class="docutils literal notranslate"><span class="pre">fileName</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>function description</em>:</div>
<div class="line">read sorting vector for ANSYS mass and stiffness matrices and return sorting vector as np.array</div>
<div class="line">the file contains sorting for nodes and applies this sorting to the DOF (assuming 3 DOF per node!)</div>
<div class="line">the resulting sorted vector is already converted to 0-based indices</div>
</div>
</li>
</ul>
<hr class="docutils" />
</section>
<section id="function-readnodalcoordinatesfromansystxt">
<span id="sec-fem-readnodalcoordinatesfromansystxt"></span><h2>Function: ReadNodalCoordinatesFromAnsysTxt<a class="headerlink" href="#function-readnodalcoordinatesfromansystxt" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L459">ReadNodalCoordinatesFromAnsysTxt</a>(<code class="docutils literal notranslate"><span class="pre">fileName</span></code>, <code class="docutils literal notranslate"><span class="pre">verbose</span> <span class="pre">=</span> <span class="pre">False</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>function description</em>:</div>
<div class="line">This function reads the nodal coordinates exported from Ansys.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>input</em>:</div>
<div class="line">fileName (file name ending must be .txt!)</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>output</em>:</div>
<div class="line">nodal coordinates as numpy array</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>author</em>:</div>
<div class="line">Stefan Holzinger</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>notes</em>:</div>
<div class="line">The nodal coordinates can be exported from Ansys by creating a named selection</div>
<div class="line">of the body whos mesh should to exported by choosing its geometry. Next,</div>
<div class="line">create a second named selcetion by using a worksheet. Add the named selection</div>
<div class="line">that was created first into the worksheet of the second named selection.</div>
<div class="line">Inside the working sheet, choose ‘convert’ and convert the first created</div>
<div class="line">named selection to ‘mesh node’ (Netzknoten in german) and click on generate</div>
<div class="line">to create the second named selection. Next, right click on the second</div>
<div class="line">named selection tha was created and choose ‘export’ and save the nodal</div>
<div class="line">coordinates as .txt file.</div>
</div>
</li>
</ul>
<hr class="docutils" />
</section>
<section id="function-readelementsfromansystxt">
<span id="sec-fem-readelementsfromansystxt"></span><h2>Function: ReadElementsFromAnsysTxt<a class="headerlink" href="#function-readelementsfromansystxt" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L538">ReadElementsFromAnsysTxt</a>(<code class="docutils literal notranslate"><span class="pre">fileName</span></code>, <code class="docutils literal notranslate"><span class="pre">verbose</span> <span class="pre">=</span> <span class="pre">False</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>function description</em>:</div>
<div class="line">This function reads the nodal coordinates exported from Ansys.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>input</em>:</div>
<div class="line">fileName (file name ending must be .txt!)</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>output</em>:</div>
<div class="line">element connectivity as numpy array</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>author</em>:</div>
<div class="line">Stefan Holzinger</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>notes</em>:</div>
<div class="line">The elements can be exported from Ansys by creating a named selection</div>
<div class="line">of the body whos mesh should to exported by choosing its geometry. Next,</div>
<div class="line">create a second named selcetion by using a worksheet. Add the named selection</div>
<div class="line">that was created first into the worksheet of the second named selection.</div>
<div class="line">Inside the worksheet, choose ‘convert’ and convert the first created</div>
<div class="line">named selection to ‘mesh element’ (Netzelement in german) and click on generate</div>
<div class="line">to create the second named selection. Next, right click on the second</div>
<div class="line">named selection tha was created and choose ‘export’ and save the elements</div>
<div class="line">as .txt file.</div>
</div>
</li>
</ul>
<hr class="docutils" />
</section>
<section id="function-cmsobjectcomputenorm">
<span id="sec-fem-cmsobjectcomputenorm"></span><h2>Function: CMSObjectComputeNorm<a class="headerlink" href="#function-cmsobjectcomputenorm" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L961">CMSObjectComputeNorm</a>(<code class="docutils literal notranslate"><span class="pre">mbs</span></code>, <code class="docutils literal notranslate"><span class="pre">objectNumber</span></code>, <code class="docutils literal notranslate"><span class="pre">outputVariableType</span></code>, <code class="docutils literal notranslate"><span class="pre">norm</span> <span class="pre">=</span> <span class="pre">'max'</span></code>, <code class="docutils literal notranslate"><span class="pre">nodeNumberList</span> <span class="pre">=</span> <span class="pre">[]</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>function description</em>:</div>
<div class="line">compute current (max, min, …) value for chosen ObjectFFRFreducedOrder object (CMSobject) with exu.OutputVariableType. The function operates on nodal values. This is a helper function, which can be used to conveniently compute output quantities of the CMSobject efficiently and to use it in sensors</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>input</em>:</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">mbs</span></code>: MainSystem of objectNumber</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">objectNumber</span></code>: number of ObjectFFRFreducedOrder in mbs</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">outputVariableType</span></code>: a exu.OutputVariableType out of [StressLocal, DisplacementLocal, VelocityLocal]</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">norm</span></code>: string containing chosen norm to be computed, out of ‘Mises’, ‘maxNorm’, ‘min’, ‘max’; ‘max’ will return maximum of all components (component wise), ‘min’ does same but for minimum; ‘maxNorm’ computes np.linalg.norm for every node and then takes maximum of all norms; Mises computes von-Mises stress for every node and then takes maximum of all nodes</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">nodeNumberList</span></code>: list of mesh node numbers (from FEMinterface); if empty [], all nodes are used; otherwise, only given nodes are evaluated</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>output</em>:</div>
<div class="line">return value or list of values according to chosen norm as np.array</div>
</div>
</li>
</ul>
<p>Relevant Examples (Ex) and TestModels (TM) with weblink to github:</p>
<blockquote>
<div><p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/netgenSTLtest.py">netgenSTLtest.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/NGsolveCMStutorial.py">NGsolveCMStutorial.py</a> (Ex)</p>
</div></blockquote>
</section>
<section id="class-materialbaseclass-in-module-fem">
<span id="sec-module-fem-class-materialbaseclass"></span><h2>CLASS MaterialBaseClass (in module FEM)<a class="headerlink" href="#class-materialbaseclass-in-module-fem" title="Link to this heading"></a></h2>
<p><strong>class description</strong>:</p>
<blockquote>
<div><p>material base class, e.g., for FiniteElement</p>
</div></blockquote>
</section>
<section id="class-kirchhoffmaterial-materialbaseclass-in-module-fem">
<span id="sec-module-fem-class-kirchhoffmaterial-materialbaseclass"></span><h2>CLASS KirchhoffMaterial(MaterialBaseClass) (in module FEM)<a class="headerlink" href="#class-kirchhoffmaterial-materialbaseclass-in-module-fem" title="Link to this heading"></a></h2>
<p><strong>class description</strong>:</p>
<blockquote>
<div><p>class for representation of Kirchhoff (linear elastic, 3D and 2D) material</p>
</div></blockquote>
<ul>
<li><div class="line-block">
<div class="line"><em>notes</em>:</div>
<div class="line">use planeStress=False for plane strain</div>
</div>
</li>
</ul>
</section>
<section id="class-function-strain2stress">
<span id="sec-fem-kirchhoffmaterial-materialbaseclass-strain2stress"></span><h2>Class function: Strain2Stress<a class="headerlink" href="#class-function-strain2stress" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L645">Strain2Stress</a>(<code class="docutils literal notranslate"><span class="pre">self</span></code>, <code class="docutils literal notranslate"><span class="pre">strain</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>classFunction</em>:</div>
<div class="line">convert strain tensor into stress tensor using elasticity tensor</div>
</div>
</li>
</ul>
<hr class="docutils" />
</section>
<section id="class-function-strainvector2stressvector">
<span id="sec-fem-kirchhoffmaterial-materialbaseclass-strainvector2stressvector"></span><h2>Class function: StrainVector2StressVector<a class="headerlink" href="#class-function-strainvector2stressvector" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L656">StrainVector2StressVector</a>(<code class="docutils literal notranslate"><span class="pre">self</span></code>, <code class="docutils literal notranslate"><span class="pre">strainVector</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>classFunction</em>:</div>
<div class="line">convert strain vector into stress vector</div>
</div>
</li>
</ul>
<hr class="docutils" />
</section>
<section id="class-function-strainvector2stressvector2d">
<span id="sec-fem-kirchhoffmaterial-materialbaseclass-strainvector2stressvector2d"></span><h2>Class function: StrainVector2StressVector2D<a class="headerlink" href="#class-function-strainvector2stressvector2d" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L660">StrainVector2StressVector2D</a>(<code class="docutils literal notranslate"><span class="pre">self</span></code>, <code class="docutils literal notranslate"><span class="pre">strainVector2D</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>classFunction</em>:</div>
<div class="line">compute 2D stress vector from strain vector</div>
</div>
</li>
</ul>
<hr class="docutils" />
</section>
<section id="class-function-lameparameters">
<span id="sec-fem-kirchhoffmaterial-materialbaseclass-lameparameters"></span><h2>Class function: LameParameters<a class="headerlink" href="#class-function-lameparameters" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L669">LameParameters</a>(<code class="docutils literal notranslate"><span class="pre">self</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>classFunction</em>:</div>
<div class="line">compute Lame parameters from internal Young’s modulus and Poisson ratio</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>output</em>:</div>
<div class="line">return vector [mu, lam] of Lame parameters</div>
</div>
</li>
</ul>
<p>Relevant Examples (Ex) and TestModels (TM) with weblink to github:</p>
<blockquote>
<div><p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/CMSexampleCourse.py">CMSexampleCourse.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/netgenSTLtest.py">netgenSTLtest.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/NGsolveCMStutorial.py">NGsolveCMStutorial.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/NGsolveCraigBampton.py">NGsolveCraigBampton.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/NGsolvePistonEngine.py">NGsolvePistonEngine.py</a> (Ex)</p>
</div></blockquote>
</section>
<section id="class-finiteelement-in-module-fem">
<span id="sec-module-fem-class-finiteelement"></span><h2>CLASS FiniteElement (in module FEM)<a class="headerlink" href="#class-finiteelement-in-module-fem" title="Link to this heading"></a></h2>
<p><strong>class description</strong>:</p>
<blockquote>
<div><p>finite element base class for lateron implementations of other finite elements</p>
</div></blockquote>
</section>
<section id="class-tet4-finiteelement-in-module-fem">
<span id="sec-module-fem-class-tet4-finiteelement"></span><h2>CLASS Tet4(FiniteElement) (in module FEM)<a class="headerlink" href="#class-tet4-finiteelement-in-module-fem" title="Link to this heading"></a></h2>
<p><strong>class description</strong>:</p>
<blockquote>
<div><p>simplistic 4-noded tetrahedral interface to compute strain/stress at nodal points</p>
</div></blockquote>
</section>
<section id="class-objectffrfinterface-in-module-fem">
<span id="sec-module-fem-class-objectffrfinterface"></span><h2>CLASS ObjectFFRFinterface (in module FEM)<a class="headerlink" href="#class-objectffrfinterface-in-module-fem" title="Link to this heading"></a></h2>
<p><strong>class description</strong>:</p>
<blockquote>
<div><p>compute terms necessary for ObjectFFRF
class used internally in FEMinterface to compute ObjectFFRF object
this class holds all data for ObjectFFRF user functions</p>
</div></blockquote>
</section>
<section id="class-function-init">
<span id="sec-fem-objectffrfinterface-init"></span><h2>Class function: __init__<a class="headerlink" href="#class-function-init" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L752">__init__</a>(<code class="docutils literal notranslate"><span class="pre">self</span></code>, <code class="docutils literal notranslate"><span class="pre">femInterface</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>classFunction</em>:</div>
<div class="line">initialize ObjectFFRFinterface with FEMinterface class</div>
<div class="line">initializes the ObjectFFRFinterface with nodes, modes, surface description and systemmatrices from FEMinterface</div>
<div class="line">data is then transfered to mbs object with classFunction AddObjectFFRF(…)</div>
</div>
</li>
</ul>
<hr class="docutils" />
</section>
<section id="class-function-addobjectffrf">
<span id="sec-fem-objectffrfinterface-addobjectffrf"></span><h2>Class function: AddObjectFFRF<a class="headerlink" href="#class-function-addobjectffrf" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L797">AddObjectFFRF</a>(<code class="docutils literal notranslate"><span class="pre">self</span></code>, <code class="docutils literal notranslate"><span class="pre">exu</span></code>, <code class="docutils literal notranslate"><span class="pre">mbs</span></code>, <code class="docutils literal notranslate"><span class="pre">positionRef</span> <span class="pre">=</span> <span class="pre">[0,0,0]</span></code>, <code class="docutils literal notranslate"><span class="pre">eulerParametersRef</span> <span class="pre">=</span> <span class="pre">[1,0,0,0]</span></code>, <code class="docutils literal notranslate"><span class="pre">initialVelocity</span> <span class="pre">=</span> <span class="pre">[0,0,0]</span></code>, <code class="docutils literal notranslate"><span class="pre">initialAngularVelocity</span> <span class="pre">=</span> <span class="pre">[0,0,0]</span></code>, <code class="docutils literal notranslate"><span class="pre">gravity</span> <span class="pre">=</span> <span class="pre">[0,0,0]</span></code>, <code class="docutils literal notranslate"><span class="pre">constrainRigidBodyMotion</span> <span class="pre">=</span> <span class="pre">True</span></code>, <code class="docutils literal notranslate"><span class="pre">massProportionalDamping</span> <span class="pre">=</span> <span class="pre">0</span></code>, <code class="docutils literal notranslate"><span class="pre">stiffnessProportionalDamping</span> <span class="pre">=</span> <span class="pre">0</span></code>, <code class="docutils literal notranslate"><span class="pre">color</span> <span class="pre">=</span> <span class="pre">[0.1,0.9,0.1,1.]</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>classFunction</em>:</div>
<div class="line">add according nodes, objects and constraints for FFRF object to MainSystem mbs; only implemented for Euler parameters</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>input</em>:</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">exu</span></code>: the exudyn module</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">mbs</span></code>: a MainSystem object</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">positionRef</span></code>: reference position of created ObjectFFRF (set in rigid body node underlying to ObjectFFRF)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">eulerParametersRef</span></code>: reference euler parameters of created ObjectFFRF (set in rigid body node underlying to ObjectFFRF)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">initialVelocity</span></code>: initial velocity of created ObjectFFRF (set in rigid body node underlying to ObjectFFRF)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">initialAngularVelocity</span></code>: initial angular velocity of created ObjectFFRF (set in rigid body node underlying to ObjectFFRF)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">gravity</span></code>: set [0,0,0] if no gravity shall be applied, or to the gravity vector otherwise</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">constrainRigidBodyMotion</span></code>: set True in order to add constraint (Tisserand frame) in order to suppress rigid motion of mesh nodes</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">color</span></code>: provided as list of 4 RGBA values</div>
<div class="line">add object to mbs as well as according nodes</div>
</div>
</li>
</ul>
<hr class="docutils" />
</section>
<section id="class-function-ufforce">
<span id="sec-fem-objectffrfinterface-ufforce"></span><h2>Class function: UFforce<a class="headerlink" href="#class-function-ufforce" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L876">UFforce</a>(<code class="docutils literal notranslate"><span class="pre">self</span></code>, <code class="docutils literal notranslate"><span class="pre">exu</span></code>, <code class="docutils literal notranslate"><span class="pre">mbs</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code>, <code class="docutils literal notranslate"><span class="pre">q</span></code>, <code class="docutils literal notranslate"><span class="pre">q_t</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>classFunction</em>:</div>
<div class="line">optional forceUserFunction for ObjectFFRF (per default, this user function is ignored)</div>
</div>
</li>
</ul>
<hr class="docutils" />
</section>
<section id="class-function-ufmassgenericode2">
<span id="sec-fem-objectffrfinterface-ufmassgenericode2"></span><h2>Class function: UFmassGenericODE2<a class="headerlink" href="#class-function-ufmassgenericode2" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L922">UFmassGenericODE2</a>(<code class="docutils literal notranslate"><span class="pre">self</span></code>, <code class="docutils literal notranslate"><span class="pre">exu</span></code>, <code class="docutils literal notranslate"><span class="pre">mbs</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code>, <code class="docutils literal notranslate"><span class="pre">q</span></code>, <code class="docutils literal notranslate"><span class="pre">q_t</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>classFunction</em>:</div>
<div class="line">optional massMatrixUserFunction for ObjectFFRF (per default, this user function is ignored)</div>
</div>
</li>
</ul>
<p>Relevant Examples (Ex) and TestModels (TM) with weblink to github:</p>
<blockquote>
<div><p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/objectFFRFTest2.py">objectFFRFTest2.py</a> (TM)</p>
</div></blockquote>
</section>
<section id="class-objectffrfreducedorderinterface-in-module-fem">
<span id="sec-module-fem-class-objectffrfreducedorderinterface"></span><h2>CLASS ObjectFFRFreducedOrderInterface (in module FEM)<a class="headerlink" href="#class-objectffrfreducedorderinterface-in-module-fem" title="Link to this heading"></a></h2>
<p><strong>class description</strong>:</p>
<blockquote>
<div><p>compute terms necessary for ObjectFFRFreducedOrder
class used internally in FEMinterface to compute ObjectFFRFreducedOrder dictionary
this class holds all data for ObjectFFRFreducedOrder user functions</p>
</div></blockquote>
</section>
<section id="sec-fem-objectffrfreducedorderinterface-init">
<span id="id3"></span><h2>Class function: __init__<a class="headerlink" href="#sec-fem-objectffrfreducedorderinterface-init" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L1033">__init__</a>(<code class="docutils literal notranslate"><span class="pre">self</span></code>, <code class="docutils literal notranslate"><span class="pre">femInterface</span> <span class="pre">=</span> <span class="pre">None</span></code>, <code class="docutils literal notranslate"><span class="pre">rigidBodyNodeType</span> <span class="pre">=</span> <span class="pre">'NodeType.RotationEulerParameters'</span></code>, <code class="docutils literal notranslate"><span class="pre">roundMassMatrix</span> <span class="pre">=</span> <span class="pre">1e-13</span></code>, <code class="docutils literal notranslate"><span class="pre">roundStiffnessMatrix</span> <span class="pre">=</span> <span class="pre">1e-13</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>classFunction</em>:</div>
<div class="line">initialize ObjectFFRFreducedOrderInterface with FEMinterface class</div>
<div class="line">initializes the ObjectFFRFreducedOrderInterface with nodes, modes, surface description and reduced system matrices from FEMinterface</div>
<div class="line">data is then transfered to mbs object with classFunction AddObjectFFRFreducedOrderWithUserFunctions(…)</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>input</em>:</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">femInterface</span></code>: must provide nodes, surfaceTriangles, modeBasis, massMatrix, stiffness; if femInterface=None, an empty ObjectFFRFreducedOrderInterface instance is created which may be used to load data with LoadFromFile()</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">roundMassMatrix</span></code>: use this value to set entries of reduced mass matrix to zero which are below the treshold</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">roundStiffnessMatrix</span></code>: use this value to set entries of reduced stiffness matrix to zero which are below the treshold</div>
</div>
</li>
</ul>
<hr class="docutils" />
</section>
<section id="class-function-savetofile">
<span id="sec-fem-objectffrfreducedorderinterface-savetofile"></span><h2>Class function: SaveToFile<a class="headerlink" href="#class-function-savetofile" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L1108">SaveToFile</a>(<code class="docutils literal notranslate"><span class="pre">self</span></code>, <code class="docutils literal notranslate"><span class="pre">fileName</span></code>, <code class="docutils literal notranslate"><span class="pre">fileVersion</span> <span class="pre">=</span> <span class="pre">1</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>classFunction</em>:</div>
<div class="line">save all data to a data filename; can be used to avoid loading femInterface and FE data</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>input</em>:</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">fileName</span></code>: string for path and file name without ending ==&gt; “.npy” will be added</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">fileVersion</span></code>: FOR EXPERTS: this allows to store in older format, will be recovered when loading; must be integer; version must by &gt; 0; the default value will change in future!</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>output</em>:</div>
<div class="line">stores file</div>
</div>
</li>
</ul>
<hr class="docutils" />
</section>
<section id="class-function-loadfromfile">
<span id="sec-fem-objectffrfreducedorderinterface-loadfromfile"></span><h2>Class function: LoadFromFile<a class="headerlink" href="#class-function-loadfromfile" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L1156">LoadFromFile</a>(<code class="docutils literal notranslate"><span class="pre">self</span></code>, <code class="docutils literal notranslate"><span class="pre">fileName</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>classFunction</em>:</div>
<div class="line">load all data (nodes, elements, …) from a data filename previously stored with SaveToFile(…).</div>
<div class="line">this function is much faster than the text-based import functions</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>input</em>:</div>
<div class="line">fileName: string for path and file name without ending ==&gt; “.npy” will be added</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>output</em>:</div>
<div class="line">loads data into fem (note that existing values are not overwritten!)</div>
</div>
</li>
</ul>
<hr class="docutils" />
</section>
<section id="class-function-addobjectffrfreducedorderwithuserfunctions">
<span id="sec-fem-objectffrfreducedorderinterface-addobjectffrfreducedorderwithuserfunctions"></span><h2>Class function: AddObjectFFRFreducedOrderWithUserFunctions<a class="headerlink" href="#class-function-addobjectffrfreducedorderwithuserfunctions" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L1226">AddObjectFFRFreducedOrderWithUserFunctions</a>(<code class="docutils literal notranslate"><span class="pre">self</span></code>, <code class="docutils literal notranslate"><span class="pre">exu</span></code>, <code class="docutils literal notranslate"><span class="pre">mbs</span></code>, <code class="docutils literal notranslate"><span class="pre">positionRef</span> <span class="pre">=</span> <span class="pre">[0,0,0]</span></code>, <code class="docutils literal notranslate"><span class="pre">initialVelocity</span> <span class="pre">=</span> <span class="pre">[0,0,0]</span></code>, <code class="docutils literal notranslate"><span class="pre">rotationMatrixRef</span> <span class="pre">=</span> <span class="pre">[]</span></code>, <code class="docutils literal notranslate"><span class="pre">initialAngularVelocity</span> <span class="pre">=</span> <span class="pre">[0,0,0]</span></code>, <code class="docutils literal notranslate"><span class="pre">gravity</span> <span class="pre">=</span> <span class="pre">[0,0,0]</span></code>, <code class="docutils literal notranslate"><span class="pre">UFforce</span> <span class="pre">=</span> <span class="pre">0</span></code>, <code class="docutils literal notranslate"><span class="pre">UFmassMatrix</span> <span class="pre">=</span> <span class="pre">0</span></code>, <code class="docutils literal notranslate"><span class="pre">massProportionalDamping</span> <span class="pre">=</span> <span class="pre">0</span></code>, <code class="docutils literal notranslate"><span class="pre">stiffnessProportionalDamping</span> <span class="pre">=</span> <span class="pre">0</span></code>, <code class="docutils literal notranslate"><span class="pre">color</span> <span class="pre">=</span> <span class="pre">[0.1,0.9,0.1,1.]</span></code>, <code class="docutils literal notranslate"><span class="pre">eulerParametersRef</span> <span class="pre">=</span> <span class="pre">[]</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>classFunction</em>:</div>
<div class="line">add according nodes, objects and constraints for ObjectFFRFreducedOrder object to MainSystem mbs; use this function with userfunctions=0 in order to use internal C++ functionality, which is approx. 10x faster; implementation of userfunctions also available for rotation vector (Lie group formulation), which needs further testing</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>input</em>:</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">exu</span></code>: the exudyn module</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">mbs</span></code>: a MainSystem object</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">positionRef</span></code>: reference position of created ObjectFFRFreducedOrder (set in rigid body node underlying to ObjectFFRFreducedOrder)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">initialVelocity</span></code>: initial velocity of created ObjectFFRFreducedOrder (set in rigid body node underlying to ObjectFFRFreducedOrder)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">rotationMatrixRef</span></code>: reference rotation of created ObjectFFRFreducedOrder (set in rigid body node underlying to ObjectFFRFreducedOrder); if [], it becomes the unit matrix</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">initialAngularVelocity</span></code>: initial angular velocity of created ObjectFFRFreducedOrder (set in rigid body node underlying to ObjectFFRFreducedOrder)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">eulerParametersRef</span></code>: DEPRECATED, use rotationParametersRef or rotationMatrixRef in future: reference euler parameters of created ObjectFFRFreducedOrder (set in rigid body node underlying to ObjectFFRFreducedOrder)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">gravity</span></code>: set [0,0,0] if no gravity shall be applied, or to the gravity vector otherwise</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">UFforce</span></code>: (OPTIONAL, computation is slower) provide a user function, which computes the quadratic velocity vector and applied forces; see example</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">UFmassMatrix</span></code>: (OPTIONAL, computation is slower) provide a user function, which computes the quadratic velocity vector and applied forces; see example</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">massProportionalDamping</span></code>: Rayleigh damping factor for mass proportional damping (multiplied with reduced mass matrix), added to floating frame/modal coordinates only</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">stiffnessProportionalDamping</span></code>: Rayleigh damping factor for stiffness proportional damping, added to floating frame/modal coordinates only (multiplied with reduced stiffness matrix)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">color</span></code>: provided as list of 4 RGBA values</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>example</em>:</div>
</div>
</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#example of a user function for forces:</span>
<span class="k">def</span> <span class="nf">UFforceFFRFreducedOrder</span><span class="p">(</span><span class="n">mbs</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">itemIndex</span><span class="p">,</span> <span class="n">qReduced</span><span class="p">,</span> <span class="n">qReduced_t</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">cms</span><span class="o">.</span><span class="nf">UFforceFFRFreducedOrder</span><span class="p">(</span><span class="n">exu</span><span class="p">,</span> <span class="n">mbs</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">qReduced</span><span class="p">,</span> <span class="n">qReduced_t</span><span class="p">)</span>
<span class="c1">#example of a user function for mass matrix:</span>
<span class="k">def</span> <span class="nf">UFmassFFRFreducedOrder</span><span class="p">(</span><span class="n">mbs</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">itemIndex</span><span class="p">,</span> <span class="n">qReduced</span><span class="p">,</span> <span class="n">qReduced</span>\<span class="n">_t</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">cms</span><span class="o">.</span><span class="nf">UFmassFFRFreducedOrder</span><span class="p">(</span><span class="n">exu</span><span class="p">,</span> <span class="n">mbs</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">qReduced</span><span class="p">,</span> <span class="n">qReduced</span>\<span class="n">_t</span><span class="p">)</span>
</pre></div>
</div>
<hr class="docutils" />
</section>
<section id="class-function-ufmassffrfreducedorder">
<span id="sec-fem-objectffrfreducedorderinterface-ufmassffrfreducedorder"></span><h2>Class function: UFmassFFRFreducedOrder<a class="headerlink" href="#class-function-ufmassffrfreducedorder" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L1379">UFmassFFRFreducedOrder</a>(<code class="docutils literal notranslate"><span class="pre">self</span></code>, <code class="docutils literal notranslate"><span class="pre">exu</span></code>, <code class="docutils literal notranslate"><span class="pre">mbs</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code>, <code class="docutils literal notranslate"><span class="pre">qReduced</span></code>, <code class="docutils literal notranslate"><span class="pre">qReduced_t</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>classFunction</em>:</div>
<div class="line">CMS mass matrix user function; qReduced and qReduced_t contain the coordiantes of the rigid body node and the modal coordinates in one vector!</div>
</div>
</li>
</ul>
<hr class="docutils" />
</section>
<section id="class-function-ufforceffrfreducedorder">
<span id="sec-fem-objectffrfreducedorderinterface-ufforceffrfreducedorder"></span><h2>Class function: UFforceFFRFreducedOrder<a class="headerlink" href="#class-function-ufforceffrfreducedorder" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L1430">UFforceFFRFreducedOrder</a>(<code class="docutils literal notranslate"><span class="pre">self</span></code>, <code class="docutils literal notranslate"><span class="pre">exu</span></code>, <code class="docutils literal notranslate"><span class="pre">mbs</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code>, <code class="docutils literal notranslate"><span class="pre">qReduced</span></code>, <code class="docutils literal notranslate"><span class="pre">qReduced_t</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>classFunction</em>:</div>
<div class="line">CMS force matrix user function; qReduced and qReduced_t contain the coordiantes of the rigid body node and the modal coordinates in one vector!</div>
</div>
</li>
</ul>
<hr class="docutils" />
</section>
<section id="class-function-addobjectffrfreducedorder">
<span id="sec-fem-objectffrfreducedorderinterface-addobjectffrfreducedorder"></span><h2>Class function: AddObjectFFRFreducedOrder<a class="headerlink" href="#class-function-addobjectffrfreducedorder" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L1513">AddObjectFFRFreducedOrder</a>(<code class="docutils literal notranslate"><span class="pre">self</span></code>, <code class="docutils literal notranslate"><span class="pre">mbs</span></code>, <code class="docutils literal notranslate"><span class="pre">positionRef</span> <span class="pre">=</span> <span class="pre">[0,0,0]</span></code>, <code class="docutils literal notranslate"><span class="pre">initialVelocity</span> <span class="pre">=</span> <span class="pre">[0,0,0]</span></code>, <code class="docutils literal notranslate"><span class="pre">rotationMatrixRef</span> <span class="pre">=</span> <span class="pre">[]</span></code>, <code class="docutils literal notranslate"><span class="pre">initialAngularVelocity</span> <span class="pre">=</span> <span class="pre">[0,0,0]</span></code>, <code class="docutils literal notranslate"><span class="pre">massProportionalDamping</span> <span class="pre">=</span> <span class="pre">0</span></code>, <code class="docutils literal notranslate"><span class="pre">stiffnessProportionalDamping</span> <span class="pre">=</span> <span class="pre">0</span></code>, <code class="docutils literal notranslate"><span class="pre">gravity</span> <span class="pre">=</span> <span class="pre">[0,0,0]</span></code>, <code class="docutils literal notranslate"><span class="pre">color</span> <span class="pre">=</span> <span class="pre">[0.1,0.9,0.1,1.]</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>classFunction</em>:</div>
<div class="line">add according nodes, objects and constraints for ObjectFFRFreducedOrder object to MainSystem mbs; use this function in order to use internal C++ functionality, which is approx. 10x faster than AddObjectFFRFreducedOrderWithUserFunctions(…)</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>input</em>:</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">exu</span></code>: the exudyn module</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">mbs</span></code>: a MainSystem object</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">positionRef</span></code>: reference position of created ObjectFFRFreducedOrder (set in rigid body node underlying to ObjectFFRFreducedOrder)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">initialVelocity</span></code>: initial velocity of created ObjectFFRFreducedOrder (set in rigid body node underlying to ObjectFFRFreducedOrder)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">rotationMatrixRef</span></code>: reference rotation of created ObjectFFRFreducedOrder (set in rigid body node underlying to ObjectFFRFreducedOrder); if [], it becomes the unit matrix</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">initialAngularVelocity</span></code>: initial angular velocity of created ObjectFFRFreducedOrder (set in rigid body node underlying to ObjectFFRFreducedOrder)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">massProportionalDamping</span></code>: Rayleigh damping factor for mass proportional damping, added to floating frame/modal coordinates only</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">stiffnessProportionalDamping</span></code>: Rayleigh damping factor for stiffness proportional damping, added to floating frame/modal coordinates only</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">gravity</span></code>: set [0,0,0] if no gravity shall be applied, or to the gravity vector otherwise</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">color</span></code>: provided as list of 4 RGBA values</div>
</div>
</li>
</ul>
<p>Relevant Examples (Ex) and TestModels (TM) with weblink to github:</p>
<blockquote>
<div><p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/CMSexampleCourse.py">CMSexampleCourse.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/netgenSTLtest.py">netgenSTLtest.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/NGsolveCMStutorial.py">NGsolveCMStutorial.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/NGsolveCraigBampton.py">NGsolveCraigBampton.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/NGsolvePistonEngine.py">NGsolvePistonEngine.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/abaqusImportTest.py">abaqusImportTest.py</a> (TM), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/NGsolveCrankShaftTest.py">NGsolveCrankShaftTest.py</a> (TM), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/objectFFRFreducedOrderAccelerations.py">objectFFRFreducedOrderAccelerations.py</a> (TM)</p>
</div></blockquote>
</section>
<section id="class-hcbstaticmodeselection-enum-in-module-fem">
<span id="sec-module-fem-class-hcbstaticmodeselection-enum"></span><h2>CLASS HCBstaticModeSelection(Enum) (in module FEM)<a class="headerlink" href="#class-hcbstaticmodeselection-enum-in-module-fem" title="Link to this heading"></a></h2>
<p><strong>class description</strong>:</p>
<blockquote>
<div><p>helper calss for function ComputeHurtyCraigBamptonModes, declaring some computation options. It offers the following options:</p>
<ul class="simple">
<li><p>allBoundaryNodes:     compute a single static mode for every boundary coordinate</p></li>
<li><p>RBE2:                 static modes only for rigid body motion at boundary nodes; using rigid boundary surfaces (additional stiffening)</p></li>
<li><p>RBE3:                 static modes only for rigid body motion at boundary nodes; averaged rigid body motion at boundary surfaces (leads to deformation at boundaries)</p></li>
<li><p>noStaticModes:        do not compute static modes, only eigen modes (not recommended; usually only for tests)</p></li>
</ul>
</div></blockquote>
</section>
<section id="class-feminterface-in-module-fem">
<span id="sec-module-fem-class-feminterface"></span><h2>CLASS FEMinterface (in module FEM)<a class="headerlink" href="#class-feminterface-in-module-fem" title="Link to this heading"></a></h2>
<p><strong>class description</strong>:</p>
<blockquote>
<div><p>general interface to different FEM / mesh imports and export to EXUDYN functions
use this class to import meshes from different meshing or FEM programs (NETGEN/NGsolve , ABAQUS, ANSYS, ..) and store it in a unique format
do mesh operations, compute eigenmodes and reduced basis, etc.
load/store the data efficiently with LoadFromFile(…), SaveToFile(…)  if import functions are slow
export to EXUDYN objects</p>
</div></blockquote>
</section>
<section id="sec-fem-feminterface-init">
<span id="id9"></span><h2>Class function: __init__<a class="headerlink" href="#sec-fem-feminterface-init" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L1564">__init__</a>(<code class="docutils literal notranslate"><span class="pre">self</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>classFunction</em>:</div>
<div class="line">initalize all data of the FEMinterface by, e.g., <code class="docutils literal notranslate"><span class="pre">fem</span> <span class="pre">=</span> <span class="pre">FEMinterface()</span></code></div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>example</em>:</div>
</div>
</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#**** this is not an example, just a description for internal variables ****</span>
<span class="c1">#default values for member variables stored internally in FEMinterface fem and typical structure:</span>
<span class="n">fem</span><span class="o">.</span><span class="n">nodes</span> <span class="o">=</span> <span class="p">{}</span>                 <span class="c1"># {&#39;Position&#39;:[[x0,y0,z0],...], &#39;RigidBodyRxyz&#39;:[[x0,y0,z0],...],  },...]                     #dictionary of different node lists</span>
<span class="n">fem</span><span class="o">.</span><span class="n">elements</span> <span class="o">=</span> <span class="p">[]</span>              <span class="c1"># [{&#39;Name&#39;:&#39;identifier&#39;, &#39;Tet4&#39;:[[n0,n1,n2,n3],...], &#39;Hex8&#39;:[[n0,...,n7],...],  },...]        #there may be several element sets</span>
<span class="n">fem</span><span class="o">.</span><span class="n">massMatrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span>    <span class="c1"># np.array([[r0,c0,value0],[r1,c1,value1], ... ])                                #currently only in SparseCSR format allowed!</span>
<span class="n">fem</span><span class="o">.</span><span class="n">stiffnessMatrix</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span> <span class="c1"># np.array([[r0,c0,value0],[r1,c1,value1], ... ])                                #currently only in SparseCSR format allowed!</span>
<span class="n">fem</span><span class="o">.</span><span class="n">surface</span> <span class="o">=</span> <span class="p">[]</span>               <span class="c1"># [{&#39;Name&#39;:&#39;identifier&#39;, &#39;Trigs&#39;:[[n0,n1,n2],...], &#39;Quads&#39;:[[n0,...,n3],...],  },...]           #surface with faces</span>
<span class="n">fem</span><span class="o">.</span><span class="n">nodeSets</span> <span class="o">=</span> <span class="p">[]</span>              <span class="c1"># [{&#39;Name&#39;:&#39;identifier&#39;, &#39;NodeNumbers&#39;:[n_0,...,n_ns], &#39;NodeWeights&#39;:[w_0,...,w_ns]},...]     #for boundary conditions, etc.</span>
<span class="n">fem</span><span class="o">.</span><span class="n">elementSets</span> <span class="o">=</span> <span class="p">[]</span>           <span class="c1"># [{&#39;Name&#39;:&#39;identifier&#39;, &#39;ElementNumbers&#39;:[n_0,...,n_ns]},...]                                #for different volumes, etc.</span>
<span class="n">fem</span><span class="o">.</span><span class="n">modeBasis</span> <span class="o">=</span> <span class="p">{}</span>             <span class="c1"># {&#39;matrix&#39;:[[Psi_00,Psi_01, ..., Psi_0m],...,[Psi_n0,Psi_n1, ..., Psi_nm]],&#39;type&#39;:&#39;NormalModes&#39;} #&#39;NormalModes&#39; are eigenmodes, &#39;HCBmodes&#39; are Craig-Bampton modes including static modes</span>
<span class="n">fem</span><span class="o">.</span><span class="n">eigenValues</span> <span class="o">=</span> <span class="p">[]</span>           <span class="c1"># [ev0, ev1, ...]                                                                             #eigenvalues according to eigenvectors in mode basis</span>
<span class="n">fem</span><span class="o">.</span><span class="n">postProcessingModes</span> <span class="o">=</span> <span class="p">{}</span>   <span class="c1"># {&#39;matrix&#39;:&lt;matrix containing stress components (xx,yy,zz,yz,xz,xy) in each column, rows are for every mesh node&gt;,&#39;outputVariableType&#39;:exudyn.OutputVariableType.StressLocal}</span>
</pre></div>
</div>
<hr class="docutils" />
</section>
<section id="sec-fem-feminterface-savetofile">
<span id="id10"></span><h2>Class function: SaveToFile<a class="headerlink" href="#sec-fem-feminterface-savetofile" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L1589">SaveToFile</a>(<code class="docutils literal notranslate"><span class="pre">self</span></code>, <code class="docutils literal notranslate"><span class="pre">fileName</span></code>, <code class="docutils literal notranslate"><span class="pre">fileVersion</span> <span class="pre">=</span> <span class="pre">13</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>classFunction</em>:</div>
<div class="line">save all data (nodes, elements, …) to a data filename; this function is much faster than the text-based import functions</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>input</em>:</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">fileName</span></code>: string for path and file name without ending ==&gt; “.npy” will be added</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">fileVersion</span></code>: FOR EXPERTS: this allows to store in older format, will be recovered when loading; must be integer; version must by &gt; 0</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>output</em>:</div>
<div class="line">stores file</div>
</div>
</li>
</ul>
<hr class="docutils" />
</section>
<section id="sec-fem-feminterface-loadfromfile">
<span id="id11"></span><h2>Class function: LoadFromFile<a class="headerlink" href="#sec-fem-feminterface-loadfromfile" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L1625">LoadFromFile</a>(<code class="docutils literal notranslate"><span class="pre">self</span></code>, <code class="docutils literal notranslate"><span class="pre">fileName</span></code>, <code class="docutils literal notranslate"><span class="pre">forceVersion</span> <span class="pre">=</span> <span class="pre">None</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>classFunction</em>:</div>
<div class="line">load all data (nodes, elements, …) from a data filename previously stored with SaveToFile(…).</div>
<div class="line">this function is much faster than the text-based import functions</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>input</em>:</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">fileName</span></code>: string for path and file name without ending ==&gt; “.npy” will be added</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">forceVersion</span></code>: FOR EXPERTS: this allows to store in older format, will be recovered when loading; must be integer; for old files, use forceVersion=0</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>output</em>:</div>
<div class="line">loads data into fem (note that existing values are not overwritten!); returns file version or None if version is not available</div>
</div>
</li>
</ul>
<hr class="docutils" />
</section>
<section id="class-function-importfromabaqusinputfile">
<span id="sec-fem-feminterface-importfromabaqusinputfile"></span><h2>Class function: ImportFromAbaqusInputFile<a class="headerlink" href="#class-function-importfromabaqusinputfile" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L1677">ImportFromAbaqusInputFile</a>(<code class="docutils literal notranslate"><span class="pre">self</span></code>, <code class="docutils literal notranslate"><span class="pre">fileName</span></code>, <code class="docutils literal notranslate"><span class="pre">typeName</span> <span class="pre">=</span> <span class="pre">'Part'</span></code>, <code class="docutils literal notranslate"><span class="pre">name</span> <span class="pre">=</span> <span class="pre">'Part-1'</span></code>, <code class="docutils literal notranslate"><span class="pre">verbose</span> <span class="pre">=</span> <span class="pre">False</span></code>, <code class="docutils literal notranslate"><span class="pre">createSurfaceTrigs</span> <span class="pre">=</span> <span class="pre">True</span></code>, <code class="docutils literal notranslate"><span class="pre">surfaceTrigsAll</span> <span class="pre">=</span> <span class="pre">False</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>classFunction</em>:</div>
<div class="line">import nodes and elements from Abaqus input file and create surface elements;</div>
<div class="line">node numbers in elements are converted from 1-based indices to python’s 0-based indices;</div>
<div class="line">This function can only import one part or instance; this means that you have to merge all</div>
<div class="line">instances or parts in order to use this function for import of flexible bodies for order reduction methods</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>input</em>:</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">fileName</span></code>: file name incl. path</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">typeName</span></code>: this is what is searched for regarding nodes and elements, see your .inp file</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">name</span></code>: if there are several parts, this name should address the according part name</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">verbose</span></code>: use True for some debug information</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">createSurfaceTrigs</span></code>: if True, triangles are created for visualization (triangles both for Tet and Hex elements)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">surfaceTrigsAll</span></code>: if False, visualization triangles are created at the surface; if True, surface triangles are created also for interior elements</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>output</em>:</div>
<div class="line">return node numbers as numpy array</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>notes</em>:</div>
<div class="line">only works for Hex8, Hex20, Tet4 and Tet10 (C3D4, C3D8, C3D8R, C3D10, C3D20, C3D20R) elements; some functionality is untested and works in limited cases; only works for one single part or instance</div>
</div>
</li>
</ul>
<hr class="docutils" />
</section>
<section id="class-function-readmassmatrixfromabaqus">
<span id="sec-fem-feminterface-readmassmatrixfromabaqus"></span><h2>Class function: ReadMassMatrixFromAbaqus<a class="headerlink" href="#class-function-readmassmatrixfromabaqus" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L1846">ReadMassMatrixFromAbaqus</a>(<code class="docutils literal notranslate"><span class="pre">self</span></code>, <code class="docutils literal notranslate"><span class="pre">fileName</span></code>, <code class="docutils literal notranslate"><span class="pre">type</span> <span class="pre">=</span> <span class="pre">'SparseRowColumnValue'</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>classFunction</em>:</div>
<div class="line">read mass matrix from compressed row text format (exported from Abaqus); in order to export system matrices, write the following lines in your Abaqus input file:</div>
<div class="line">*STEP</div>
<div class="line">*MATRIX GENERATE, STIFFNESS, MASS</div>
<div class="line">*MATRIX OUTPUT, STIFFNESS, MASS, FORMAT=COORDINATE</div>
<div class="line">*End Step</div>
</div>
</li>
</ul>
<hr class="docutils" />
</section>
<section id="class-function-readstiffnessmatrixfromabaqus">
<span id="sec-fem-feminterface-readstiffnessmatrixfromabaqus"></span><h2>Class function: ReadStiffnessMatrixFromAbaqus<a class="headerlink" href="#class-function-readstiffnessmatrixfromabaqus" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L1852">ReadStiffnessMatrixFromAbaqus</a>(<code class="docutils literal notranslate"><span class="pre">self</span></code>, <code class="docutils literal notranslate"><span class="pre">fileName</span></code>, <code class="docutils literal notranslate"><span class="pre">type</span> <span class="pre">=</span> <span class="pre">'SparseRowColumnValue'</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>classFunction</em>:</div>
<div class="line">read stiffness matrix from compressed row text format (exported from Abaqus)</div>
</div>
</li>
</ul>
<hr class="docutils" />
</section>
<section id="class-function-importmeshfromngsolve">
<span id="sec-fem-feminterface-importmeshfromngsolve"></span><h2>Class function: ImportMeshFromNGsolve<a class="headerlink" href="#class-function-importmeshfromngsolve" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L1877">ImportMeshFromNGsolve</a>(<code class="docutils literal notranslate"><span class="pre">self</span></code>, <code class="docutils literal notranslate"><span class="pre">mesh</span></code>, <code class="docutils literal notranslate"><span class="pre">density</span></code>, <code class="docutils literal notranslate"><span class="pre">youngsModulus</span></code>, <code class="docutils literal notranslate"><span class="pre">poissonsRatio</span></code>, <code class="docutils literal notranslate"><span class="pre">verbose</span> <span class="pre">=</span> <span class="pre">False</span></code>, <code class="docutils literal notranslate"><span class="pre">computeEigenmodes</span> <span class="pre">=</span> <span class="pre">False</span></code>, <code class="docutils literal notranslate"><span class="pre">meshOrder</span> <span class="pre">=</span> <span class="pre">1</span></code>, <code class="docutils literal notranslate"><span class="pre">**kwargs</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>classFunction</em>:</div>
<div class="line">import mesh from NETGEN/NGsolve and setup mechanical problem</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>input</em>:</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">mesh</span></code>: a previously created <code class="docutils literal notranslate"><span class="pre">ngs.mesh</span></code> (NGsolve mesh, see examples)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">youngsModulus</span></code>: Young’s modulus used for mechanical model</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">poissonsRatio</span></code>: Poisson’s ratio used for mechanical model</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">density</span></code>: density used for mechanical model</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">meshOrder</span></code>: use 1 for linear elements and 2 for second order elements (recommended to use 2 for much higher accuracy!)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">verbose</span></code>: set True to print out some status information</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>output</em>:</div>
<div class="line">creates according nodes, elements, in FEM and returns [bfM, bfK, fes] which are the (mass matrix M, stiffness matrix K) bilinear forms and the finite element space fes</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>author</em>:</div>
<div class="line">Johannes Gerstmayr, Joachim Schöberl</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>notes</em>:</div>
<div class="line">setting ngsolve.SetNumThreads(nt) you can select the number of treads that are used for assemble or other functionality with NGsolve functionality</div>
</div>
</li>
</ul>
<hr class="docutils" />
</section>
<section id="class-function-computeeigenmodesngsolve">
<span id="sec-fem-feminterface-computeeigenmodesngsolve"></span><h2>Class function: ComputeEigenmodesNGsolve<a class="headerlink" href="#class-function-computeeigenmodesngsolve" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L2062">ComputeEigenmodesNGsolve</a>(<code class="docutils literal notranslate"><span class="pre">self</span></code>, <code class="docutils literal notranslate"><span class="pre">bfM</span></code>, <code class="docutils literal notranslate"><span class="pre">bfK</span></code>, <code class="docutils literal notranslate"><span class="pre">nModes</span></code>, <code class="docutils literal notranslate"><span class="pre">maxEigensolveIterations</span> <span class="pre">=</span> <span class="pre">40</span></code>, <code class="docutils literal notranslate"><span class="pre">excludeRigidBodyModes</span> <span class="pre">=</span> <span class="pre">0</span></code>, <code class="docutils literal notranslate"><span class="pre">verbose</span> <span class="pre">=</span> <span class="pre">False</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>classFunction</em>:</div>
<div class="line">compute nModes smallest eigenvalues and eigenmodes from mass and stiffnessMatrix; store mode vectors in modeBasis, but exclude a number of ‘excludeRigidBodyModes’ rigid body modes from modeBasis; uses scipy for solution of generalized eigenvalue problem</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>input</em>:</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">nModes</span></code>: prescribe the number of modes to be computed; total computed modes are  (nModes+excludeRigidBodyModes), but only nModes with smallest absolute eigenvalues are considered and stored</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">excludeRigidBodyModes</span></code>: if rigid body modes are expected (in case of free-free modes), then this number specifies the number of eigenmodes to be excluded in the stored basis (usually 6 modes in 3D)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">maxEigensolveIterations</span></code>: maximum number of iterations for iterative eigensolver; default=40</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">verbose</span></code>: if True, output some relevant information during solving</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>output</em>:</div>
<div class="line">eigenmodes are stored internally in FEMinterface as ‘modeBasis’ and eigenvalues as ‘eigenValues’</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>author</em>:</div>
<div class="line">Johannes Gerstmayr, Joachim Schöberl</div>
</div>
</li>
</ul>
<hr class="docutils" />
</section>
<section id="class-function-computehurtycraigbamptonmodesngsolve">
<span id="sec-fem-feminterface-computehurtycraigbamptonmodesngsolve"></span><h2>Class function: ComputeHurtyCraigBamptonModesNGsolve<a class="headerlink" href="#class-function-computehurtycraigbamptonmodesngsolve" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L2104">ComputeHurtyCraigBamptonModesNGsolve</a>(<code class="docutils literal notranslate"><span class="pre">self</span></code>, <code class="docutils literal notranslate"><span class="pre">bfM</span></code>, <code class="docutils literal notranslate"><span class="pre">bfK</span></code>, <code class="docutils literal notranslate"><span class="pre">boundaryNodesList</span></code>, <code class="docutils literal notranslate"><span class="pre">nEigenModes</span></code>, <code class="docutils literal notranslate"><span class="pre">maxEigensolveIterations</span> <span class="pre">=</span> <span class="pre">40</span></code>, <code class="docutils literal notranslate"><span class="pre">verbose</span> <span class="pre">=</span> <span class="pre">False</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>classFunction</em>:</div>
<div class="line">compute static  and eigen modes based on Hurty-Craig-Bampton, for details see theory part Section <a class="reference internal" href="../../../index.html#sec-theory-cms"><span class="std std-ref">Theory: Component Mode Synthesis</span></a>. This function uses internal computational functionality of NGsolve and is often much faster than the scipy variant</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>input</em>:</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">bfM</span></code>: bilinearform for mass matrix as retured in ImportMeshFromNGsolve(…)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">bfK</span></code>: bilinearform for stiffness matrix as retured in ImportMeshFromNGsolve(…)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">boundaryNodesList</span></code>: [nodeList0, nodeList1, …] a list of node lists, each of them representing a set of ‘Position’ nodes for which a rigid body interface (displacement/rotation and force/torque) is created; NOTE THAT boundary nodes may not overlap between the different node lists (no duplicated node indices!)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">nEigenModes</span></code>: number of eigen modes in addition to static modes (may be zero for RBE2 computationMode); eigen modes are computed for the case where all rigid body motions at boundaries are fixed; only smallest nEigenModes absolute eigenvalues are considered</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">maxEigensolveIterations</span></code>: maximum number of iterations for iterative eigensolver; default=40</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">verbose</span></code>: if True, output some relevant information during solving</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>output</em>:</div>
<div class="line">stores computed modes in self.modeBasis and abs(eigenvalues) in self.eigenValues</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>author</em>:</div>
<div class="line">Johannes Gerstmayr, Joachim Schöberl</div>
</div>
</li>
</ul>
<hr class="docutils" />
</section>
<section id="class-function-computepostprocessingmodesngsolve">
<span id="sec-fem-feminterface-computepostprocessingmodesngsolve"></span><h2>Class function: ComputePostProcessingModesNGsolve<a class="headerlink" href="#class-function-computepostprocessingmodesngsolve" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L2245">ComputePostProcessingModesNGsolve</a>(<code class="docutils literal notranslate"><span class="pre">self</span></code>, <code class="docutils literal notranslate"><span class="pre">fes</span></code>, <code class="docutils literal notranslate"><span class="pre">material</span> <span class="pre">=</span> <span class="pre">0</span></code>, <code class="docutils literal notranslate"><span class="pre">outputVariableType</span> <span class="pre">=</span> <span class="pre">'OutputVariableType.StressLocal'</span></code>, <code class="docutils literal notranslate"><span class="pre">verbose</span> <span class="pre">=</span> <span class="pre">False</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>classFunction</em>:</div>
<div class="line">compute special stress or strain modes in order to enable visualization of stresses and strains in ObjectFFRFreducedOrder; takes a NGsolve fes as input and uses internal NGsolve methods to efficiently compute stresses or strains</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>input</em>:</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">fes</span></code>: finite element space as retured in ImportMeshFromNGsolve(…)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">material</span></code>: specify material properties for computation of stresses, using a material class, e.g. material = KirchhoffMaterial(Emodulus, nu, rho); not needed for strains (material = 0)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">outputVariableType</span></code>: specify either exudyn.OutputVariableType.StressLocal or exudyn.OutputVariableType.StrainLocal as the desired output variables</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>output</em>:</div>
<div class="line">post processing modes are stored in FEMinterface in local variable postProcessingModes as a dictionary, where ‘matrix’ represents the modes and ‘outputVariableType’ stores the type of mode as a OutputVariableType</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>author</em>:</div>
<div class="line">Johannes Gerstmayr, Joachim Schöberl</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>notes</em>:</div>
<div class="line">This function is implemented in Python and rather slow for larger meshes; for NGsolve / Netgen meshes, see the according ComputePostProcessingModesNGsolve function, which is usually much faster</div>
</div>
</li>
</ul>
<hr class="docutils" />
</section>
<section id="class-function-getmassmatrix">
<span id="sec-fem-feminterface-getmassmatrix"></span><h2>Class function: GetMassMatrix<a class="headerlink" href="#class-function-getmassmatrix" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L2320">GetMassMatrix</a>(<code class="docutils literal notranslate"><span class="pre">self</span></code>, <code class="docutils literal notranslate"><span class="pre">sparse</span> <span class="pre">=</span> <span class="pre">True</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>classFunction</em>:</div>
<div class="line">get sparse mass matrix in according format</div>
</div>
</li>
</ul>
<hr class="docutils" />
</section>
<section id="class-function-getstiffnessmatrix">
<span id="sec-fem-feminterface-getstiffnessmatrix"></span><h2>Class function: GetStiffnessMatrix<a class="headerlink" href="#class-function-getstiffnessmatrix" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L2327">GetStiffnessMatrix</a>(<code class="docutils literal notranslate"><span class="pre">self</span></code>, <code class="docutils literal notranslate"><span class="pre">sparse</span> <span class="pre">=</span> <span class="pre">True</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>classFunction</em>:</div>
<div class="line">get sparse stiffness matrix in according format</div>
</div>
</li>
</ul>
<hr class="docutils" />
</section>
<section id="class-function-numberofnodes">
<span id="sec-fem-feminterface-numberofnodes"></span><h2>Class function: NumberOfNodes<a class="headerlink" href="#class-function-numberofnodes" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L2334">NumberOfNodes</a>(<code class="docutils literal notranslate"><span class="pre">self</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>classFunction</em>:</div>
<div class="line">get total number of nodes</div>
</div>
</li>
</ul>
<hr class="docutils" />
</section>
<section id="class-function-getnodepositionsasarray">
<span id="sec-fem-feminterface-getnodepositionsasarray"></span><h2>Class function: GetNodePositionsAsArray<a class="headerlink" href="#class-function-getnodepositionsasarray" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L2346">GetNodePositionsAsArray</a>(<code class="docutils literal notranslate"><span class="pre">self</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>classFunction</em>:</div>
<div class="line">get node points as array; only possible, if there exists only one type of Position nodes</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>notes</em>:</div>
<div class="line">in order to obtain a list of certain node positions, see example</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>example</em>:</div>
</div>
</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">p</span><span class="o">=</span><span class="nf">GetNodePositionsAsArray</span><span class="p">(</span><span class="bp">self</span><span class="p">)[</span><span class="mi">42</span><span class="p">]</span> <span class="c1">#get node 42 position</span>
<span class="n">nodeList</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">13</span><span class="p">,</span><span class="mi">42</span><span class="p">]</span>
<span class="n">pArray</span><span class="o">=</span><span class="nf">GetNodePositionsAsArray</span><span class="p">(</span><span class="bp">self</span><span class="p">)[</span><span class="n">nodeList</span><span class="p">]</span> <span class="c1">#get np.array with positions of node indices</span>
</pre></div>
</div>
<hr class="docutils" />
</section>
<section id="class-function-getnodepositionsmean">
<span id="sec-fem-feminterface-getnodepositionsmean"></span><h2>Class function: GetNodePositionsMean<a class="headerlink" href="#class-function-getnodepositionsmean" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L2354">GetNodePositionsMean</a>(<code class="docutils literal notranslate"><span class="pre">self</span></code>, <code class="docutils literal notranslate"><span class="pre">nodeNumberList</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>classFunction</em>:</div>
<div class="line">get mean (average) position of nodes defined by list of node numbers</div>
</div>
</li>
</ul>
<hr class="docutils" />
</section>
<section id="class-function-numberofcoordinates">
<span id="sec-fem-feminterface-numberofcoordinates"></span><h2>Class function: NumberOfCoordinates<a class="headerlink" href="#class-function-numberofcoordinates" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L2361">NumberOfCoordinates</a>(<code class="docutils literal notranslate"><span class="pre">self</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>classFunction</em>:</div>
<div class="line">get number of total nodal coordinates</div>
</div>
</li>
</ul>
<hr class="docutils" />
</section>
<section id="class-function-getnodeatpoint">
<span id="sec-fem-feminterface-getnodeatpoint"></span><h2>Class function: GetNodeAtPoint<a class="headerlink" href="#class-function-getnodeatpoint" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L2369">GetNodeAtPoint</a>(<code class="docutils literal notranslate"><span class="pre">self</span></code>, <code class="docutils literal notranslate"><span class="pre">point</span></code>, <code class="docutils literal notranslate"><span class="pre">tolerance</span> <span class="pre">=</span> <span class="pre">1e-5</span></code>, <code class="docutils literal notranslate"><span class="pre">raiseException</span> <span class="pre">=</span> <span class="pre">True</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>classFunction</em>:</div>
<div class="line">get node number for node at given point, e.g. p=[0.1,0.5,-0.2], using a tolerance (+/-) if coordinates are available only with reduced accuracy</div>
<div class="line">if not found, it returns an invalid index</div>
</div>
</li>
</ul>
<hr class="docutils" />
</section>
<section id="class-function-getnodesinplane">
<span id="sec-fem-feminterface-getnodesinplane"></span><h2>Class function: GetNodesInPlane<a class="headerlink" href="#class-function-getnodesinplane" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L2385">GetNodesInPlane</a>(<code class="docutils literal notranslate"><span class="pre">self</span></code>, <code class="docutils literal notranslate"><span class="pre">point</span></code>, <code class="docutils literal notranslate"><span class="pre">normal</span></code>, <code class="docutils literal notranslate"><span class="pre">tolerance</span> <span class="pre">=</span> <span class="pre">1e-5</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>classFunction</em>:</div>
<div class="line">get node numbers in plane defined by point p and (normalized) normal vector n using a tolerance for the distance to the plane</div>
<div class="line">if not found, it returns an empty list</div>
</div>
</li>
</ul>
<hr class="docutils" />
</section>
<section id="class-function-getnodesincube">
<span id="sec-fem-feminterface-getnodesincube"></span><h2>Class function: GetNodesInCube<a class="headerlink" href="#class-function-getnodesincube" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L2401">GetNodesInCube</a>(<code class="docutils literal notranslate"><span class="pre">self</span></code>, <code class="docutils literal notranslate"><span class="pre">pMin</span></code>, <code class="docutils literal notranslate"><span class="pre">pMax</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>classFunction</em>:</div>
<div class="line">get node numbers in cube, given by pMin and pMax, containing the minimum and maximum x, y, and z coordinates</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>output</em>:</div>
<div class="line">returns list of nodes; if no nodes found, return an empty list</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>example</em>:</div>
</div>
</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">nList</span> <span class="o">=</span> <span class="nf">GetNodesInCube</span><span class="p">([</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mf">0.2</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">0.5</span><span class="p">])</span>
</pre></div>
</div>
<hr class="docutils" />
</section>
<section id="class-function-getnodesonline">
<span id="sec-fem-feminterface-getnodesonline"></span><h2>Class function: GetNodesOnLine<a class="headerlink" href="#class-function-getnodesonline" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L2416">GetNodesOnLine</a>(<code class="docutils literal notranslate"><span class="pre">self</span></code>, <code class="docutils literal notranslate"><span class="pre">p1</span></code>, <code class="docutils literal notranslate"><span class="pre">p2</span></code>, <code class="docutils literal notranslate"><span class="pre">tolerance</span> <span class="pre">=</span> <span class="pre">1e-5</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>classFunction</em>:</div>
<div class="line">get node numbers lying on line defined by points p1 and p2 and tolerance, which is accepted for points slightly outside the surface</div>
</div>
</li>
</ul>
<hr class="docutils" />
</section>
<section id="class-function-getnodesoncylinder">
<span id="sec-fem-feminterface-getnodesoncylinder"></span><h2>Class function: GetNodesOnCylinder<a class="headerlink" href="#class-function-getnodesoncylinder" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L2422">GetNodesOnCylinder</a>(<code class="docutils literal notranslate"><span class="pre">self</span></code>, <code class="docutils literal notranslate"><span class="pre">p1</span></code>, <code class="docutils literal notranslate"><span class="pre">p2</span></code>, <code class="docutils literal notranslate"><span class="pre">radius</span></code>, <code class="docutils literal notranslate"><span class="pre">tolerance</span> <span class="pre">=</span> <span class="pre">1e-5</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>classFunction</em>:</div>
<div class="line">get node numbers lying on cylinder surface; cylinder defined by cylinder axes (points p1 and p2),</div>
<div class="line">cylinder radius and tolerance, which is accepted for points slightly outside the surface</div>
<div class="line">if not found, it returns an empty list</div>
</div>
</li>
</ul>
<hr class="docutils" />
</section>
<section id="class-function-getnodesoncircle">
<span id="sec-fem-feminterface-getnodesoncircle"></span><h2>Class function: GetNodesOnCircle<a class="headerlink" href="#class-function-getnodesoncircle" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L2450">GetNodesOnCircle</a>(<code class="docutils literal notranslate"><span class="pre">self</span></code>, <code class="docutils literal notranslate"><span class="pre">point</span></code>, <code class="docutils literal notranslate"><span class="pre">normal</span></code>, <code class="docutils literal notranslate"><span class="pre">r</span></code>, <code class="docutils literal notranslate"><span class="pre">tolerance</span> <span class="pre">=</span> <span class="pre">1e-5</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>classFunction</em>:</div>
<div class="line">get node numbers lying on a circle, by point p, (normalized) normal vector n (which is the axis of the circle) and radius r</div>
<div class="line">using a tolerance for the distance to the plane</div>
<div class="line">if not found, it returns an empty list</div>
</div>
</li>
</ul>
<hr class="docutils" />
</section>
<section id="class-function-getnodeweightsfromsurfaceareas">
<span id="sec-fem-feminterface-getnodeweightsfromsurfaceareas"></span><h2>Class function: GetNodeWeightsFromSurfaceAreas<a class="headerlink" href="#class-function-getnodeweightsfromsurfaceareas" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L2470">GetNodeWeightsFromSurfaceAreas</a>(<code class="docutils literal notranslate"><span class="pre">self</span></code>, <code class="docutils literal notranslate"><span class="pre">nodeList</span></code>, <code class="docutils literal notranslate"><span class="pre">normalizeWeights</span> <span class="pre">=</span> <span class="pre">True</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>classFunction</em>:</div>
<div class="line">return list of node weights based on surface triangle areas; surface triangles are identified as such for which all nodes of a triangle are on the surface</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">**nodes</span></code>: requires that surface triangles have been already built during import of finite element mesh, or by calling VolumeToSurfaceElements!</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>input</em>:</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">nodeList</span></code>: list of local (Position) node numbers</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">normalizeWeights</span></code>: if True, weights are normalized to sum(weights)==1; otherwise, returned list contains areas according to nodes per</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>output</em>:</div>
<div class="line">numpy array with weights according to indices in node list</div>
</div>
</li>
</ul>
<hr class="docutils" />
</section>
<section id="class-function-getsurfacetriangles">
<span id="sec-fem-feminterface-getsurfacetriangles"></span><h2>Class function: GetSurfaceTriangles<a class="headerlink" href="#class-function-getsurfacetriangles" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L2522">GetSurfaceTriangles</a>(<code class="docutils literal notranslate"><span class="pre">self</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>classFunction</em>:</div>
<div class="line">return surface trigs as node number list (for drawing in EXUDYN and for node weights)</div>
</div>
</li>
</ul>
<hr class="docutils" />
</section>
<section id="class-function-volumetosurfaceelements">
<span id="sec-fem-feminterface-volumetosurfaceelements"></span><h2>Class function: VolumeToSurfaceElements<a class="headerlink" href="#class-function-volumetosurfaceelements" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L2532">VolumeToSurfaceElements</a>(<code class="docutils literal notranslate"><span class="pre">self</span></code>, <code class="docutils literal notranslate"><span class="pre">verbose</span> <span class="pre">=</span> <span class="pre">False</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>classFunction</em>:</div>
<div class="line">generate surface elements from volume elements</div>
<div class="line">stores the surface in self.surface</div>
<div class="line">only works for one element list and only for element types ‘Hex8’, ‘Hex20’, ‘Tet4’ and ‘Tet10’</div>
</div>
</li>
</ul>
<hr class="docutils" />
</section>
<section id="class-function-getgyroscopicmatrix">
<span id="sec-fem-feminterface-getgyroscopicmatrix"></span><h2>Class function: GetGyroscopicMatrix<a class="headerlink" href="#class-function-getgyroscopicmatrix" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L2661">GetGyroscopicMatrix</a>(<code class="docutils literal notranslate"><span class="pre">self</span></code>, <code class="docutils literal notranslate"><span class="pre">rotationAxis</span> <span class="pre">=</span> <span class="pre">2</span></code>, <code class="docutils literal notranslate"><span class="pre">sparse</span> <span class="pre">=</span> <span class="pre">True</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>classFunction</em>:</div>
<div class="line">get gyroscopic matrix in according format; rotationAxis=[0,1,2] = [x,y,z]</div>
</div>
</li>
</ul>
<hr class="docutils" />
</section>
<section id="class-function-scalemassmatrix">
<span id="sec-fem-feminterface-scalemassmatrix"></span><h2>Class function: ScaleMassMatrix<a class="headerlink" href="#class-function-scalemassmatrix" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L2690">ScaleMassMatrix</a>(<code class="docutils literal notranslate"><span class="pre">self</span></code>, <code class="docutils literal notranslate"><span class="pre">factor</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>classFunction</em>:</div>
<div class="line">scale (=multiply) mass matrix with factor</div>
</div>
</li>
</ul>
<hr class="docutils" />
</section>
<section id="class-function-scalestiffnessmatrix">
<span id="sec-fem-feminterface-scalestiffnessmatrix"></span><h2>Class function: ScaleStiffnessMatrix<a class="headerlink" href="#class-function-scalestiffnessmatrix" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L2694">ScaleStiffnessMatrix</a>(<code class="docutils literal notranslate"><span class="pre">self</span></code>, <code class="docutils literal notranslate"><span class="pre">factor</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>classFunction</em>:</div>
<div class="line">scale (=multiply) stiffness matrix with factor</div>
</div>
</li>
</ul>
<hr class="docutils" />
</section>
<section id="class-function-addelasticsupportatnode">
<span id="sec-fem-feminterface-addelasticsupportatnode"></span><h2>Class function: AddElasticSupportAtNode<a class="headerlink" href="#class-function-addelasticsupportatnode" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L2700">AddElasticSupportAtNode</a>(<code class="docutils literal notranslate"><span class="pre">self</span></code>, <code class="docutils literal notranslate"><span class="pre">nodeNumber</span></code>, <code class="docutils literal notranslate"><span class="pre">springStiffness</span> <span class="pre">=</span> <span class="pre">[1e8,1e8,1e8]</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>classFunction</em>:</div>
<div class="line">modify stiffness matrix to add elastic support (joint, etc.) to a node; nodeNumber zero based (as everywhere in the code…)</div>
<div class="line">springStiffness must have length according to the node size</div>
</div>
</li>
</ul>
<hr class="docutils" />
</section>
<section id="class-function-addnodemass">
<span id="sec-fem-feminterface-addnodemass"></span><h2>Class function: AddNodeMass<a class="headerlink" href="#class-function-addnodemass" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L2716">AddNodeMass</a>(<code class="docutils literal notranslate"><span class="pre">self</span></code>, <code class="docutils literal notranslate"><span class="pre">nodeNumber</span></code>, <code class="docutils literal notranslate"><span class="pre">addedMass</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>classFunction</em>:</div>
<div class="line">modify mass matrix by adding a mass to a certain node, modifying directly the mass matrix</div>
</div>
</li>
</ul>
<hr class="docutils" />
</section>
<section id="class-function-createlinearfemobjectgenericode2">
<span id="sec-fem-feminterface-createlinearfemobjectgenericode2"></span><h2>Class function: CreateLinearFEMObjectGenericODE2<a class="headerlink" href="#class-function-createlinearfemobjectgenericode2" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L2736">CreateLinearFEMObjectGenericODE2</a>(<code class="docutils literal notranslate"><span class="pre">self</span></code>, <code class="docutils literal notranslate"><span class="pre">mbs</span></code>, <code class="docutils literal notranslate"><span class="pre">color</span> <span class="pre">=</span> <span class="pre">[0.9,0.4,0.4,1.]</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>classFunction</em>:</div>
<div class="line">create GenericODE2 object out of (linear) FEM model; uses always the sparse matrix mode, independent of the solver settings; this model can be directly used inside the multibody system as a static or dynamic FEM subsystem undergoing small deformations; computation is several magnitudes slower than ObjectFFRFreducedOrder</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>input</em>:</div>
<div class="line">mbs: multibody system to which the GenericODE2 is added</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>output</em>:</div>
<div class="line">return list [oGenericODE2, nodeList] containing object number of GenericODE2 as well as the list of mbs node numbers of all NodePoint nodes</div>
</div>
</li>
</ul>
<hr class="docutils" />
</section>
<section id="class-function-createnonlinearfemobjectgenericode2ngsolve">
<span id="sec-fem-feminterface-createnonlinearfemobjectgenericode2ngsolve"></span><h2>Class function: CreateNonlinearFEMObjectGenericODE2NGsolve<a class="headerlink" href="#class-function-createnonlinearfemobjectgenericode2ngsolve" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L2779">CreateNonlinearFEMObjectGenericODE2NGsolve</a>(<code class="docutils literal notranslate"><span class="pre">self</span></code>, <code class="docutils literal notranslate"><span class="pre">mbs</span></code>, <code class="docutils literal notranslate"><span class="pre">mesh</span></code>, <code class="docutils literal notranslate"><span class="pre">density</span></code>, <code class="docutils literal notranslate"><span class="pre">youngsModulus</span></code>, <code class="docutils literal notranslate"><span class="pre">poissonsRatio</span></code>, <code class="docutils literal notranslate"><span class="pre">meshOrder</span> <span class="pre">=</span> <span class="pre">1</span></code>, <code class="docutils literal notranslate"><span class="pre">color</span> <span class="pre">=</span> <span class="pre">[0.9,0.4,0.4,1.]</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>classFunction</em>:</div>
<div class="line">create GenericODE2 object fully nonlinear FEM model using NGsolve; uses always the sparse matrix mode, independent of the solver settings; this model can be directly used inside the multibody system as a static or dynamic nonlinear FEM subsystem undergoing large deformations; computation is several magnitudes slower than ObjectFFRFreducedOrder</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>input</em>:</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">mbs</span></code>: multibody system to which the GenericODE2 is added</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">mesh</span></code>: a previously created <code class="docutils literal notranslate"><span class="pre">ngs.mesh</span></code> (NGsolve mesh, see examples)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">youngsModulus</span></code>: Young’s modulus used for mechanical model</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">poissonsRatio</span></code>: Poisson’s ratio used for mechanical model</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">density</span></code>: density used for mechanical model</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">meshOrder</span></code>: use 1 for linear elements and 2 for second order elements (recommended to use 2 for much higher accuracy!)</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>output</em>:</div>
<div class="line">return list [oGenericODE2, nodeList] containing object number of GenericODE2 as well as the list of mbs node numbers of all NodePoint nodes</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>author</em>:</div>
<div class="line">Johannes Gerstmayr, Joachim Schöberl</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>notes</em>:</div>
<div class="line">The interface to NETGEN/NGsolve has been created together with Joachim Schöberl, main developer</div>
<div class="line">of NETGEN/NGsolve ; Thank’s a lot!</div>
<div class="line">download NGsolve at: <a class="reference external" href="https://ngsolve.org/">https://ngsolve.org/</a></div>
<div class="line">NGsolve needs Python 3.7 (64bit) ==&gt; use according EXUDYN version!</div>
<div class="line">note that node/element indices in the NGsolve mesh are 1-based and need to be converted to 0-base!</div>
</div>
</li>
</ul>
<hr class="docutils" />
</section>
<section id="class-function-computeeigenmodes">
<span id="sec-fem-feminterface-computeeigenmodes"></span><h2>Class function: ComputeEigenmodes<a class="headerlink" href="#class-function-computeeigenmodes" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L2885">ComputeEigenmodes</a>(<code class="docutils literal notranslate"><span class="pre">self</span></code>, <code class="docutils literal notranslate"><span class="pre">nModes</span></code>, <code class="docutils literal notranslate"><span class="pre">excludeRigidBodyModes</span> <span class="pre">=</span> <span class="pre">0</span></code>, <code class="docutils literal notranslate"><span class="pre">useSparseSolver</span> <span class="pre">=</span> <span class="pre">True</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>classFunction</em>:</div>
<div class="line">compute nModes smallest eigenvalues and eigenmodes from mass and stiffnessMatrix; store mode vectors in modeBasis, but exclude a number of ‘excludeRigidBodyModes’ rigid body modes from modeBasis; uses scipy for solution of generalized eigenvalue problem</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>input</em>:</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">nModes</span></code>: prescribe the number of modes to be computed; total computed modes are  (nModes+excludeRigidBodyModes), but only nModes with smallest absolute eigenvalues are considered and stored</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">excludeRigidBodyModes</span></code>: if rigid body modes are expected (in case of free-free modes), then this number specifies the number of eigenmodes to be excluded in the stored basis (usually 6 modes in 3D)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">useSparseSolver</span></code>: for larger systems, the sparse solver needs to be used, which iteratively solves the problem and uses a random number generator (internally in ARPACK): therefore, results are not fully repeatable!!!</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>output</em>:</div>
<div class="line">eigenmodes are stored internally in FEMinterface as ‘modeBasis’ and eigenvalues as ‘eigenValues’</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>notes</em>:</div>
<div class="line">for NGsolve / Netgen meshes, see the according ComputeEigenmodesNGsolve function, which is usually much faster</div>
</div>
</li>
</ul>
<hr class="docutils" />
</section>
<section id="class-function-computeeigenmodeswithboundarynodes">
<span id="sec-fem-feminterface-computeeigenmodeswithboundarynodes"></span><h2>Class function: ComputeEigenModesWithBoundaryNodes<a class="headerlink" href="#class-function-computeeigenmodeswithboundarynodes" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L2929">ComputeEigenModesWithBoundaryNodes</a>(<code class="docutils literal notranslate"><span class="pre">self</span></code>, <code class="docutils literal notranslate"><span class="pre">boundaryNodes</span></code>, <code class="docutils literal notranslate"><span class="pre">nEigenModes</span></code>, <code class="docutils literal notranslate"><span class="pre">useSparseSolver</span> <span class="pre">=</span> <span class="pre">True</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>classFunction</em>:</div>
<div class="line">compute eigenmodes, using a set of boundary nodes that are all fixed; very similar to ComputeEigenmodes, but with additional definition of (fixed) boundary nodes.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>input</em>:</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">boundaryNodes</span></code>: a list of boundary node indices, refering to ‘Position’ type nodes in FEMinterface; all coordinates of these nodes are fixed for the computation of the modes</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">nEigenModes</span></code>: prescribe the number of modes to be computed; only nEigenModes with smallest abs(eigenvalues) are considered and stored</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">useSparseSolver</span></code>: [yet NOT IMPLEMENTED] for larger systems, the sparse solver needs to be used, which iteratively solves the problem and uses a random number generator (internally in ARPACK): therefore, results are not fully repeatable!!!</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>output</em>:</div>
<div class="line">eigenmodes are stored internally in FEMinterface as ‘modeBasis’ and eigenvalues as ‘eigenValues’</div>
</div>
</li>
</ul>
<hr class="docutils" />
</section>
<section id="class-function-computehurtycraigbamptonmodes">
<span id="sec-fem-feminterface-computehurtycraigbamptonmodes"></span><h2>Class function: ComputeHurtyCraigBamptonModes<a class="headerlink" href="#class-function-computehurtycraigbamptonmodes" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L3014">ComputeHurtyCraigBamptonModes</a>(<code class="docutils literal notranslate"><span class="pre">self</span></code>, <code class="docutils literal notranslate"><span class="pre">boundaryNodesList</span></code>, <code class="docutils literal notranslate"><span class="pre">nEigenModes</span></code>, <code class="docutils literal notranslate"><span class="pre">useSparseSolver</span> <span class="pre">=</span> <span class="pre">True</span></code>, <code class="docutils literal notranslate"><span class="pre">computationMode</span> <span class="pre">=</span> <span class="pre">HCBstaticModeSelection.RBE2</span></code>, <code class="docutils literal notranslate"><span class="pre">boundaryNodesWeights</span> <span class="pre">=</span> <span class="pre">[]</span></code>, <code class="docutils literal notranslate"><span class="pre">excludeRigidBodyMotion</span> <span class="pre">=</span> <span class="pre">True</span></code>, <code class="docutils literal notranslate"><span class="pre">RBE3secondMomentOfAreaWeighting</span> <span class="pre">=</span> <span class="pre">True</span></code>, <code class="docutils literal notranslate"><span class="pre">verboseMode</span> <span class="pre">=</span> <span class="pre">False</span></code>, <code class="docutils literal notranslate"><span class="pre">timerTreshold</span> <span class="pre">=</span> <span class="pre">20000</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>classFunction</em>:</div>
<div class="line">compute static  and eigen modes based on Hurty-Craig-Bampton, for details see theory part Section <a class="reference internal" href="../../../index.html#sec-theory-cms"><span class="std std-ref">Theory: Component Mode Synthesis</span></a>. Note that this function may need significant time, depending on your hardware, but 50.000 nodes will require approx. 1-2 minutes and more nodes typically raise time more than linearly.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>input</em>:</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">boundaryNodesList</span></code>: [nodeList0, nodeList1, …] a list of node lists, each of them representing a set of ‘Position’ nodes for which a rigid body interface (displacement/rotation and force/torque) is created; NOTE THAT boundary nodes may not overlap between the different node lists (no duplicated node indices!)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">nEigenModes</span></code>: number of eigen modes in addition to static modes (may be zero for RBE2/RBE3 computationMode); eigen modes are computed for the case where all rigid body motions at boundaries are fixed; only smallest nEigenModes absolute eigenvalues are considered</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">useSparseSolver</span></code>: for more than approx.~500 nodes, it is recommended to use the sparse solver; dense mode not available for RBE3</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">computationMode</span></code>: see class HCBstaticModeSelection for available modes; select RBE2 / RBE3 as standard, which is both efficient and accurate and which uses rigid-body-interfaces (6 independent modes) per boundary; RBE3 mode uses singular value decomposition, which requires full matrices for boundary nodes; this becomes slow in particular if the number of a single boundary node set gets larger than 500 nodes</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">boundaryNodesWeights</span></code>: according list of weights with same order as boundaryNodesList, as returned e.g. by FEMinterface.GetNodeWeightsFromSurfaceAreas(…)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">excludeRigidBodyMotion</span></code>: if True (recommended), the first set of boundary modes is eliminated, which defines the reference conditions for the FFRF object</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">RBE3secondMomentOfAreaWeighting</span></code>: if True, the weighting of RBE3 boundaries is done according to second moment of area; if False, the more conventional (but less appropriate) quadratic distance to reference point weighting is used</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">verboseMode</span></code>: if True, some additional output is printed</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">timerTreshold</span></code>: for more DOF than this number, CPU times are printed even with verboseMode=False</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>output</em>:</div>
<div class="line">stores computed modes in self.modeBasis and abs(eigenvalues) in self.eigenValues</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>notes</em>:</div>
<div class="line">for NGsolve / Netgen meshes, see the according ComputeHurtyCraigBamptonModesNGsolve function, which is usually much faster - currently only implemented for RBE2 case</div>
</div>
</li>
</ul>
<hr class="docutils" />
</section>
<section id="class-function-geteigenfrequencieshz">
<span id="sec-fem-feminterface-geteigenfrequencieshz"></span><h2>Class function: GetEigenFrequenciesHz<a class="headerlink" href="#class-function-geteigenfrequencieshz" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L3422">GetEigenFrequenciesHz</a>(<code class="docutils literal notranslate"><span class="pre">self</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>classFunction</em>:</div>
<div class="line">return list of eigenvalues in Hz of previously computed eigenmodes</div>
</div>
</li>
</ul>
<hr class="docutils" />
</section>
<section id="class-function-computepostprocessingmodes">
<span id="sec-fem-feminterface-computepostprocessingmodes"></span><h2>Class function: ComputePostProcessingModes<a class="headerlink" href="#class-function-computepostprocessingmodes" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L3482">ComputePostProcessingModes</a>(<code class="docutils literal notranslate"><span class="pre">self</span></code>, <code class="docutils literal notranslate"><span class="pre">material</span> <span class="pre">=</span> <span class="pre">0</span></code>, <code class="docutils literal notranslate"><span class="pre">outputVariableType</span> <span class="pre">=</span> <span class="pre">'OutputVariableType.StressLocal'</span></code>, <code class="docutils literal notranslate"><span class="pre">numberOfThreads</span> <span class="pre">=</span> <span class="pre">1</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>classFunction</em>:</div>
<div class="line">compute special stress or strain modes in order to enable visualization of stresses and strains in ObjectFFRFreducedOrder;</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>input</em>:</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">material</span></code>: specify material properties for computation of stresses, using a material class, e.g. material = KirchhoffMaterial(Emodulus, nu, rho); not needed for strains</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">outputVariableType</span></code>: specify either exudyn.OutputVariableType.StressLocal or exudyn.OutputVariableType.StrainLocal as the desired output variables</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">numberOfThreads</span></code>: if numberOfThreads=1, it uses single threaded computation; if numberOfThreads&gt;1, it uses the multiprocessing pools functionality, which requires that all code in your main file must be encapsulated within an if clause “if __name__ == ‘__main__’:”, see examples; if numberOfThreads==-1, it uses all threads/CPUs available</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>output</em>:</div>
<div class="line">post processing modes are stored in FEMinterface in local variable postProcessingModes as a dictionary, where ‘matrix’ represents the modes and ‘outputVariableType’ stores the type of mode as a OutputVariableType</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>notes</em>:</div>
<div class="line">This function is implemented in Python and rather slow for larger meshes; for NGsolve / Netgen meshes, see the according ComputePostProcessingModesNGsolve function, which is usually much faster</div>
</div>
</li>
</ul>
<hr class="docutils" />
</section>
<section id="class-function-computecampbelldiagram">
<span id="sec-fem-feminterface-computecampbelldiagram"></span><h2>Class function: ComputeCampbellDiagram<a class="headerlink" href="#class-function-computecampbelldiagram" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L3600">ComputeCampbellDiagram</a>(<code class="docutils literal notranslate"><span class="pre">self</span></code>, <code class="docutils literal notranslate"><span class="pre">terminalFrequency</span></code>, <code class="docutils literal notranslate"><span class="pre">nEigenfrequencies</span> <span class="pre">=</span> <span class="pre">10</span></code>, <code class="docutils literal notranslate"><span class="pre">frequencySteps</span> <span class="pre">=</span> <span class="pre">25</span></code>, <code class="docutils literal notranslate"><span class="pre">rotationAxis</span> <span class="pre">=</span> <span class="pre">2</span></code>, <code class="docutils literal notranslate"><span class="pre">plotDiagram</span> <span class="pre">=</span> <span class="pre">False</span></code>, <code class="docutils literal notranslate"><span class="pre">verbose</span> <span class="pre">=</span> <span class="pre">False</span></code>, <code class="docutils literal notranslate"><span class="pre">useCorotationalFrame</span> <span class="pre">=</span> <span class="pre">False</span></code>, <code class="docutils literal notranslate"><span class="pre">useSparseSolver</span> <span class="pre">=</span> <span class="pre">False</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>classFunction</em>:</div>
<div class="line">compute Campbell diagram for given mechanical system</div>
<div class="line">create a first order system Axd + Bx = 0 with x= [q,qd]’ and compute eigenvalues</div>
<div class="line">takes mass M, stiffness K and gyroscopic matrix G from FEMinterface</div>
<div class="line">currently only uses dense matrices, so it is limited to approx. 5000 unknowns!</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>input</em>:</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">terminalFrequency</span></code>: frequency in Hz, up to which the campbell diagram is computed</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">nEigenfrequencies</span></code>: gives the number of computed eigenfrequencies(modes), in addition to the rigid body mode 0</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">frequencySteps</span></code>: gives the number of increments (gives frequencySteps+1 total points in campbell diagram)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">rotationAxis</span></code>:[0,1,2] = [x,y,z] provides rotation axis</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">plotDiagram</span></code>: if True, plots diagram for nEigenfrequencies befor terminating</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">verbose</span></code>: if True, shows progress of computation; if verbose=2, prints also eigenfrequencies</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">useCorotationalFrame</span></code>: if False, the classic rotor dynamics formulation for rotationally-symmetric rotors is used, where the rotor can be understood in a Lagrangian-Eulerian manner: the rotation is represented by an additional (Eulerian) velocity in rotation direction; if True, the corotational frame is used, which gives a factor 2 in the gyroscopic matrix and can be used for non-symmetric rotors as well</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">useSparseSolver</span></code>: for larger systems, the sparse solver needs to be used for creation of system matrices and for the eigenvalue solver (uses a random number generator internally in ARPACK, therefore, results are not fully repeatable!!!)</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>output</em>:</div>
<div class="line">[listFrequencies, campbellFrequencies]</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">listFrequencies</span></code>: list of computed frequencies</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">campbellFrequencies</span></code>: array of campbell frequencies per eigenfrequency of system</div>
</div>
</li>
</ul>
<hr class="docutils" />
</section>
<section id="class-function-checkconsistency">
<span id="sec-fem-feminterface-checkconsistency"></span><h2>Class function: CheckConsistency<a class="headerlink" href="#class-function-checkconsistency" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L3785">CheckConsistency</a>(<code class="docutils literal notranslate"><span class="pre">self</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>classFunction</em>:</div>
<div class="line">perform some consistency checks</div>
</div>
</li>
</ul>
<hr class="docutils" />
</section>
<section id="class-function-readmassmatrixfromansys">
<span id="sec-fem-feminterface-readmassmatrixfromansys"></span><h2>Class function: ReadMassMatrixFromAnsys<a class="headerlink" href="#class-function-readmassmatrixfromansys" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L3809">ReadMassMatrixFromAnsys</a>(<code class="docutils literal notranslate"><span class="pre">self</span></code>, <code class="docutils literal notranslate"><span class="pre">fileName</span></code>, <code class="docutils literal notranslate"><span class="pre">dofMappingVectorFile</span></code>, <code class="docutils literal notranslate"><span class="pre">sparse</span> <span class="pre">=</span> <span class="pre">True</span></code>, <code class="docutils literal notranslate"><span class="pre">verbose</span> <span class="pre">=</span> <span class="pre">False</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>classFunction</em>:</div>
<div class="line">read mass matrix from CSV format (exported from Ansys)</div>
</div>
</li>
</ul>
<hr class="docutils" />
</section>
<section id="class-function-readstiffnessmatrixfromansys">
<span id="sec-fem-feminterface-readstiffnessmatrixfromansys"></span><h2>Class function: ReadStiffnessMatrixFromAnsys<a class="headerlink" href="#class-function-readstiffnessmatrixfromansys" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L3823">ReadStiffnessMatrixFromAnsys</a>(<code class="docutils literal notranslate"><span class="pre">self</span></code>, <code class="docutils literal notranslate"><span class="pre">fileName</span></code>, <code class="docutils literal notranslate"><span class="pre">dofMappingVectorFile</span></code>, <code class="docutils literal notranslate"><span class="pre">sparse</span> <span class="pre">=</span> <span class="pre">True</span></code>, <code class="docutils literal notranslate"><span class="pre">verbose</span> <span class="pre">=</span> <span class="pre">False</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>classFunction</em>:</div>
<div class="line">read stiffness matrix from CSV format (exported from Ansys)</div>
</div>
</li>
</ul>
<hr class="docutils" />
</section>
<section id="class-function-readnodalcoordinatesfromansys">
<span id="sec-fem-feminterface-readnodalcoordinatesfromansys"></span><h2>Class function: ReadNodalCoordinatesFromAnsys<a class="headerlink" href="#class-function-readnodalcoordinatesfromansys" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L3837">ReadNodalCoordinatesFromAnsys</a>(<code class="docutils literal notranslate"><span class="pre">self</span></code>, <code class="docutils literal notranslate"><span class="pre">fileName</span></code>, <code class="docutils literal notranslate"><span class="pre">verbose</span> <span class="pre">=</span> <span class="pre">False</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>classFunction</em>:</div>
<div class="line">read nodal coordinates (exported from Ansys as .txt-File)</div>
</div>
</li>
</ul>
<hr class="docutils" />
</section>
<section id="class-function-readelementsfromansys">
<span id="sec-fem-feminterface-readelementsfromansys"></span><h2>Class function: ReadElementsFromAnsys<a class="headerlink" href="#class-function-readelementsfromansys" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/FEM.py#L3842">ReadElementsFromAnsys</a>(<code class="docutils literal notranslate"><span class="pre">self</span></code>, <code class="docutils literal notranslate"><span class="pre">fileName</span></code>, <code class="docutils literal notranslate"><span class="pre">verbose</span> <span class="pre">=</span> <span class="pre">False</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>classFunction</em>:</div>
<div class="line">read elements (exported from Ansys as .txt-File)</div>
</div>
</li>
</ul>
<p>Relevant Examples (Ex) and TestModels (TM) with weblink to github:</p>
<blockquote>
<div><p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/CMSexampleCourse.py">CMSexampleCourse.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/netgenSTLtest.py">netgenSTLtest.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/NGsolveCMStutorial.py">NGsolveCMStutorial.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/NGsolveCraigBampton.py">NGsolveCraigBampton.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/NGsolveLinearFEM.py">NGsolveLinearFEM.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/abaqusImportTest.py">abaqusImportTest.py</a> (TM), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/ACFtest.py">ACFtest.py</a> (TM), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/compareAbaqusAnsysRotorEigenfrequencies.py">compareAbaqusAnsysRotorEigenfrequencies.py</a> (TM)</p>
</div></blockquote>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="beams.html" class="btn btn-neutral float-left" title="Module: beams" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="graphicsDataUtilities.html" class="btn btn-neutral float-right" title="Module: graphicsDataUtilities" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>