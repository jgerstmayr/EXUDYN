

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>GeneralContact &mdash; Exudyn1.9.83.dev1 1.9.83.dev1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=3ee1c6c6" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/rtd_sphinx_search.min.css" />
      <link rel="stylesheet" type="text/css" href="../../../_static/custom.css?v=e11081fd" />

  
      <script src="../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../_static/documentation_options.js?v=86202e69"></script>
      <script src="../../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../../../_static/copybutton.js?v=f281be69"></script>
      <script src="../../../_static/js/rtd_search_config.js"></script>
      <script src="../../../_static/js/rtd_sphinx_search.min.js"></script>
      <script>window.MathJax = {"loader": {"load": ["[tex]/mathtools"]}, "tex": {"packages": {"[+]": ["mathtools"]}, "macros": {"vspace": ["{}", 1], "ra": "{\\rightarrow}", "Rcal": "{\\mathbb{R}}", "Ccal": "{\\mathbb{C}}", "Ncal": "{\\mathbb{N}}", "Rot": "{\\mathbf{A}}", "dd": "{\\mathrm{d}}", "ps": "{p_\\mathrm{s}}", "co": "{\\mathrm{c}}", "si": "{\\mathrm{s}}", "tp": "{^\\mathrm{T}}", "diag": "{\\mathrm{diag}}", "vec": "{\\mathrm{vec}}", "Null": "{\\mathbf{0}}", "varepsilonDot": "{\\boldsymbol{\\varepsilon}}", "talpha": "{\\boldsymbol{\\alpha}}", "tbeta": "{\\boldsymbol{\\beta}}", "tgamma": "{\\boldsymbol{\\gamma}}", "tchi": "{\\boldsymbol{\\chi}}", "tdelta": "{\\boldsymbol{\\delta}}", "teps": "{\\boldsymbol{\\varepsilon}}", "tepsDot": "{\\boldsymbol{\\dot \\varepsilon}}", "teta": "{\\boldsymbol{\\eta}}", "tkappa": "{\\boldsymbol{\\kappa}}", "tkappaDot": "{\\boldsymbol{\\dot \\kappa}}", "tphi": "{\\boldsymbol{\\phi}}", "boldVarPhi": "{\\boldsymbol{\\varphi}}", "tPhi": "{\\boldsymbol{\\Phi}}", "ttheta": "{\\boldsymbol{\\theta}}", "tTheta": "{\\boldsymbol{\\Theta}}", "tlambda": "{\\boldsymbol{\\lambda}}", "tnu": "{\\boldsymbol{\\nu}}", "tmu": "{\\boldsymbol{\\mu}}", "tpsi": "{\\boldsymbol{\\psi}}", "tPsi": "{\\boldsymbol{\\Psi}}", "ttau": "{\\boldsymbol{\\tau}}", "tsigma": "{\\boldsymbol{\\sigma}}", "txi": "{\\boldsymbol{\\xi}}", "tzeta": "{\\boldsymbol{\\zeta}}", "tomega": "{\\boldsymbol{\\omega}}", "tOmega": "{\\boldsymbol{\\Omega}}", "vareps": "{\\varepsilon}", "myoverline": ["\\overline{#1}", 1], "pluseq": "\\mathrel{+}=", "LU": ["{\\prescript{#1}{}{#2}\\,}", 2], "LUX": ["{\\prescript{#1}{}{#2}#3\\,}", 3], "LUR": ["{\\prescript{#1}{}{#2}_{#3}\\,}", 3], "LURU": ["{\\prescript{#1}{}{#2}_{#3}^{#4}\\,}", 4], "LLdot": ["{\\prescript{}{#1}{\\dot{#2}}_{#3}\\,}", 3], "vr": ["{\\left[ \\begin{array}{c} { #1}\\vspace{0.04cm} \\\\ { #2}\\vspace{0.04cm} \\\\ { #3} \\end{array} \\right]}", 3], "mr": ["{\\left[ \\begin{array}{ccc} #1 & #2 & #3 \\vspace{0.04cm}\\\\ #4 & #5 & #6 \\vspace{0.04cm}\\\\ #7 & #8 & #9  \\end{array} \\right]}", 9], "vp": ["{\\left[ \\begin{array}{c} { #1} \\vspace{0.04cm}\\\\ { #2} \\end{array} \\right]}", 2], "mp": ["{\\left[ \\begin{array}{cc} #1 & #2 \\vspace{0.04cm}\\\\ #3 & #4 \\end{array} \\right]}", 4], "mfour": ["{\\left[ \\begin{array}{cccc} { #1} \\\\ { #2} \\\\ { #3} \\\\ { #4} \\end{array} \\right]}", 4], "vfour": ["{\\left[ \\begin{array}{c} { #1} \\\\ { #2} \\\\ { #3} \\\\ { #4} \\end{array} \\right]}", 4], "vrRow": ["{[#1,\\, #2,\\, #3]}", 3], "vsix": ["{\\left[ \\begin{array}{c} { #1} \\\\ { #2} \\\\ { #3} \\\\ { #4} \\\\ { #5} \\\\ { #6} \\end{array} \\right]}", 6], "vsixb": ["{\\begin{array}{c} { #1} \\\\ { #2} \\\\ { #3} \\\\ { #4} \\\\ { #5} \\\\ { #6} \\end{array} }", 6], "vsixs": ["{ \\begin{array}{c} { #1} \\\\ { #2} \\\\ { #3} \\\\ { #4} \\\\ { #5} \\\\ { #6} \\end{array} }", 6], "SO": "{q}", "FO": "{y}", "AE": "{\\lambda}", "SYS": "{s}", "SON": "{$2^\\mathrm{nd}$ order differential equations}", "FON": "{$1^\\mathrm{st}$ order differential equations}", "AEN": "{algebraic equations}", "SYSN": "{system equations}", "cIni": "{_\\mathrm{ini}}", "cRef": "{_\\mathrm{ref}}", "cCur": "{_\\mathrm{cur}}", "cVis": "{_\\mathrm{vis}}", "cSOS": "{_\\mathrm{start\\;of\\;step}}", "cConfig": "{_\\mathrm{config}}", "pLoc": "{\\mathbf{b}}", "pLocB": "{\\,^{b}{\\mathbf{v}}}", "pRef": "{\\mathbf{r}}", "pRefG": "{\\,^{0}{\\mathbf{r}}}", "indf": "{_\\mathrm{f}}", "indt": "{_\\mathrm{t}}", "indr": "{_\\mathrm{r}}", "indtt": "{_\\mathrm{tt}}", "indrr": "{_\\mathrm{rr}}", "indff": "{_\\mathrm{ff}}", "indtf": "{_\\mathrm{tf}}", "indrf": "{_\\mathrm{rf}}", "indtr": "{_\\mathrm{tr}}", "omegaBDtilde": "{\\LU{b}{\\tilde \\tomega_\\mathrm{bd}}}", "indrigid": "{_\\mathrm{rigid}}", "indred": "{_\\mathrm{red}}", "induser": "{_\\mathrm{user}}", "indu": "{_\\mathrm{u}}", "termA": ["{\\color{blue}{#1}}", 1], "termB": ["{\\color{red}{#1}}", 1], "termC": ["{\\color{green}{#1}}", 1], "acc": "{\\ddot \\mathbf{q}}", "GA": "{G\\alpha}", "aalg": "{\\mathbf{a}}", "vel": "{\\mathbf{v}}"}}}</script>
      <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Data structures" href="DataStructures.html" />
    <link rel="prev" title="Symbolic" href="Symbolic.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            Exudyn1.9.83.dev1
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Exudyn User Manual</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../Exudyn.html">Exudyn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../InstallationAndGettingStartedIndex.html">Installation and Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../OverviewOnExudynIndex.html">Overview on Exudyn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../TutorialIndex.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../GraphicsAndVisualizationIndex.html">Graphics and visualization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../NotationIndex.html">Notation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../TheoryAndFormulationsIndex.html">Theory and formulations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../SolversIndex.html">Solvers</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="CInterfaceIndex.html">Python-C++ command interface</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="GeneralInformation.html">General information on Python-C++ interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="Exudyn.html">Exudyn</a></li>
<li class="toctree-l2"><a class="reference internal" href="SystemContainer.html">SystemContainer</a></li>
<li class="toctree-l2"><a class="reference internal" href="MainSystem.html">MainSystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="SystemData.html">SystemData</a></li>
<li class="toctree-l2"><a class="reference internal" href="Symbolic.html">Symbolic</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">GeneralContact</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#visugeneralcontact">VisuGeneralContact</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="DataStructures.html">Data structures</a></li>
<li class="toctree-l2"><a class="reference internal" href="TypeDefinitions.html">Type definitions</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference Manual</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../pythonUtilities/index.html">Python Utility Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../items/itemsIndex.html">Items reference manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../structures/StructuresAndSettingsIndex.html">Structures and Settings</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Misc</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Abbreviations.html">List of Abbreviations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ExamplesIndex.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../TestModelsIndex.html">TestModels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../trackerlog.html">Issue tracker</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Exudyn1.9.83.dev1</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="CInterfaceIndex.html">Python-C++ command interface</a></li>
      <li class="breadcrumb-item active">GeneralContact</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/docs/RST/cInterface/GeneralContact.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="generalcontact">
<span id="sec-generalcontact"></span><h1>GeneralContact<a class="headerlink" href="#generalcontact" title="Link to this heading"></a></h1>
<p>Structure to define general and highly efficient contact functionality in multibody systems(Note that GeneralContact is still developed, use with care.). For further explanations and theoretical backgrounds, see Section <a class="reference internal" href="../../../index.html#seccontacttheory"><span class="std std-ref">Theory: Contact</span></a>. Internally, the contacts are stored with global indices, which are in the following list: [numberOfSpheresMarkerBased, numberOfANCFCable2D, numberOfTrigsRigidBodyBased], see alsothe output of GetPythonObject().</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c1">#...</span>
<span class="linenos">2</span><span class="c1">#code snippet, must be placed anywhere before mbs.Assemble()</span>
<span class="linenos">3</span><span class="c1">#Add GeneralContact to mbs:</span>
<span class="linenos">4</span><span class="n">gContact</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">AddGeneralContact</span><span class="p">()</span>
<span class="linenos">5</span><span class="c1">#Add contact elements, e.g.:</span>
<span class="linenos">6</span><span class="n">gContact</span><span class="o">.</span><span class="nf">AddSphereWithMarker</span><span class="p">(</span><span class="o">...</span><span class="p">)</span> <span class="c1">#use appropriate arguments</span>
<span class="linenos">7</span><span class="n">gContact</span><span class="o">.</span><span class="nf">SetFrictionPairings</span><span class="p">(</span><span class="o">...</span><span class="p">)</span> <span class="c1">#set friction pairings and adjust searchTree if needed.</span>
</pre></div>
</div>
<p>The class <strong>GeneralContact</strong> has the following <strong>functions and structures</strong>:</p>
<ul>
<li><div class="line-block">
<div class="line"><strong>GetPythonObject</strong>():</div>
<div class="line">convert member variables of GeneralContact into dictionary; use this for debug only!</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>Reset</strong>(<em>freeMemory</em> = True):</div>
<div class="line">remove all contact objects and reset contact parameters</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>isActive</strong>:</div>
<div class="line">default = True (compute contact); if isActive=False, no contact computation is performed for this contact set</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>verboseMode</strong>:</div>
<div class="line">default = 0; verboseMode = 1 or higher outputs useful information on the contact creation and computation</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>visualization</strong>:</div>
<div class="line">access visualization data structure</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>resetSearchTreeInterval</strong>:</div>
<div class="line">(default=10000) number of search tree updates (contact computation steps) after which the search tree cells are re-created; this costs some time, will free memory in cells that are not needed any more</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>sphereSphereContact</strong>:</div>
<div class="line">activate/deactivate contact between spheres</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>sphereSphereFrictionRecycle</strong>:</div>
<div class="line">False: compute static friction force based on tangential velocity; True: recycle friction from previous PostNewton step, which greatly improves convergence, but may lead to unphysical artifacts; will be solved in future by step reduction</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>minRelDistanceSpheresTriangles</strong>:</div>
<div class="line">(default=1e-10) tolerance (relative to sphere radiues) below which the contact between triangles and spheres is ignored; used for spheres directly attached to triangles</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>frictionProportionalZone</strong>:</div>
<div class="line">(default=0.001) velocity <span class="math notranslate nohighlight">\(v_{\mu,reg}\)</span> upon which the dry friction coefficient is interpolated linearly (regularized friction model); must be greater 0; very small values cause oscillations in friction force</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>excludeOverlappingTrigSphereContacts</strong>:</div>
<div class="line">(default=True) for consistent, closed meshes, we can exclude overlapping contact triangles (which would cause holes if mesh is overlapping and not consistent!!!)</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>excludeDuplicatedTrigSphereContactPoints</strong>:</div>
<div class="line">(default=False) run additional checks for double contacts at edges or vertices, being more accurate but can cause additional costs if many contacts</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>computeExactStaticTriangleBins</strong>:</div>
<div class="line">if True, search tree bins are computed exactly for static triangles while if False, it uses the overall (=very inaccurate) AABB of each triangle in the search tree</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>computeContactForces</strong>:</div>
<div class="line">(default=False) if True, additional system vector is computed which contains all contact force and torque contributions. In order to recover forces on a single rigid body, the respective LTG-vector has to be used and forces need to be extracted from this system vector; may slow down computations.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>ancfCableUseExactMethod</strong>:</div>
<div class="line">(default=True) if True, uses exact computation of intersection of 3rd order polynomials and contacting circles</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>ancfCableNumberOfContactSegments</strong>:</div>
<div class="line">(default=1) number of segments to be used in case that ancfCableUseExactMethod=False; maximum number of segments=3</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>ancfCableMeasuringSegments</strong>:</div>
<div class="line">(default=20) number of segments used to approximate geometry for ANCFCable2D elements for measuring with ShortestDistanceAlongLine; with 20 segments the relative error due to approximation as compared to 10 segments usually stays below 1e-8</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>SetFrictionPairings</strong>(<em>frictionPairings</em>):</div>
<div class="line">set Coulomb friction coefficients for pairings of materials (e.g., use material 0,1, then the entries (0,1) and (1,0) define the friction coefficients for this pairing); matrix should be symmetric!</div>
<div class="line"><em>Example</em>:</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#set 3 surface friction types, all being 0.1:</span>
<span class="n">gContact</span><span class="o">.</span><span class="nf">SetFrictionPairings</span><span class="p">(</span><span class="mf">0.1</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">)));</span>
</pre></div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>SetFrictionProportionalZone</strong>(<em>frictionProportionalZone</em>):</div>
<div class="line">regularization for friction (m/s); used for all contacts</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>SetSearchTreeCellSize</strong>(<em>numberOfCells</em>):</div>
<div class="line">set number of cells of search tree (boxed search) in x, y and z direction</div>
<div class="line"><em>Example</em>:</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">gContact</span><span class="o">.</span><span class="n">SetSearchTreeInitSize</span><span class="p">([</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">])</span>
</pre></div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>SetSearchTreeBox</strong>(<em>pMin</em>, <em>pMax</em>):</div>
<div class="line">set geometric dimensions of searchTreeBox (point with minimum coordinates and point with maximum coordinates); if this box becomes smaller than the effective contact objects, contact computations may slow down significantly</div>
<div class="line"><em>Example</em>:</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">gContact</span><span class="o">.</span><span class="nf">SetSearchTreeBox</span><span class="p">(</span><span class="n">pMin</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span>
    <span class="n">pMax</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>AddSphereWithMarker</strong>(<em>markerIndex</em>, <em>radius</em>, <em>contactStiffness</em>, <em>contactDamping</em>, <em>frictionMaterialIndex</em>):</div>
<div class="line">add contact object using a marker (Position or Rigid), radius and contact/friction parameters and return localIndex of the contact item in GeneralContact; frictionMaterialIndex refers to frictionPairings in GeneralContact; contact is possible between spheres (circles in 2D) (if intraSphereContact = True), spheres and triangles and between sphere (=circle) and ANCFCable2D; contactStiffness is computed as serial spring between contacting objects, while damping is computed as a parallel damper</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>AddANCFCable</strong>(<em>objectIndex</em>, <em>halfHeight</em>, <em>contactStiffness</em>, <em>contactDamping</em>, <em>frictionMaterialIndex</em>):</div>
<div class="line">add contact object for an ANCF cable element, using the objectIndex of the cable element and the cable’s half height as an additional distance to contacting objects (currently not causing additional torque in case of friction), and return localIndex of the contact item in GeneralContact; currently only contact with spheres (circles in 2D) possible; contact computed using exact geometry of elements, finding max 3 intersecting contact regions</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>AddTrianglesRigidBodyBased</strong>(<em>rigidBodyMarkerIndex</em>, <em>contactStiffness</em>, <em>contactDamping</em>, <em>frictionMaterialIndex</em>, <em>pointList</em>, <em>triangleList</em>, <em>staticTriangles</em> = False):</div>
<div class="line">add contact object using a rigidBodyMarker (of a body), contact/friction parameters, a list of points (as 3D numpy arrays or lists; coordinates relative to rigidBodyMarker) and a list of triangles (3 indices as numpy array or list) according to a mesh attached to the rigidBodyMarker; the flag staticTriangles=True can be used to inform the contact solver that these triangles are static (fixed in space); note that static triangles have to be added before dynamic triangles; function returns starting local index of trigsRigidBodyBased at which the triangles are stored; mesh can be produced with GraphicsData2TrigsAndPoints(…); contact is possible between sphere (circle) and Triangle but yet not between triangle and triangle; frictionMaterialIndex refers to frictionPairings in GeneralContact; contactStiffness is computed as serial spring between contacting objects, while damping is computed as a parallel damper (otherwise the smaller damper would always dominate); the triangle normal must point outwards, with the normal of a triangle given with local points (p0,p1,p2) defined as n=(p1-p0) x (p2-p0), see function ComputeTriangleNormal(…)</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>GetItemsInBox</strong>(<em>pMin</em>, <em>pMax</em>):</div>
<div class="line">Get all items in box defined by minimum coordinates given in pMin and maximum coordinates given by pMax, accepting 3D lists or numpy arrays; in case that no objects are found, False is returned; otherwise, a dictionary is returned, containing numpy arrays with indices of obtained MarkerBasedSpheres, TrigsRigidBodyBased, ANCFCable2D, …; the indices refer to the local index in GeneralContact which can be evaluated e.g. by GetMarkerBasedSphere(localIndex)</div>
<div class="line"><em>Example</em>:</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">gContact</span><span class="o">.</span><span class="nf">GetItemsInBox</span><span class="p">(</span><span class="n">pMin</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span>
    <span class="n">pMax</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">])</span>
</pre></div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>GetSphereMarkerBased</strong>(<em>localIndex</em>, <em>addData</em> = False):</div>
<div class="line">Get dictionary with current position, orientation, velocity, angular velocity as computed in last contact iteration; if addData=True, adds stored data of contact element, such as radius, markerIndex and contact parameters; localIndex is the internal index of contact element, as returned e.g. from GetItemsInBox</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>SetSphereMarkerBased</strong>(<em>localIndex</em>, <em>contactStiffness</em> = -1., <em>contactDamping</em> = -1., <em>radius</em> = -1., <em>frictionMaterialIndex</em> = -1):</div>
<div class="line">Set data of marker based sphere with localIndex (as internally stored) with given arguments; arguments that are &lt; 0 (default) imply that current values are not overwritten</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>GetTriangleRigidBodyBased</strong>(<em>localIndex</em>):</div>
<div class="line">Get dictionary with rigid body index, local position of triangle vertices (nodes) and triangle normal; NOTE: the mesh added to contact is different from this structure, as it contains nodes and connectivity lists; the triangle index corresponds to the order as triangles are added to GeneralContact</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>SetTriangleRigidBodyBased</strong>(<em>localIndex</em>, <em>points</em>, <em>contactRigidBodyIndex</em> = -1):</div>
<div class="line">Set data of marker based sphere with localIndex (triangle index); points are provided as 3x3 numpy array, with point coordinates in rows; contactRigidBodyIndex&lt;0 indicates no change of the current index (and changing this index should be handled with care)</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>ShortestDistanceAlongLine</strong>(<em>pStart</em> = [0,0,0], <em>direction</em> = [1,0,0], <em>minDistance</em> = -1e-7, <em>maxDistance</em> = 1e7, <em>asDictionary</em> = False, <em>cylinderRadius</em> = 0, <em>typeIndex</em> = Contact.IndexEndOfEnumList):</div>
<div class="line">Find shortest distance to contact objects in GeneralContact along line with pStart (given as 3D list or numpy array) and direction (as 3D list or numpy array with no need to be normalized); the function returns the distance which is &gt;= minDistance and &lt; maxDistance; in case of beam elements, it measures the distance to the beam centerline; the distance is measured from pStart along given direction and can also be negative; if no item is found along line, the maxDistance is returned; if asDictionary=False, the result is a float, while otherwise details are returned as dictionary (including distance, velocityAlongLine (which is the object velocity in given direction and may be different from the time derivative of the distance; works similar to a laser Doppler vibrometer - LDV), itemIndex and itemType in GeneralContact); the cylinderRadius, if not equal to 0, will be used for spheres to find closest sphere along cylinder with given point and direction; the typeIndex can be set to a specific contact type, e.g., which are searched for (otherwise all objects are considered)</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>UpdateContacts</strong>(<em>mainSystem</em>):</div>
<div class="line">Update contact sets, e.g. if no contact is simulated (isActive=False) but user functions need up-to-date contact states for GetItemsInBox(…) or for GetActiveContacts(…)</div>
<div class="line"><em>Example</em>:</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">gContact</span><span class="o">.</span><span class="nf">UpdateContacts</span><span class="p">(</span><span class="n">mbs</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>GetActiveContacts</strong>(<em>typeIndex</em>, <em>itemIndex</em>):</div>
<div class="line">Get list of global item numbers which are in contact with itemIndex of type typeIndex in case that the global itemIndex is smaller than the abs value of the contact pair index; a negative sign indicates that the contacting (spheres) is in Coloumb friction, a positive sign indicates a regularized friction region; in case of itemIndex==-1, it will return the list of numbers of active contacts per item for the contact type; for interpretation of global contact indices, see gContact.GetPythonObject() and documentation; requires either implicit contact computation or UpdateContacts(…) needs to be called prior to this function</div>
<div class="line"><em>Example</em>:</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#if explicit solver is used, we first need to update contacts:</span>
<span class="n">gContact</span><span class="o">.</span><span class="nf">UpdateContacts</span><span class="p">(</span><span class="n">mbs</span><span class="p">)</span>
<span class="c1">#obtain active contacts of marker based sphere 42:</span>
<span class="n">gList</span> <span class="o">=</span> <span class="n">gContact</span><span class="o">.</span><span class="nf">GetActiveContacts</span><span class="p">(</span><span class="n">exu</span><span class="o">.</span><span class="n">ContactTypeIndex</span><span class="o">.</span><span class="n">IndexSpheresMarkerBased</span><span class="p">,</span> <span class="mi">42</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>GetSystemODE2RhsContactForces</strong>(<em>copy</em> = False):</div>
<div class="line">Get numpy array of system vector containing contribution of contact forces to system ODE2 Rhs vector; if copy=False, it will give direct (reference) access to the internal vector (note: modifications to this vector do not influence simulation!), however, which may cause problems if the system size changes or simulation is restarted; if copy=True, the vector is copied (time consuming); contributions to single objects may be extracted by checking the according LTG-array of according objects (such as rigid bodies); the contact forces vector is computed in each contact iteration;</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>__repr__()</strong>:</div>
<div class="line">return the string representation of the GeneralContact, containing basic information and statistics</div>
</div>
</li>
</ul>
<section id="visugeneralcontact">
<span id="sec-generalcontact-visualization"></span><h2>VisuGeneralContact<a class="headerlink" href="#visugeneralcontact" title="Link to this heading"></a></h2>
<p>This structure may contains some visualization parameters in future. Currently, all visualization settings are controlled via SC.visualizationSettings</p>
<p>The class <strong>VisuGeneralContact</strong> has the following <strong>functions and structures</strong>:</p>
<ul>
<li><div class="line-block">
<div class="line"><strong>Reset</strong>():</div>
<div class="line">reset visualization parameters to default values</div>
</div>
</li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="Symbolic.html" class="btn btn-neutral float-left" title="Symbolic" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="DataStructures.html" class="btn btn-neutral float-right" title="Data structures" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>