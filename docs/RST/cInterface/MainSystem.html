

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MainSystem &mdash; Exudyn1.9.83.dev1 1.9.83.dev1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=3ee1c6c6" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/rtd_sphinx_search.min.css" />
      <link rel="stylesheet" type="text/css" href="../../../_static/custom.css?v=e11081fd" />

  
      <script src="../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../_static/documentation_options.js?v=86202e69"></script>
      <script src="../../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../../../_static/copybutton.js?v=f281be69"></script>
      <script src="../../../_static/js/rtd_search_config.js"></script>
      <script src="../../../_static/js/rtd_sphinx_search.min.js"></script>
      <script>window.MathJax = {"loader": {"load": ["[tex]/mathtools"]}, "tex": {"packages": {"[+]": ["mathtools"]}, "macros": {"vspace": ["{}", 1], "ra": "{\\rightarrow}", "Rcal": "{\\mathbb{R}}", "Ccal": "{\\mathbb{C}}", "Ncal": "{\\mathbb{N}}", "Rot": "{\\mathbf{A}}", "dd": "{\\mathrm{d}}", "ps": "{p_\\mathrm{s}}", "co": "{\\mathrm{c}}", "si": "{\\mathrm{s}}", "tp": "{^\\mathrm{T}}", "diag": "{\\mathrm{diag}}", "vec": "{\\mathrm{vec}}", "Null": "{\\mathbf{0}}", "varepsilonDot": "{\\boldsymbol{\\varepsilon}}", "talpha": "{\\boldsymbol{\\alpha}}", "tbeta": "{\\boldsymbol{\\beta}}", "tgamma": "{\\boldsymbol{\\gamma}}", "tchi": "{\\boldsymbol{\\chi}}", "tdelta": "{\\boldsymbol{\\delta}}", "teps": "{\\boldsymbol{\\varepsilon}}", "tepsDot": "{\\boldsymbol{\\dot \\varepsilon}}", "teta": "{\\boldsymbol{\\eta}}", "tkappa": "{\\boldsymbol{\\kappa}}", "tkappaDot": "{\\boldsymbol{\\dot \\kappa}}", "tphi": "{\\boldsymbol{\\phi}}", "boldVarPhi": "{\\boldsymbol{\\varphi}}", "tPhi": "{\\boldsymbol{\\Phi}}", "ttheta": "{\\boldsymbol{\\theta}}", "tTheta": "{\\boldsymbol{\\Theta}}", "tlambda": "{\\boldsymbol{\\lambda}}", "tnu": "{\\boldsymbol{\\nu}}", "tmu": "{\\boldsymbol{\\mu}}", "tpsi": "{\\boldsymbol{\\psi}}", "tPsi": "{\\boldsymbol{\\Psi}}", "ttau": "{\\boldsymbol{\\tau}}", "tsigma": "{\\boldsymbol{\\sigma}}", "txi": "{\\boldsymbol{\\xi}}", "tzeta": "{\\boldsymbol{\\zeta}}", "tomega": "{\\boldsymbol{\\omega}}", "tOmega": "{\\boldsymbol{\\Omega}}", "vareps": "{\\varepsilon}", "myoverline": ["\\overline{#1}", 1], "pluseq": "\\mathrel{+}=", "LU": ["{\\prescript{#1}{}{#2}\\,}", 2], "LUX": ["{\\prescript{#1}{}{#2}#3\\,}", 3], "LUR": ["{\\prescript{#1}{}{#2}_{#3}\\,}", 3], "LURU": ["{\\prescript{#1}{}{#2}_{#3}^{#4}\\,}", 4], "LLdot": ["{\\prescript{}{#1}{\\dot{#2}}_{#3}\\,}", 3], "vr": ["{\\left[ \\begin{array}{c} { #1}\\vspace{0.04cm} \\\\ { #2}\\vspace{0.04cm} \\\\ { #3} \\end{array} \\right]}", 3], "mr": ["{\\left[ \\begin{array}{ccc} #1 & #2 & #3 \\vspace{0.04cm}\\\\ #4 & #5 & #6 \\vspace{0.04cm}\\\\ #7 & #8 & #9  \\end{array} \\right]}", 9], "vp": ["{\\left[ \\begin{array}{c} { #1} \\vspace{0.04cm}\\\\ { #2} \\end{array} \\right]}", 2], "mp": ["{\\left[ \\begin{array}{cc} #1 & #2 \\vspace{0.04cm}\\\\ #3 & #4 \\end{array} \\right]}", 4], "mfour": ["{\\left[ \\begin{array}{cccc} { #1} \\\\ { #2} \\\\ { #3} \\\\ { #4} \\end{array} \\right]}", 4], "vfour": ["{\\left[ \\begin{array}{c} { #1} \\\\ { #2} \\\\ { #3} \\\\ { #4} \\end{array} \\right]}", 4], "vrRow": ["{[#1,\\, #2,\\, #3]}", 3], "vsix": ["{\\left[ \\begin{array}{c} { #1} \\\\ { #2} \\\\ { #3} \\\\ { #4} \\\\ { #5} \\\\ { #6} \\end{array} \\right]}", 6], "vsixb": ["{\\begin{array}{c} { #1} \\\\ { #2} \\\\ { #3} \\\\ { #4} \\\\ { #5} \\\\ { #6} \\end{array} }", 6], "vsixs": ["{ \\begin{array}{c} { #1} \\\\ { #2} \\\\ { #3} \\\\ { #4} \\\\ { #5} \\\\ { #6} \\end{array} }", 6], "SO": "{q}", "FO": "{y}", "AE": "{\\lambda}", "SYS": "{s}", "SON": "{$2^\\mathrm{nd}$ order differential equations}", "FON": "{$1^\\mathrm{st}$ order differential equations}", "AEN": "{algebraic equations}", "SYSN": "{system equations}", "cIni": "{_\\mathrm{ini}}", "cRef": "{_\\mathrm{ref}}", "cCur": "{_\\mathrm{cur}}", "cVis": "{_\\mathrm{vis}}", "cSOS": "{_\\mathrm{start\\;of\\;step}}", "cConfig": "{_\\mathrm{config}}", "pLoc": "{\\mathbf{b}}", "pLocB": "{\\,^{b}{\\mathbf{v}}}", "pRef": "{\\mathbf{r}}", "pRefG": "{\\,^{0}{\\mathbf{r}}}", "indf": "{_\\mathrm{f}}", "indt": "{_\\mathrm{t}}", "indr": "{_\\mathrm{r}}", "indtt": "{_\\mathrm{tt}}", "indrr": "{_\\mathrm{rr}}", "indff": "{_\\mathrm{ff}}", "indtf": "{_\\mathrm{tf}}", "indrf": "{_\\mathrm{rf}}", "indtr": "{_\\mathrm{tr}}", "omegaBDtilde": "{\\LU{b}{\\tilde \\tomega_\\mathrm{bd}}}", "indrigid": "{_\\mathrm{rigid}}", "indred": "{_\\mathrm{red}}", "induser": "{_\\mathrm{user}}", "indu": "{_\\mathrm{u}}", "termA": ["{\\color{blue}{#1}}", 1], "termB": ["{\\color{red}{#1}}", 1], "termC": ["{\\color{green}{#1}}", 1], "acc": "{\\ddot \\mathbf{q}}", "GA": "{G\\alpha}", "aalg": "{\\mathbf{a}}", "vel": "{\\mathbf{v}}"}}}</script>
      <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="SystemData" href="SystemData.html" />
    <link rel="prev" title="SystemContainer" href="SystemContainer.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            Exudyn1.9.83.dev1
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Exudyn User Manual</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../Exudyn.html">Exudyn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../InstallationAndGettingStartedIndex.html">Installation and Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../OverviewOnExudynIndex.html">Overview on Exudyn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../TutorialIndex.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../GraphicsAndVisualizationIndex.html">Graphics and visualization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../NotationIndex.html">Notation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../TheoryAndFormulationsIndex.html">Theory and formulations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../SolversIndex.html">Solvers</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="CInterfaceIndex.html">Python-C++ command interface</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="GeneralInformation.html">General information on Python-C++ interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="Exudyn.html">Exudyn</a></li>
<li class="toctree-l2"><a class="reference internal" href="SystemContainer.html">SystemContainer</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">MainSystem</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#mainsystem-extensions-create">MainSystem extensions (create)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mainsystem-extensions-general">MainSystem extensions (general)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mainsystem-node">MainSystem: Node</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mainsystem-object">MainSystem: Object</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mainsystem-marker">MainSystem: Marker</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mainsystem-load">MainSystem: Load</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mainsystem-sensor">MainSystem: Sensor</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="SystemData.html">SystemData</a></li>
<li class="toctree-l2"><a class="reference internal" href="Symbolic.html">Symbolic</a></li>
<li class="toctree-l2"><a class="reference internal" href="GeneralContact.html">GeneralContact</a></li>
<li class="toctree-l2"><a class="reference internal" href="DataStructures.html">Data structures</a></li>
<li class="toctree-l2"><a class="reference internal" href="TypeDefinitions.html">Type definitions</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference Manual</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../pythonUtilities/index.html">Python Utility Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../items/itemsIndex.html">Items reference manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../structures/StructuresAndSettingsIndex.html">Structures and Settings</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Misc</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Abbreviations.html">List of Abbreviations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ExamplesIndex.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../TestModelsIndex.html">TestModels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../trackerlog.html">Issue tracker</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Exudyn1.9.83.dev1</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="CInterfaceIndex.html">Python-C++ command interface</a></li>
      <li class="breadcrumb-item active">MainSystem</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/docs/RST/cInterface/MainSystem.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="mainsystem">
<h1>MainSystem<a class="headerlink" href="#mainsystem" title="Link to this heading"></a></h1>
<p>This is the class which defines a (multibody) system. The MainSystem shall only be created by <code class="docutils literal notranslate"><span class="pre">SC.AddSystem()</span></code>, not with <code class="docutils literal notranslate"><span class="pre">exu.MainSystem()</span></code>, as the latter one would not be linked to a SystemContainer. In some cases, you may use SC.Append(mbs). In C++, there is a MainSystem (the part which links to Python) and a System (computational part). For that reason, the name is MainSystem on the Python side, but it is often just called ‘system’. For compatibility, it is recommended to denote the variable holding this system as mbs, the multibody dynamics system. It can be created, visualized and computed. Use the following functions for system manipulation.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">exudyn</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">exu</span>
<span class="n">SC</span> <span class="o">=</span> <span class="n">exu</span><span class="o">.</span><span class="nc">SystemContainer</span><span class="p">()</span>
<span class="n">mbs</span> <span class="o">=</span> <span class="n">SC</span><span class="o">.</span><span class="nf">AddSystem</span><span class="p">()</span>
</pre></div>
</div>
<p>The class <strong>MainSystem</strong> has the following <strong>functions and structures</strong>:</p>
<ul>
<li><div class="line-block">
<div class="line"><strong>Assemble</strong>():</div>
<div class="line">assemble items (nodes, bodies, markers, loads, …) of multibody system; Calls CheckSystemIntegrity(…), AssembleCoordinates(), AssembleLTGLists(), AssembleInitializeSystemCoordinates(), and AssembleSystemInitialize()</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>AssembleCoordinates</strong>():</div>
<div class="line">assemble coordinates: assign computational coordinates to nodes and constraints (algebraic variables)</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>AssembleLTGLists</strong>():</div>
<div class="line">build <a class="reference internal" href="../Abbreviations.html#ltg"><span class="std std-ref">LTG</span></a> coordinate lists for objects (used to build global ODE2RHS, MassMatrix, etc. vectors and matrices) and store special object lists (body, connector, constraint, …)</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>AssembleInitializeSystemCoordinates</strong>():</div>
<div class="line">initialize all system-wide coordinates based on initial values given in nodes</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>AssembleSystemInitialize</strong>():</div>
<div class="line">initialize some system data, e.g., generalContact objects (searchTree, etc.)</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>Reset</strong>():</div>
<div class="line">reset all lists of items (nodes, bodies, markers, loads, …) and temporary vectors; deallocate memory</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>GetSystemContainer</strong>():</div>
<div class="line">return the systemContainer where the mainSystem (mbs) was created</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>WaitForUserToContinue</strong>(<em>printMessage</em> = True):</div>
<div class="line">interrupt further computation until user input –&gt; ‘pause’ function; this command runs a loop in the background to have active response of the render window, e.g., to open the visualization dialog or use the right-mouse-button; behaves similar as SC.WaitForRenderEngineStopFlag()</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>SendRedrawSignal</strong>():</div>
<div class="line">this function is used to send a signal to the renderer that the scene shall be redrawn because the visualization state has been updated</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>GetRenderEngineStopFlag</strong>():</div>
<div class="line">get the current stop simulation flag; True=user wants to stop simulation</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>SetRenderEngineStopFlag</strong>(<em>stopFlag</em>):</div>
<div class="line">set the current stop simulation flag; set to False, in order to continue a previously user-interrupted simulation</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>ActivateRendering</strong>(<em>flag</em> = True):</div>
<div class="line">activate (flag=True) or deactivate (flag=False) rendering for this system</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>SetPreStepUserFunction</strong>(<em>value</em>):</div>
<div class="line">Sets a user function PreStepUserFunction(mbs, t) executed at beginning of every computation step; in normal case return True; return False to stop simulation after current step; set to 0 (integer) in order to erase user function. Note that the time returned is already the end of the step, which allows to compute forces consistently with trapezoidal integrators; for higher order Runge-Kutta methods, step time will be available only in object-user functions.</div>
<div class="line"><em>Example</em>:</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">PreStepUserFunction</span><span class="p">(</span><span class="n">mbs</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">mbs</span><span class="o">.</span><span class="nf">systemData</span><span class="o">.</span><span class="nf">NumberOfNodes</span><span class="p">())</span>
    <span class="k">if</span><span class="p">(</span><span class="n">t</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">return</span> <span class="kc">True</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">SetPreStepUserFunction</span><span class="p">(</span><span class="n">PreStepUserFunction</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>GetPreStepUserFunction</strong>(<em>asDict</em> = False):</div>
<div class="line">Returns the preStepUserFunction.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>SetPostStepUserFunction</strong>(<em>value</em>):</div>
<div class="line">Sets a user function PostStepUserFunction(mbs, t) executed at beginning of every computation step; in normal case return True; return False to stop simulation after current step; set to 0 (integer) in order to erase user function.</div>
<div class="line"><em>Example</em>:</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">PostStepUserFunction</span><span class="p">(</span><span class="n">mbs</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">mbs</span><span class="o">.</span><span class="nf">systemData</span><span class="o">.</span><span class="nf">NumberOfNodes</span><span class="p">())</span>
    <span class="k">if</span><span class="p">(</span><span class="n">t</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">return</span> <span class="kc">True</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">SetPostStepUserFunction</span><span class="p">(</span><span class="n">PostStepUserFunction</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>GetPostStepUserFunction</strong>(<em>asDict</em> = False):</div>
<div class="line">Returns the postStepUserFunction.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>SetPostNewtonUserFunction</strong>(<em>value</em>):</div>
<div class="line">Sets a user function PostNewtonUserFunction(mbs, t) executed after successful Newton iteration in implicit or static solvers and after step update of explicit solvers, but BEFORE PostNewton functions are called by the solver; function returns list [discontinuousError, recommendedStepSize], containing a error of the PostNewtonStep, which is compared to [solver].discontinuous.iterationTolerance. The recommendedStepSize shall be negative, if no recommendation is given, 0 in order to enforce minimum step size or a specific value to which the current step size will be reduced and the step will be repeated; use this function, e.g., to reduce step size after impact or change of data variables; set to 0 (integer) in order to erase user function. Similar described by Flores and Ambrosio, <a class="reference external" href="https://doi.org/10.1007/s11044-010-9209-8">https://doi.org/10.1007/s11044-010-9209-8</a></div>
<div class="line"><em>Example</em>:</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">PostNewtonUserFunction</span><span class="p">(</span><span class="n">mbs</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
    <span class="k">if</span><span class="p">(</span><span class="n">t</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">1e-6</span><span class="p">]</span>
    <span class="k">return</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">SetPostNewtonUserFunction</span><span class="p">(</span><span class="n">PostNewtonUserFunction</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>GetPostNewtonUserFunction</strong>(<em>asDict</em> = False):</div>
<div class="line">Returns the postNewtonUserFunction.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>SetPreNewtonResidualUserFunction</strong>(<em>value</em>):</div>
<div class="line">Sets a user function PreNewtonResidualUserFunction(mbs, t, newtonIt, discontinuousIt) executed prior to computation of the Newton residual in implicit or static solvers. This function returns nothing. The arguments newtonIt and discontinuousIt may be used to distinguish if the call is done at the beginning of a discontinuous iteration (newtonIt=0) or during Newton iterations (newtonIt&gt;0). The typical use case would be to modify objects or loads in every iteration. Note that this user function is not called during Jacobian computation. If needed, the jacobian can be modified with the user function set by SetSystemJacobianUserFunction.</div>
<div class="line"><em>Example</em>:</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">PreNewtonResidualUserFunction</span><span class="p">(</span><span class="n">mbs</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">newtonIt</span><span class="p">,</span> <span class="n">discontinuousIt</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;t=&quot;</span><span class="p">,</span><span class="n">t</span><span class="p">,</span><span class="s2">&quot;, newtonIt=&quot;</span><span class="p">,</span><span class="n">newtonIt</span><span class="p">,</span><span class="s2">&quot;, discIt=&quot;</span><span class="p">,</span><span class="n">discontinuousIt</span><span class="p">)</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">SetPreNewtonResidualUserFunction</span><span class="p">(</span><span class="n">PreNewtonResidualUserFunction</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>GetPreNewtonResidualUserFunction</strong>(<em>asDict</em> = False):</div>
<div class="line">Returns the preNewtonResidualUserFunction.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>SetSystemJacobianUserFunction</strong>(<em>value</em>):</div>
<div class="line">Sets a user function SystemJacobianUserFunction(mbs, t, factorODE2, factorODE2_t, factorODE1) executed after computation of the Newton jacobian of a static solver or an implicit timeintegrator; The function shall return additional terms for the jacobian at RHS, e.g., related to dependencies that are added by the user in the PreNewtonResidualUserFunction; RHS means that for a spring with stiffness K, the jacobian would be -K as it is computed for the RHS, see the RHS-LHS convention. If you like to completely replace the jacobian, consider using the solver’s user function SetUserFunctionComputeNewtonJacobian which can be used to replace the jacobian computation; the factors factorODE2, factorODE2_t, factorODE1 must be multiplied with quantities related to ODE2 coordinates (like stiffness terms), ODE2_t velocity coordinates (like damping terms) and ODE1 quantities. The functions returns a MatrixContainer, for which the sparse format is recommended for efficiency reasons.</div>
<div class="line"><em>Example</em>:</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">SystemJacobianUserFunction</span><span class="p">(</span><span class="n">mbs</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">factorODE2</span><span class="p">,</span> <span class="n">factorODE2_t</span><span class="p">,</span> <span class="n">factorODE1</span><span class="p">):</span>
    <span class="k">return</span> <span class="nc">MatrixContainer</span><span class="p">([[</span><span class="n">factorODE2</span><span class="o">*</span><span class="mi">10</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]])</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">SetSystemJacobianUserFunction</span><span class="p">(</span><span class="n">SystemJacobianUserFunction</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>GetSystemJacobianUserFunction</strong>(<em>asDict</em> = False):</div>
<div class="line">Returns the systemJacobianUserFunction.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>AddGeneralContact</strong>():</div>
<div class="line">add a new general contact, used to enable efficient contact computation between objects (nodes or markers)</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>GetGeneralContact</strong>(<em>generalContactNumber</em>):</div>
<div class="line">get read/write access to GeneralContact with index generalContactNumber stored in mbs; Examples shows how to access the GeneralContact object added with last AddGeneralContact() command:</div>
<div class="line"><em>Example</em>:</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">gc</span><span class="o">=</span><span class="n">mbs</span><span class="o">.</span><span class="nf">GetGeneralContact</span><span class="p">(</span><span class="n">mbs</span><span class="o">.</span><span class="nf">NumberOfGeneralContacts</span><span class="p">()</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>DeleteGeneralContact</strong>(<em>generalContactNumber</em>):</div>
<div class="line">delete GeneralContact with index generalContactNumber in mbs; other general contacts are resorted (index changes!)</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>NumberOfGeneralContacts</strong>():</div>
<div class="line">Return number of GeneralContact objects in mbs</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>GetAvailableFactoryItems</strong>():</div>
<div class="line">get all available items to be added (nodes, objects, etc.); this is useful in particular in case of additional user elements to check if they are available; the available items are returned as dictionary, containing lists of strings for Node, Object, etc.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>GetDictionary</strong>():</div>
<div class="line">[UNDER DEVELOPMENT]: return the dictionary of the system data (todo: and state), e.g., to copy the system or for pickling</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>SetDictionary</strong>(<em>systemDict</em>):</div>
<div class="line">[UNDER DEVELOPMENT]: set system data (todo: and state) from given dictionary; used for pickling</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>__repr__()</strong>:</div>
<div class="line">return the representation of the system, which can be, e.g., printed</div>
<div class="line"><em>Example</em>:</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">mbs</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>systemIsConsistent</strong>:</div>
<div class="line">this flag is used by solvers to decide, whether the system is in a solvable state; this flag is set to False as long as Assemble() has not been called; any modification to the system, such as Add…(), Modify…(), etc. will set the flag to False again; this flag can be modified (set to True), if a change of e.g.~an object (change of stiffness) or load (change of force) keeps the system consistent, but would normally lead to systemIsConsistent=False</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>interactiveMode</strong>:</div>
<div class="line">set this flag to True in order to invoke a Assemble() command in every system modification, e.g. AddNode, AddObject, ModifyNode, …; this helps that the system can be visualized in interactive mode.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>variables</strong>:</div>
<div class="line">this dictionary may be used by the user to store model-specific data, in order to avoid global Python variables in complex models; mbs.variables[“myvar”] = 42</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>sys</strong>:</div>
<div class="line">this dictionary is used by exudyn Python libraries, e.g., solvers, to avoid global Python variables</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>solverSignalJacobianUpdate</strong>:</div>
<div class="line">this flag is used by solvers to decide, whether the jacobian should be updated; at beginning of simulation and after jacobian computation, this flag is set automatically to False; use this flag to indicate system changes, e.g. during time integration</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>systemData</strong>:</div>
<div class="line">Access to SystemData structure; enables access to number of nodes, objects, … and to (current, initial, reference, …) state variables (ODE2, AE, Data,…)</div>
</div>
</li>
</ul>
<section id="mainsystem-extensions-create">
<span id="sec-mainsystem-pythonextensionscreate"></span><h2>MainSystem extensions (create)<a class="headerlink" href="#mainsystem-extensions-create" title="Link to this heading"></a></h2>
<p>This section represents extensions to MainSystem, which are direct calls to Python functions; the ‘create’ extensions to simplify the creation of multibody systems, such as CreateMassPoint(…); these extensions allow a more intuitive interaction with the MainSystem class, see the following example. For activation, import <code class="docutils literal notranslate"><span class="pre">exudyn.mainSystemExtensions</span></code> or <code class="docutils literal notranslate"><span class="pre">exudyn.utilities</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">import</span><span class="w"> </span><span class="nn">exudyn</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">exu</span>
<span class="linenos"> 2</span><span class="kn">from</span><span class="w"> </span><span class="nn">exudyn.utilities</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
<span class="linenos"> 3</span><span class="c1">#alternative: import exudyn.mainSystemExtensions</span>
<span class="linenos"> 4</span><span class="n">SC</span> <span class="o">=</span> <span class="n">exu</span><span class="o">.</span><span class="nc">SystemContainer</span><span class="p">()</span>
<span class="linenos"> 5</span><span class="n">mbs</span> <span class="o">=</span> <span class="n">SC</span><span class="o">.</span><span class="nf">AddSystem</span><span class="p">()</span>
<span class="linenos"> 6</span><span class="c1">#</span>
<span class="linenos"> 7</span><span class="c1">#create rigid body</span>
<span class="linenos"> 8</span><span class="n">b1</span><span class="o">=</span><span class="n">mbs</span><span class="o">.</span><span class="nf">CreateRigidBody</span><span class="p">(</span><span class="n">inertia</span> <span class="o">=</span> <span class="nc">InertiaCuboid</span><span class="p">(</span><span class="n">density</span><span class="o">=</span><span class="mi">5000</span><span class="p">,</span> <span class="n">sideLengths</span><span class="o">=</span><span class="p">[</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.1</span><span class="p">,</span><span class="mi">1</span><span class="p">]),</span>
<span class="linenos"> 9</span>                       <span class="n">referencePosition</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
<span class="linenos">10</span>                       <span class="n">gravity</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">9.81</span><span class="p">])</span>
</pre></div>
</div>
<section id="function-createground">
<span id="sec-mainsystemextensions-createground"></span><h3>Function: CreateGround<a class="headerlink" href="#function-createground" title="Link to this heading"></a></h3>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/mainSystemExtensions.py#L147">CreateGround</a>(<code class="docutils literal notranslate"><span class="pre">name</span> <span class="pre">=</span> <span class="pre">''</span></code>, <code class="docutils literal notranslate"><span class="pre">referencePosition</span> <span class="pre">=</span> <span class="pre">[0.,0.,0.]</span></code>, <code class="docutils literal notranslate"><span class="pre">referenceRotationMatrix</span> <span class="pre">=</span> <span class="pre">np.eye(3)</span></code>, <code class="docutils literal notranslate"><span class="pre">graphicsDataList</span> <span class="pre">=</span> <span class="pre">[]</span></code>, <code class="docutils literal notranslate"><span class="pre">graphicsDataUserFunction</span> <span class="pre">=</span> <span class="pre">0</span></code>, <code class="docutils literal notranslate"><span class="pre">show</span> <span class="pre">=</span> <span class="pre">True</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>function description</em>:</div>
<div class="line">helper function to create a ground object, using arguments of ObjectGround; this function is mainly added for consistency with other mainSystemExtensions</div>
<div class="line">- NOTE that this function is added to MainSystem via Python function MainSystemCreateGround.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>input</em>:</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">name</span></code>: name string for object</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">referencePosition</span></code>: reference coordinates for point node (always a 3D vector, no matter if 2D or 3D mass)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">referenceRotationMatrix</span></code>: reference rotation matrix for rigid body node (always 3D matrix, no matter if 2D or 3D body)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">graphicsDataList</span></code>: list of GraphicsData for optional ground visualization</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">graphicsDataUserFunction</span></code>: a user function graphicsDataUserFunction(mbs, itemNumber)-&gt;BodyGraphicsData (list of GraphicsData), which can be used to draw user-defined graphics; this is much slower than regular GraphicsData</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">color</span></code>: color of node</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">show</span></code>: True: show ground object;</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>output</em>:</div>
<div class="line">ObjectIndex; returns ground object index</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>example</em>:</div>
</div>
</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">exudyn</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">exu</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">exudyn.utilities</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span> <span class="c1">#includes itemInterface and rigidBodyUtilities</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="n">SC</span> <span class="o">=</span> <span class="n">exu</span><span class="o">.</span><span class="nc">SystemContainer</span><span class="p">()</span>
<span class="n">mbs</span> <span class="o">=</span> <span class="n">SC</span><span class="o">.</span><span class="nf">AddSystem</span><span class="p">()</span>
<span class="n">ground</span><span class="o">=</span><span class="n">mbs</span><span class="o">.</span><span class="nf">CreateGround</span><span class="p">(</span><span class="n">referencePosition</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
                        <span class="n">graphicsDataList</span> <span class="o">=</span> <span class="p">[</span><span class="n">exu</span><span class="o">.</span><span class="n">graphics</span><span class="o">.</span><span class="nf">CheckerBoard</span><span class="p">(</span><span class="n">point</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="n">normal</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span><span class="n">size</span><span class="o">=</span><span class="mi">4</span><span class="p">)])</span>
</pre></div>
</div>
<p>Relevant Examples (Ex) and TestModels (TM) with weblink to github:</p>
<blockquote>
<div><p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/basicTutorial2024.py">basicTutorial2024.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/beamTutorial.py">beamTutorial.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/bicycleIftommBenchmark.py">bicycleIftommBenchmark.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/bungeeJump.py">bungeeJump.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/cartesianSpringDamper.py">cartesianSpringDamper.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/contactSphereSphereTest.py">contactSphereSphereTest.py</a> (TM), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/contactSphereSphereTestEAPM.py">contactSphereSphereTestEAPM.py</a> (TM), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/ConvexContactTest.py">ConvexContactTest.py</a> (TM)</p>
</div></blockquote>
</section>
<section id="function-createmasspoint">
<span id="sec-mainsystemextensions-createmasspoint"></span><h3>Function: CreateMassPoint<a class="headerlink" href="#function-createmasspoint" title="Link to this heading"></a></h3>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/mainSystemExtensions.py#L216">CreateMassPoint</a>(<code class="docutils literal notranslate"><span class="pre">name</span> <span class="pre">=</span> <span class="pre">''</span></code>, <code class="docutils literal notranslate"><span class="pre">referencePosition</span> <span class="pre">=</span> <span class="pre">[0.,0.,0.]</span></code>, <code class="docutils literal notranslate"><span class="pre">initialDisplacement</span> <span class="pre">=</span> <span class="pre">[0.,0.,0.]</span></code>, <code class="docutils literal notranslate"><span class="pre">initialVelocity</span> <span class="pre">=</span> <span class="pre">[0.,0.,0.]</span></code>, <code class="docutils literal notranslate"><span class="pre">physicsMass</span> <span class="pre">=</span> <span class="pre">0</span></code>, <code class="docutils literal notranslate"><span class="pre">gravity</span> <span class="pre">=</span> <span class="pre">[0.,0.,0.]</span></code>, <code class="docutils literal notranslate"><span class="pre">graphicsDataList</span> <span class="pre">=</span> <span class="pre">[]</span></code>, <code class="docutils literal notranslate"><span class="pre">drawSize</span> <span class="pre">=</span> <span class="pre">-1</span></code>, <code class="docutils literal notranslate"><span class="pre">color</span> <span class="pre">=</span> <span class="pre">[-1.,-1.,-1.,-1.]</span></code>, <code class="docutils literal notranslate"><span class="pre">show</span> <span class="pre">=</span> <span class="pre">True</span></code>, <code class="docutils literal notranslate"><span class="pre">create2D</span> <span class="pre">=</span> <span class="pre">False</span></code>, <code class="docutils literal notranslate"><span class="pre">returnDict</span> <span class="pre">=</span> <span class="pre">False</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>function description</em>:</div>
<div class="line">helper function to create 2D or 3D mass point object and node, using arguments as in NodePoint and MassPoint</div>
<div class="line">- NOTE that this function is added to MainSystem via Python function MainSystemCreateMassPoint.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>input</em>:</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">name</span></code>: name string for object, node is ‘Node:’+name</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">referencePosition</span></code>: reference coordinates for point node (always a 3D vector, no matter if 2D or 3D mass)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">initialDisplacement</span></code>: initial displacements for point node (always a 3D vector, no matter if 2D or 3D mass)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">initialVelocity</span></code>: initial velocities for point node (always a 3D vector, no matter if 2D or 3D mass)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">physicsMass</span></code>: mass of mass point</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">gravity</span></code>: gravity vevtor applied (always a 3D vector, no matter if 2D or 3D mass)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">graphicsDataList</span></code>: list of GraphicsData for optional mass visualization</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">drawSize</span></code>: general drawing size of node</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">color</span></code>: color of node</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">show</span></code>: True: if graphicsData list is empty, node is shown, otherwise body is shown; otherwise, nothing is shown</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">create2D</span></code>: if True, create NodePoint2D and MassPoint2D</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">returnDict</span></code>: if False, returns object index; if True, returns dict of all information on created object and node</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>output</em>:</div>
<div class="line">Union[dict, ObjectIndex]; returns mass point object index or dict with all data on request (if returnDict=True)</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>example</em>:</div>
</div>
</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">exudyn</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">exu</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">exudyn.utilities</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span> <span class="c1">#includes itemInterface and rigidBodyUtilities</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="n">SC</span> <span class="o">=</span> <span class="n">exu</span><span class="o">.</span><span class="nc">SystemContainer</span><span class="p">()</span>
<span class="n">mbs</span> <span class="o">=</span> <span class="n">SC</span><span class="o">.</span><span class="nf">AddSystem</span><span class="p">()</span>
<span class="n">b0</span><span class="o">=</span><span class="n">mbs</span><span class="o">.</span><span class="nf">CreateMassPoint</span><span class="p">(</span><span class="n">referencePosition</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
                       <span class="n">initialVelocity</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
                       <span class="n">physicsMass</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">gravity</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">9.81</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
                       <span class="n">drawSize</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">exu</span><span class="o">.</span><span class="n">graphics</span><span class="o">.</span><span class="n">color</span><span class="o">.</span><span class="n">blue</span><span class="p">)</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">Assemble</span><span class="p">()</span>
<span class="n">simulationSettings</span> <span class="o">=</span> <span class="n">exu</span><span class="o">.</span><span class="nc">SimulationSettings</span><span class="p">()</span> <span class="c1">#takes currently set values or default values</span>
<span class="n">simulationSettings</span><span class="o">.</span><span class="n">timeIntegration</span><span class="o">.</span><span class="n">numberOfSteps</span> <span class="o">=</span> <span class="mi">1000</span>
<span class="n">simulationSettings</span><span class="o">.</span><span class="n">timeIntegration</span><span class="o">.</span><span class="n">endTime</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">SolveDynamic</span><span class="p">(</span><span class="n">simulationSettings</span> <span class="o">=</span> <span class="n">simulationSettings</span><span class="p">)</span>
</pre></div>
</div>
<p>Relevant Examples (Ex) and TestModels (TM) with weblink to github:</p>
<blockquote>
<div><p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/basicTutorial2024.py">basicTutorial2024.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/cartesianSpringDamper.py">cartesianSpringDamper.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/cartesianSpringDamperUserFunction.py">cartesianSpringDamperUserFunction.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/chatGPTupdate.py">chatGPTupdate.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/serialRobotURDF.py">serialRobotURDF.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/loadUserFunctionTest.py">loadUserFunctionTest.py</a> (TM), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/mainSystemExtensionsTests.py">mainSystemExtensionsTests.py</a> (TM), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/mainSystemUserFunctionsTest.py">mainSystemUserFunctionsTest.py</a> (TM)</p>
</div></blockquote>
</section>
<section id="function-createrigidbody">
<span id="sec-mainsystemextensions-createrigidbody"></span><h3>Function: CreateRigidBody<a class="headerlink" href="#function-createrigidbody" title="Link to this heading"></a></h3>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/mainSystemExtensions.py#L347">CreateRigidBody</a>(<code class="docutils literal notranslate"><span class="pre">name</span> <span class="pre">=</span> <span class="pre">''</span></code>, <code class="docutils literal notranslate"><span class="pre">referencePosition</span> <span class="pre">=</span> <span class="pre">[0.,0.,0.]</span></code>, <code class="docutils literal notranslate"><span class="pre">referenceRotationMatrix</span> <span class="pre">=</span> <span class="pre">np.eye(3)</span></code>, <code class="docutils literal notranslate"><span class="pre">initialVelocity</span> <span class="pre">=</span> <span class="pre">[0.,0.,0.]</span></code>, <code class="docutils literal notranslate"><span class="pre">initialAngularVelocity</span> <span class="pre">=</span> <span class="pre">[0.,0.,0.]</span></code>, <code class="docutils literal notranslate"><span class="pre">initialDisplacement</span> <span class="pre">=</span> <span class="pre">None</span></code>, <code class="docutils literal notranslate"><span class="pre">initialRotationMatrix</span> <span class="pre">=</span> <span class="pre">None</span></code>, <code class="docutils literal notranslate"><span class="pre">inertia</span> <span class="pre">=</span> <span class="pre">None</span></code>, <code class="docutils literal notranslate"><span class="pre">gravity</span> <span class="pre">=</span> <span class="pre">[0.,0.,0.]</span></code>, <code class="docutils literal notranslate"><span class="pre">nodeType</span> <span class="pre">=</span> <span class="pre">exudyn.NodeType.RotationEulerParameters</span></code>, <code class="docutils literal notranslate"><span class="pre">graphicsDataList</span> <span class="pre">=</span> <span class="pre">[]</span></code>, <code class="docutils literal notranslate"><span class="pre">graphicsDataUserFunction</span> <span class="pre">=</span> <span class="pre">0</span></code>, <code class="docutils literal notranslate"><span class="pre">drawSize</span> <span class="pre">=</span> <span class="pre">-1</span></code>, <code class="docutils literal notranslate"><span class="pre">color</span> <span class="pre">=</span> <span class="pre">[-1.,-1.,-1.,-1.]</span></code>, <code class="docutils literal notranslate"><span class="pre">show</span> <span class="pre">=</span> <span class="pre">True</span></code>, <code class="docutils literal notranslate"><span class="pre">create2D</span> <span class="pre">=</span> <span class="pre">False</span></code>, <code class="docutils literal notranslate"><span class="pre">returnDict</span> <span class="pre">=</span> <span class="pre">False</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>function description</em>:</div>
<div class="line">helper function to create 3D (or 2D) rigid body object and node; all quantities are global (angular velocity, etc.)</div>
<div class="line">- NOTE that this function is added to MainSystem via Python function MainSystemCreateRigidBody.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>input</em>:</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">name</span></code>: name string for object, node is ‘Node:’+name</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">referencePosition</span></code>: reference position vector for rigid body node (always a 3D vector, no matter if 2D or 3D body)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">referenceRotationMatrix</span></code>: reference rotation matrix for rigid body node (always 3D matrix, no matter if 2D or 3D body)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">initialVelocity</span></code>: initial translational velocity vector for node (always a 3D vector, no matter if 2D or 3D body)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">initialAngularVelocity</span></code>: initial angular velocity vector for node (always a 3D vector, no matter if 2D or 3D body)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">initialDisplacement</span></code>: initial translational displacement vector for node (always a 3D vector, no matter if 2D or 3D body); these displacements are deviations from reference position, e.g. for a finite element node [None: unused]</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">initialRotationMatrix</span></code>: initial rotation provided as matrix (always a 3D matrix, no matter if 2D or 3D body); this rotation is superimposed to reference rotation [None: unused]</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">inertia</span></code>: an instance of class RigidBodyInertia, see rigidBodyUtilities; may also be from derived class (InertiaCuboid, InertiaMassPoint, InertiaCylinder, …)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">gravity</span></code>: gravity vevtor applied (always a 3D vector, no matter if 2D or 3D mass)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">graphicsDataList</span></code>: list of GraphicsData for rigid body visualization; use exudyn.graphics functions to create GraphicsData for basic solids</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">graphicsDataUserFunction</span></code>: a user function graphicsDataUserFunction(mbs, itemNumber)-&gt;BodyGraphicsData (list of GraphicsData), which can be used to draw user-defined graphics; this is much slower than regular GraphicsData</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">drawSize</span></code>: general drawing size of node</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">color</span></code>: color of node</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">show</span></code>: True: if graphicsData list is empty, node is shown, otherwise body is shown; False: nothing is shown</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">create2D</span></code>: if True, create NodeRigidBody2D and ObjectRigidBody2D</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">returnDict</span></code>: if False, returns object index; if True, returns dict of all information on created object and node</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>output</em>:</div>
<div class="line">Union[dict, ObjectIndex]; returns rigid body object index (or dict with ‘nodeNumber’, ‘objectNumber’ and possibly ‘loadNumber’ and ‘markerBodyMass’ if returnDict=True)</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>example</em>:</div>
</div>
</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">exudyn</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">exu</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">exudyn.utilities</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span> <span class="c1">#includes itemInterface and rigidBodyUtilities</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="n">SC</span> <span class="o">=</span> <span class="n">exu</span><span class="o">.</span><span class="nc">SystemContainer</span><span class="p">()</span>
<span class="n">mbs</span> <span class="o">=</span> <span class="n">SC</span><span class="o">.</span><span class="nf">AddSystem</span><span class="p">()</span>
<span class="n">b0</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">CreateRigidBody</span><span class="p">(</span><span class="n">inertia</span> <span class="o">=</span> <span class="nc">InertiaCuboid</span><span class="p">(</span><span class="n">density</span><span class="o">=</span><span class="mi">5000</span><span class="p">,</span>
                                                 <span class="n">sideLengths</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.1</span><span class="p">]),</span>
                         <span class="n">referencePosition</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
                         <span class="n">initialVelocity</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
                         <span class="n">initialAngularVelocity</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">0.7</span><span class="p">],</span>
                         <span class="n">gravity</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">9.81</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
                         <span class="n">graphicsDataList</span> <span class="o">=</span> <span class="p">[</span><span class="n">exu</span><span class="o">.</span><span class="n">graphics</span><span class="o">.</span><span class="nf">Brick</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.1</span><span class="p">],</span>
                                                                      <span class="n">color</span><span class="o">=</span><span class="n">exu</span><span class="o">.</span><span class="n">graphics</span><span class="o">.</span><span class="n">color</span><span class="o">.</span><span class="n">red</span><span class="p">)])</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">Assemble</span><span class="p">()</span>
<span class="n">simulationSettings</span> <span class="o">=</span> <span class="n">exu</span><span class="o">.</span><span class="nc">SimulationSettings</span><span class="p">()</span> <span class="c1">#takes currently set values or default values</span>
<span class="n">simulationSettings</span><span class="o">.</span><span class="n">timeIntegration</span><span class="o">.</span><span class="n">numberOfSteps</span> <span class="o">=</span> <span class="mi">1000</span>
<span class="n">simulationSettings</span><span class="o">.</span><span class="n">timeIntegration</span><span class="o">.</span><span class="n">endTime</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">SolveDynamic</span><span class="p">(</span><span class="n">simulationSettings</span> <span class="o">=</span> <span class="n">simulationSettings</span><span class="p">)</span>
</pre></div>
</div>
<p>Relevant Examples (Ex) and TestModels (TM) with weblink to github:</p>
<blockquote>
<div><p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/addPrismaticJoint.py">addPrismaticJoint.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/addRevoluteJoint.py">addRevoluteJoint.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/ANCFrotatingCable2D.py">ANCFrotatingCable2D.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/bicycleIftommBenchmark.py">bicycleIftommBenchmark.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/bungeeJump.py">bungeeJump.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/bricardMechanism.py">bricardMechanism.py</a> (TM), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/carRollingDiscTest.py">carRollingDiscTest.py</a> (TM), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/complexEigenvaluesTest.py">complexEigenvaluesTest.py</a> (TM)</p>
</div></blockquote>
</section>
<section id="function-createspringdamper">
<span id="sec-mainsystemextensions-createspringdamper"></span><h3>Function: CreateSpringDamper<a class="headerlink" href="#function-createspringdamper" title="Link to this heading"></a></h3>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/mainSystemExtensions.py#L575">CreateSpringDamper</a>(<code class="docutils literal notranslate"><span class="pre">name</span> <span class="pre">=</span> <span class="pre">''</span></code>, <code class="docutils literal notranslate"><span class="pre">bodyNumbers</span> <span class="pre">=</span> <span class="pre">[None,</span> <span class="pre">None]</span></code>, <code class="docutils literal notranslate"><span class="pre">localPosition0</span> <span class="pre">=</span> <span class="pre">[0.,0.,0.]</span></code>, <code class="docutils literal notranslate"><span class="pre">localPosition1</span> <span class="pre">=</span> <span class="pre">[0.,0.,0.]</span></code>, <code class="docutils literal notranslate"><span class="pre">referenceLength</span> <span class="pre">=</span> <span class="pre">None</span></code>, <code class="docutils literal notranslate"><span class="pre">stiffness</span> <span class="pre">=</span> <span class="pre">0.</span></code>, <code class="docutils literal notranslate"><span class="pre">damping</span> <span class="pre">=</span> <span class="pre">0.</span></code>, <code class="docutils literal notranslate"><span class="pre">force</span> <span class="pre">=</span> <span class="pre">0.</span></code>, <code class="docutils literal notranslate"><span class="pre">velocityOffset</span> <span class="pre">=</span> <span class="pre">0.</span></code>, <code class="docutils literal notranslate"><span class="pre">springForceUserFunction</span> <span class="pre">=</span> <span class="pre">0</span></code>, <code class="docutils literal notranslate"><span class="pre">bodyOrNodeList</span> <span class="pre">=</span> <span class="pre">[None,</span> <span class="pre">None]</span></code>, <code class="docutils literal notranslate"><span class="pre">bodyList</span> <span class="pre">=</span> <span class="pre">[None,</span> <span class="pre">None]</span></code>, <code class="docutils literal notranslate"><span class="pre">show</span> <span class="pre">=</span> <span class="pre">True</span></code>, <code class="docutils literal notranslate"><span class="pre">drawSize</span> <span class="pre">=</span> <span class="pre">-1</span></code>, <code class="docutils literal notranslate"><span class="pre">color</span> <span class="pre">=</span> <span class="pre">exudyn.graphics.color.default</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>function description</em>:</div>
<div class="line">helper function to create SpringDamper connector, using arguments from ObjectConnectorSpringDamper; similar interface as CreateDistanceConstraint(…), see there for for further information</div>
<div class="line">- NOTE that this function is added to MainSystem via Python function MainSystemCreateSpringDamper.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>input</em>:</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">name</span></code>: name string for connector; markers get Marker0:name and Marker1:name</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">bodyNumbers</span></code>: a list of two body numbers (ObjectIndex) to be connected</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">localPosition0</span></code>: local position (as 3D list or numpy array) on body0, if not a node number</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">localPosition1</span></code>: local position (as 3D list or numpy array) on body1, if not a node number</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">referenceLength</span></code>: if None, length is computed from reference position of bodies or nodes; if not None, this scalar reference length is used for spring</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">stiffness</span></code>: scalar stiffness coefficient</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">damping</span></code>: scalar damping coefficient</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">force</span></code>: scalar additional force applied</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">velocityOffset</span></code>: scalar offset: if referenceLength is changed over time, the velocityOffset may be changed accordingly to emulate a reference motion</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">springForceUserFunction</span></code>: a user function springForceUserFunction(mbs, t, itemNumber, deltaL, deltaL_t, stiffness, damping, force)-&gt;float ; this function replaces the internal connector force computation</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">bodyOrNodeList</span></code>: alternative to bodyNumbers; a list of object numbers (with specific localPosition0/1) or node numbers; may alse be mixed types; to use this case, set bodyNumbers = [None,None]</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">show</span></code>: if True, connector visualization is drawn</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">drawSize</span></code>: general drawing size of connector</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">color</span></code>: color of connector</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>output</em>:</div>
<div class="line">ObjectIndex; returns index of newly created object</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>example</em>:</div>
</div>
</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">exudyn</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">exu</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">exudyn.utilities</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span> <span class="c1">#includes itemInterface and rigidBodyUtilities</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="n">SC</span> <span class="o">=</span> <span class="n">exu</span><span class="o">.</span><span class="nc">SystemContainer</span><span class="p">()</span>
<span class="n">mbs</span> <span class="o">=</span> <span class="n">SC</span><span class="o">.</span><span class="nf">AddSystem</span><span class="p">()</span>
<span class="n">b0</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">CreateMassPoint</span><span class="p">(</span><span class="n">referencePosition</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
                         <span class="n">initialVelocity</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
                         <span class="n">physicsMass</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">gravity</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">9.81</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
                         <span class="n">drawSize</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">exu</span><span class="o">.</span><span class="n">graphics</span><span class="o">.</span><span class="n">color</span><span class="o">.</span><span class="n">blue</span><span class="p">)</span>
<span class="n">oGround</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">AddObject</span><span class="p">(</span><span class="nc">ObjectGround</span><span class="p">())</span>
<span class="c1">#add vertical spring</span>
<span class="n">oSD</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">CreateSpringDamper</span><span class="p">(</span><span class="n">bodyNumbers</span><span class="o">=</span><span class="p">[</span><span class="n">oGround</span><span class="p">,</span> <span class="n">b0</span><span class="p">],</span>
                             <span class="n">localPosition0</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
                             <span class="n">localPosition1</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
                             <span class="n">stiffness</span><span class="o">=</span><span class="mf">1e4</span><span class="p">,</span> <span class="n">damping</span><span class="o">=</span><span class="mf">1e2</span><span class="p">,</span>
                             <span class="n">drawSize</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">Assemble</span><span class="p">()</span>
<span class="n">simulationSettings</span> <span class="o">=</span> <span class="n">exu</span><span class="o">.</span><span class="nc">SimulationSettings</span><span class="p">()</span> <span class="c1">#takes currently set values or default values</span>
<span class="n">simulationSettings</span><span class="o">.</span><span class="n">timeIntegration</span><span class="o">.</span><span class="n">numberOfSteps</span> <span class="o">=</span> <span class="mi">1000</span>
<span class="n">simulationSettings</span><span class="o">.</span><span class="n">timeIntegration</span><span class="o">.</span><span class="n">endTime</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">SC</span><span class="o">.</span><span class="nf">visualizationSettings</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">drawNodesAsPoint</span><span class="o">=</span><span class="kc">False</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">SolveDynamic</span><span class="p">(</span><span class="n">simulationSettings</span> <span class="o">=</span> <span class="n">simulationSettings</span><span class="p">)</span>
</pre></div>
</div>
<p>Relevant Examples (Ex) and TestModels (TM) with weblink to github:</p>
<blockquote>
<div><p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/basicTutorial2024.py">basicTutorial2024.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/chatGPTupdate.py">chatGPTupdate.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/springDamperTutorialNew.py">springDamperTutorialNew.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/springMassFriction.py">springMassFriction.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/symbolicUserFunctionMasses.py">symbolicUserFunctionMasses.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/loadUserFunctionTest.py">loadUserFunctionTest.py</a> (TM), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/mainSystemExtensionsTests.py">mainSystemExtensionsTests.py</a> (TM), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/symbolicUserFunctionTest.py">symbolicUserFunctionTest.py</a> (TM)</p>
</div></blockquote>
</section>
<section id="function-createcartesianspringdamper">
<span id="sec-mainsystemextensions-createcartesianspringdamper"></span><h3>Function: CreateCartesianSpringDamper<a class="headerlink" href="#function-createcartesianspringdamper" title="Link to this heading"></a></h3>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/mainSystemExtensions.py#L709">CreateCartesianSpringDamper</a>(<code class="docutils literal notranslate"><span class="pre">name</span> <span class="pre">=</span> <span class="pre">''</span></code>, <code class="docutils literal notranslate"><span class="pre">bodyNumbers</span> <span class="pre">=</span> <span class="pre">[None,</span> <span class="pre">None]</span></code>, <code class="docutils literal notranslate"><span class="pre">localPosition0</span> <span class="pre">=</span> <span class="pre">[0.,0.,0.]</span></code>, <code class="docutils literal notranslate"><span class="pre">localPosition1</span> <span class="pre">=</span> <span class="pre">[0.,0.,0.]</span></code>, <code class="docutils literal notranslate"><span class="pre">stiffness</span> <span class="pre">=</span> <span class="pre">[0.,0.,0.]</span></code>, <code class="docutils literal notranslate"><span class="pre">damping</span> <span class="pre">=</span> <span class="pre">[0.,0.,0.]</span></code>, <code class="docutils literal notranslate"><span class="pre">offset</span> <span class="pre">=</span> <span class="pre">[0.,0.,0.]</span></code>, <code class="docutils literal notranslate"><span class="pre">springForceUserFunction</span> <span class="pre">=</span> <span class="pre">0</span></code>, <code class="docutils literal notranslate"><span class="pre">bodyOrNodeList</span> <span class="pre">=</span> <span class="pre">[None,</span> <span class="pre">None]</span></code>, <code class="docutils literal notranslate"><span class="pre">bodyList</span> <span class="pre">=</span> <span class="pre">[None,</span> <span class="pre">None]</span></code>, <code class="docutils literal notranslate"><span class="pre">show</span> <span class="pre">=</span> <span class="pre">True</span></code>, <code class="docutils literal notranslate"><span class="pre">drawSize</span> <span class="pre">=</span> <span class="pre">-1</span></code>, <code class="docutils literal notranslate"><span class="pre">color</span> <span class="pre">=</span> <span class="pre">exudyn.graphics.color.default</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>function description</em>:</div>
<div class="line">helper function to create CartesianSpringDamper connector, using arguments from ObjectConnectorCartesianSpringDamper</div>
<div class="line">- NOTE that this function is added to MainSystem via Python function MainSystemCreateCartesianSpringDamper.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>input</em>:</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">name</span></code>: name string for connector; markers get Marker0:name and Marker1:name</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">bodyNumbers</span></code>: a list of two body numbers (ObjectIndex) to be connected</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">localPosition0</span></code>: local position (as 3D list or numpy array) on body0, if not a node number</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">localPosition1</span></code>: local position (as 3D list or numpy array) on body1, if not a node number</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">stiffness</span></code>: stiffness coefficients (as 3D list or numpy array)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">damping</span></code>: damping coefficients (as 3D list or numpy array)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">offset</span></code>: offset vector (as 3D list or numpy array)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">springForceUserFunction</span></code>: a user function springForceUserFunction(mbs, t, itemNumber, displacement, velocity, stiffness, damping, offset)-&gt;[float,float,float] ; this function replaces the internal connector force computation</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">bodyOrNodeList</span></code>: alternative to bodyNumbers; a list of object numbers (with specific localPosition0/1) or node numbers; may alse be mixed types; to use this case, set bodyNumbers = [None,None]</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">show</span></code>: if True, connector visualization is drawn</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">drawSize</span></code>: general drawing size of connector</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">color</span></code>: color of connector</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>output</em>:</div>
<div class="line">ObjectIndex; returns index of newly created object</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>example</em>:</div>
</div>
</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">exudyn</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">exu</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">exudyn.utilities</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span> <span class="c1">#includes itemInterface and rigidBodyUtilities</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="n">SC</span> <span class="o">=</span> <span class="n">exu</span><span class="o">.</span><span class="nc">SystemContainer</span><span class="p">()</span>
<span class="n">mbs</span> <span class="o">=</span> <span class="n">SC</span><span class="o">.</span><span class="nf">AddSystem</span><span class="p">()</span>
<span class="n">b0</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">CreateMassPoint</span><span class="p">(</span><span class="n">referencePosition</span> <span class="o">=</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
                          <span class="n">physicsMass</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">gravity</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">9.81</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
                          <span class="n">drawSize</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">exu</span><span class="o">.</span><span class="n">graphics</span><span class="o">.</span><span class="n">color</span><span class="o">.</span><span class="n">blue</span><span class="p">)</span>
<span class="n">oGround</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">AddObject</span><span class="p">(</span><span class="nc">ObjectGround</span><span class="p">())</span>
<span class="n">oSD</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">CreateCartesianSpringDamper</span><span class="p">(</span><span class="n">bodyNumbers</span><span class="o">=</span><span class="p">[</span><span class="n">oGround</span><span class="p">,</span> <span class="n">b0</span><span class="p">],</span>
                              <span class="n">localPosition0</span><span class="o">=</span><span class="p">[</span><span class="mf">7.5</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
                              <span class="n">localPosition1</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
                              <span class="n">stiffness</span><span class="o">=</span><span class="p">[</span><span class="mi">200</span><span class="p">,</span><span class="mi">2000</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="n">damping</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
                              <span class="n">drawSize</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">Assemble</span><span class="p">()</span>
<span class="n">simulationSettings</span> <span class="o">=</span> <span class="n">exu</span><span class="o">.</span><span class="nc">SimulationSettings</span><span class="p">()</span> <span class="c1">#takes currently set values or default values</span>
<span class="n">simulationSettings</span><span class="o">.</span><span class="n">timeIntegration</span><span class="o">.</span><span class="n">numberOfSteps</span> <span class="o">=</span> <span class="mi">1000</span>
<span class="n">simulationSettings</span><span class="o">.</span><span class="n">timeIntegration</span><span class="o">.</span><span class="n">endTime</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">SC</span><span class="o">.</span><span class="nf">visualizationSettings</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">drawNodesAsPoint</span><span class="o">=</span><span class="kc">False</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">SolveDynamic</span><span class="p">(</span><span class="n">simulationSettings</span> <span class="o">=</span> <span class="n">simulationSettings</span><span class="p">)</span>
</pre></div>
</div>
<p>Relevant Examples (Ex) and TestModels (TM) with weblink to github:</p>
<blockquote>
<div><p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/cartesianSpringDamper.py">cartesianSpringDamper.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/cartesianSpringDamperUserFunction.py">cartesianSpringDamperUserFunction.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/chatGPTupdate.py">chatGPTupdate.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/complexEigenvaluesTest.py">complexEigenvaluesTest.py</a> (TM), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/computeODE2AEeigenvaluesTest.py">computeODE2AEeigenvaluesTest.py</a> (TM), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/mainSystemExtensionsTests.py">mainSystemExtensionsTests.py</a> (TM), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/mainSystemUserFunctionsTest.py">mainSystemUserFunctionsTest.py</a> (TM)</p>
</div></blockquote>
</section>
<section id="function-createrigidbodyspringdamper">
<span id="sec-mainsystemextensions-createrigidbodyspringdamper"></span><h3>Function: CreateRigidBodySpringDamper<a class="headerlink" href="#function-createrigidbodyspringdamper" title="Link to this heading"></a></h3>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/mainSystemExtensions.py#L798">CreateRigidBodySpringDamper</a>(<code class="docutils literal notranslate"><span class="pre">name</span> <span class="pre">=</span> <span class="pre">''</span></code>, <code class="docutils literal notranslate"><span class="pre">bodyNumbers</span> <span class="pre">=</span> <span class="pre">[None,</span> <span class="pre">None]</span></code>, <code class="docutils literal notranslate"><span class="pre">localPosition0</span> <span class="pre">=</span> <span class="pre">[0.,0.,0.]</span></code>, <code class="docutils literal notranslate"><span class="pre">localPosition1</span> <span class="pre">=</span> <span class="pre">[0.,0.,0.]</span></code>, <code class="docutils literal notranslate"><span class="pre">stiffness</span> <span class="pre">=</span> <span class="pre">np.zeros((6,6))</span></code>, <code class="docutils literal notranslate"><span class="pre">damping</span> <span class="pre">=</span> <span class="pre">np.zeros((6,6))</span></code>, <code class="docutils literal notranslate"><span class="pre">offset</span> <span class="pre">=</span> <span class="pre">[0.,0.,0.,0.,0.,0.]</span></code>, <code class="docutils literal notranslate"><span class="pre">rotationMatrixJoint</span> <span class="pre">=</span> <span class="pre">np.eye(3)</span></code>, <code class="docutils literal notranslate"><span class="pre">useGlobalFrame</span> <span class="pre">=</span> <span class="pre">True</span></code>, <code class="docutils literal notranslate"><span class="pre">intrinsicFormulation</span> <span class="pre">=</span> <span class="pre">True</span></code>, <code class="docutils literal notranslate"><span class="pre">springForceTorqueUserFunction</span> <span class="pre">=</span> <span class="pre">0</span></code>, <code class="docutils literal notranslate"><span class="pre">postNewtonStepUserFunction</span> <span class="pre">=</span> <span class="pre">0</span></code>, <code class="docutils literal notranslate"><span class="pre">bodyOrNodeList</span> <span class="pre">=</span> <span class="pre">[None,</span> <span class="pre">None]</span></code>, <code class="docutils literal notranslate"><span class="pre">bodyList</span> <span class="pre">=</span> <span class="pre">[None,</span> <span class="pre">None]</span></code>, <code class="docutils literal notranslate"><span class="pre">show</span> <span class="pre">=</span> <span class="pre">True</span></code>, <code class="docutils literal notranslate"><span class="pre">drawSize</span> <span class="pre">=</span> <span class="pre">-1</span></code>, <code class="docutils literal notranslate"><span class="pre">color</span> <span class="pre">=</span> <span class="pre">exudyn.graphics.color.default</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>function description</em>:</div>
<div class="line">helper function to create RigidBodySpringDamper connector, using arguments from ObjectConnectorRigidBodySpringDamper, see there for the full documentation</div>
<div class="line">- NOTE that this function is added to MainSystem via Python function MainSystemCreateRigidBodySpringDamper.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>input</em>:</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">name</span></code>: name string for connector; markers get Marker0:name and Marker1:name</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">bodyNumbers</span></code>: a list of two body numbers (ObjectIndex) to be connected</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">localPosition0</span></code>: local position (as 3D list or numpy array) on body0, if not a node number</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">localPosition1</span></code>: local position (as 3D list or numpy array) on body1, if not a node number</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">stiffness</span></code>: stiffness coefficients (as 6D matrix or numpy array)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">damping</span></code>: damping coefficients (as 6D matrix or numpy array)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">offset</span></code>: offset vector (as 6D list or numpy array)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">rotationMatrixJoint</span></code>: additional rotation matrix; in case  useGlobalFrame=False, it transforms body0/node0 local frame to joint frame; if useGlobalFrame=True, it transforms global frame to joint frame</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">useGlobalFrame</span></code>: if False, the rotationMatrixJoint is defined in the local coordinate system of body0</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">intrinsicFormulation</span></code>: if True, uses intrinsic formulation of Maserati and Morandini, which uses matrix logarithm and is independent of order of markers (preferred formulation); otherwise, Tait-Bryan angles are used for computation of torque, see documentation</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">springForceTorqueUserFunction</span></code>: a user function springForceTorqueUserFunction(mbs, t, itemNumber, displacement, rotation, velocity, angularVelocity, stiffness, damping, rotJ0, rotJ1, offset)-&gt;[float,float,float, float,float,float] ; this function replaces the internal connector force / torque computation</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">postNewtonStepUserFunction</span></code>: a special user function postNewtonStepUserFunction(mbs, t, Index itemIndex, dataCoordinates, displacement, rotation, velocity, angularVelocity, stiffness, damping, rotJ0, rotJ1, offset)-&gt;[PNerror, recommendedStepSize, data[0], data[1], …] ; for details, see RigidBodySpringDamper for full docu</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">bodyOrNodeList</span></code>: alternative to bodyNumbers; a list of object numbers (with specific localPosition0/1) or node numbers; may alse be mixed types; to use this case, set bodyNumbers = [None,None]</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">show</span></code>: if True, connector visualization is drawn</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">drawSize</span></code>: general drawing size of connector</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">color</span></code>: color of connector</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>output</em>:</div>
<div class="line">ObjectIndex; returns index of newly created object</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>example</em>:</div>
</div>
</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#coming later</span>
</pre></div>
</div>
<p>Relevant Examples (Ex) and TestModels (TM) with weblink to github:</p>
<blockquote>
<div><p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/bricardMechanism.py">bricardMechanism.py</a> (TM), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/rigidBodySpringDamperIntrinsic.py">rigidBodySpringDamperIntrinsic.py</a> (TM)</p>
</div></blockquote>
</section>
<section id="function-createtorsionalspringdamper">
<span id="sec-mainsystemextensions-createtorsionalspringdamper"></span><h3>Function: CreateTorsionalSpringDamper<a class="headerlink" href="#function-createtorsionalspringdamper" title="Link to this heading"></a></h3>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/mainSystemExtensions.py#L930">CreateTorsionalSpringDamper</a>(<code class="docutils literal notranslate"><span class="pre">name</span> <span class="pre">=</span> <span class="pre">''</span></code>, <code class="docutils literal notranslate"><span class="pre">bodyNumbers</span> <span class="pre">=</span> <span class="pre">[None,</span> <span class="pre">None]</span></code>, <code class="docutils literal notranslate"><span class="pre">position</span> <span class="pre">=</span> <span class="pre">[0.,0.,0.]</span></code>, <code class="docutils literal notranslate"><span class="pre">axis</span> <span class="pre">=</span> <span class="pre">[0.,0.,0.]</span></code>, <code class="docutils literal notranslate"><span class="pre">stiffness</span> <span class="pre">=</span> <span class="pre">0.</span></code>, <code class="docutils literal notranslate"><span class="pre">damping</span> <span class="pre">=</span> <span class="pre">0.</span></code>, <code class="docutils literal notranslate"><span class="pre">offset</span> <span class="pre">=</span> <span class="pre">0.</span></code>, <code class="docutils literal notranslate"><span class="pre">velocityOffset</span> <span class="pre">=</span> <span class="pre">0.</span></code>, <code class="docutils literal notranslate"><span class="pre">torque</span> <span class="pre">=</span> <span class="pre">0.</span></code>, <code class="docutils literal notranslate"><span class="pre">useGlobalFrame</span> <span class="pre">=</span> <span class="pre">True</span></code>, <code class="docutils literal notranslate"><span class="pre">springTorqueUserFunction</span> <span class="pre">=</span> <span class="pre">0</span></code>, <code class="docutils literal notranslate"><span class="pre">unlimitedRotations</span> <span class="pre">=</span> <span class="pre">True</span></code>, <code class="docutils literal notranslate"><span class="pre">show</span> <span class="pre">=</span> <span class="pre">True</span></code>, <code class="docutils literal notranslate"><span class="pre">drawSize</span> <span class="pre">=</span> <span class="pre">-1</span></code>, <code class="docutils literal notranslate"><span class="pre">color</span> <span class="pre">=</span> <span class="pre">exudyn.graphics.color.default</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>function description</em>:</div>
<div class="line">helper function to create TorsionalSpringDamper connector, using arguments from ObjectConnectorTorsionalSpringDamper, see there for the full documentation</div>
<div class="line">- NOTE that this function is added to MainSystem via Python function MainSystemCreateTorsionalSpringDamper.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>input</em>:</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">name</span></code>: name string for connector; markers get Marker0:name and Marker1:name</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">bodyNumbers</span></code>: a list of two body numbers (ObjectIndex) to be connected</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">position</span></code>: a 3D vector as list or np.array: if useGlobalFrame=True it describes the global position of the joint in reference configuration; else: local position in body0</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">axis</span></code>: a 3D vector as list or np.array containing the axis around which the spring acts, either in local body0 coordinates (useGlobalFrame=False), or in global reference configuration (useGlobalFrame=True)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">stiffness</span></code>: scalar stiffness of spring</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">damping</span></code>: scalar damping added to spring</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">offset</span></code>: scalar offset, which can be used to realize a P-controlled actuator</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">velocityOffset</span></code>: scalar velocity offset, which can be used to realize a D-controlled actuator</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">torque</span></code>: additional constant torque added to spring-damper, acting between the two bodies</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">useGlobalFrame</span></code>: if False, the position and axis vectors are defined in the local coordinate system of body0, otherwise in global (reference) coordinates</div>
<div class="line">springTorqueUserFunction : a user function springTorqueUserFunction(mbs, t, itemNumber, rotation, angularVelocity, stiffness, damping, offset)-&gt;float ; this function replaces the internal connector torque computation</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">unlimitedRotations</span></code>: if True, an additional generic data node is added to enable measurement of rotations beyond +/- pi; this also allows the spring to cope with multiple turns.</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">show</span></code>: if True, connector visualization is drawn</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">drawSize</span></code>: general drawing size of connector</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">color</span></code>: color of connector</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>output</em>:</div>
<div class="line">ObjectIndex; returns index of newly created object</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>example</em>:</div>
</div>
</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#coming later</span>
</pre></div>
</div>
</section>
<section id="function-createrevolutejoint">
<span id="sec-mainsystemextensions-createrevolutejoint"></span><h3>Function: CreateRevoluteJoint<a class="headerlink" href="#function-createrevolutejoint" title="Link to this heading"></a></h3>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/mainSystemExtensions.py#L1089">CreateRevoluteJoint</a>(<code class="docutils literal notranslate"><span class="pre">name</span> <span class="pre">=</span> <span class="pre">''</span></code>, <code class="docutils literal notranslate"><span class="pre">bodyNumbers</span> <span class="pre">=</span> <span class="pre">[None,</span> <span class="pre">None]</span></code>, <code class="docutils literal notranslate"><span class="pre">position</span> <span class="pre">=</span> <span class="pre">[]</span></code>, <code class="docutils literal notranslate"><span class="pre">axis</span> <span class="pre">=</span> <span class="pre">[]</span></code>, <code class="docutils literal notranslate"><span class="pre">useGlobalFrame</span> <span class="pre">=</span> <span class="pre">True</span></code>, <code class="docutils literal notranslate"><span class="pre">show</span> <span class="pre">=</span> <span class="pre">True</span></code>, <code class="docutils literal notranslate"><span class="pre">axisRadius</span> <span class="pre">=</span> <span class="pre">0.1</span></code>, <code class="docutils literal notranslate"><span class="pre">axisLength</span> <span class="pre">=</span> <span class="pre">0.4</span></code>, <code class="docutils literal notranslate"><span class="pre">color</span> <span class="pre">=</span> <span class="pre">exudyn.graphics.color.default</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>function description</em>:</div>
<div class="line">Create revolute joint between two bodies; definition of joint position and axis in global coordinates (alternatively in body0 local coordinates) for reference configuration of bodies; all markers, markerRotation and other quantities are automatically computed</div>
<div class="line">- NOTE that this function is added to MainSystem via Python function MainSystemCreateRevoluteJoint.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>input</em>:</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">name</span></code>: name string for joint; markers get Marker0:name and Marker1:name</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">bodyNumbers</span></code>: a list of object numbers for body0 and body1; must be rigid body or ground object</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">position</span></code>: a 3D vector as list or np.array: if useGlobalFrame=True it describes the global position of the joint in reference configuration; else: local position in body0</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">axis</span></code>: a 3D vector as list or np.array containing the joint axis either in local body0 coordinates (useGlobalFrame=False), or in global reference configuration (useGlobalFrame=True)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">useGlobalFrame</span></code>: if False, the position and axis vectors are defined in the local coordinate system of body0, otherwise in global (reference) coordinates</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">show</span></code>: if True, connector visualization is drawn</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">axisRadius</span></code>: radius of axis for connector graphical representation</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">axisLength</span></code>: length of axis for connector graphical representation</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">color</span></code>: color of connector</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>output</em>:</div>
<div class="line">ObjectIndex; returns index of created joint</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>example</em>:</div>
</div>
</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">exudyn</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">exu</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">exudyn.utilities</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span> <span class="c1">#includes itemInterface and rigidBodyUtilities</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="n">SC</span> <span class="o">=</span> <span class="n">exu</span><span class="o">.</span><span class="nc">SystemContainer</span><span class="p">()</span>
<span class="n">mbs</span> <span class="o">=</span> <span class="n">SC</span><span class="o">.</span><span class="nf">AddSystem</span><span class="p">()</span>
<span class="n">b0</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">CreateRigidBody</span><span class="p">(</span><span class="n">inertia</span> <span class="o">=</span> <span class="nc">InertiaCuboid</span><span class="p">(</span><span class="n">density</span><span class="o">=</span><span class="mi">5000</span><span class="p">,</span>
                                                 <span class="n">sideLengths</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.1</span><span class="p">]),</span>
                         <span class="n">referencePosition</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
                         <span class="n">gravity</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">9.81</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
                         <span class="n">graphicsDataList</span> <span class="o">=</span> <span class="p">[</span><span class="n">exu</span><span class="o">.</span><span class="n">graphics</span><span class="o">.</span><span class="nf">Brick</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.1</span><span class="p">],</span>
                                                                      <span class="n">color</span><span class="o">=</span><span class="n">exu</span><span class="o">.</span><span class="n">graphics</span><span class="o">.</span><span class="n">color</span><span class="o">.</span><span class="n">steelblue</span><span class="p">)])</span>
<span class="n">oGround</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">AddObject</span><span class="p">(</span><span class="nc">ObjectGround</span><span class="p">())</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">CreateRevoluteJoint</span><span class="p">(</span><span class="n">bodyNumbers</span><span class="o">=</span><span class="p">[</span><span class="n">oGround</span><span class="p">,</span> <span class="n">b0</span><span class="p">],</span> <span class="n">position</span><span class="o">=</span><span class="p">[</span><span class="mf">2.5</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span>
                        <span class="n">useGlobalFrame</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">axisRadius</span><span class="o">=</span><span class="mf">0.02</span><span class="p">,</span> <span class="n">axisLength</span><span class="o">=</span><span class="mf">0.14</span><span class="p">)</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">Assemble</span><span class="p">()</span>
<span class="n">simulationSettings</span> <span class="o">=</span> <span class="n">exu</span><span class="o">.</span><span class="nc">SimulationSettings</span><span class="p">()</span> <span class="c1">#takes currently set values or default values</span>
<span class="n">simulationSettings</span><span class="o">.</span><span class="n">timeIntegration</span><span class="o">.</span><span class="n">numberOfSteps</span> <span class="o">=</span> <span class="mi">1000</span>
<span class="n">simulationSettings</span><span class="o">.</span><span class="n">timeIntegration</span><span class="o">.</span><span class="n">endTime</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">SolveDynamic</span><span class="p">(</span><span class="n">simulationSettings</span> <span class="o">=</span> <span class="n">simulationSettings</span><span class="p">)</span>
</pre></div>
</div>
<p>Relevant Examples (Ex) and TestModels (TM) with weblink to github:</p>
<blockquote>
<div><p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/addRevoluteJoint.py">addRevoluteJoint.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/bicycleIftommBenchmark.py">bicycleIftommBenchmark.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/chatGPTupdate.py">chatGPTupdate.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/chatGPTupdate2.py">chatGPTupdate2.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/multiMbsTest.py">multiMbsTest.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/bricardMechanism.py">bricardMechanism.py</a> (TM), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/createRollingDiscPenaltyTest.py">createRollingDiscPenaltyTest.py</a> (TM), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/mainSystemExtensionsTests.py">mainSystemExtensionsTests.py</a> (TM)</p>
</div></blockquote>
</section>
<section id="function-createprismaticjoint">
<span id="sec-mainsystemextensions-createprismaticjoint"></span><h3>Function: CreatePrismaticJoint<a class="headerlink" href="#function-createprismaticjoint" title="Link to this heading"></a></h3>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/mainSystemExtensions.py#L1191">CreatePrismaticJoint</a>(<code class="docutils literal notranslate"><span class="pre">name</span> <span class="pre">=</span> <span class="pre">''</span></code>, <code class="docutils literal notranslate"><span class="pre">bodyNumbers</span> <span class="pre">=</span> <span class="pre">[None,</span> <span class="pre">None]</span></code>, <code class="docutils literal notranslate"><span class="pre">position</span> <span class="pre">=</span> <span class="pre">[]</span></code>, <code class="docutils literal notranslate"><span class="pre">axis</span> <span class="pre">=</span> <span class="pre">[]</span></code>, <code class="docutils literal notranslate"><span class="pre">useGlobalFrame</span> <span class="pre">=</span> <span class="pre">True</span></code>, <code class="docutils literal notranslate"><span class="pre">show</span> <span class="pre">=</span> <span class="pre">True</span></code>, <code class="docutils literal notranslate"><span class="pre">axisRadius</span> <span class="pre">=</span> <span class="pre">0.1</span></code>, <code class="docutils literal notranslate"><span class="pre">axisLength</span> <span class="pre">=</span> <span class="pre">0.4</span></code>, <code class="docutils literal notranslate"><span class="pre">color</span> <span class="pre">=</span> <span class="pre">exudyn.graphics.color.default</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>function description</em>:</div>
<div class="line">Create prismatic joint between two bodies; definition of joint position and axis in global coordinates (alternatively in body0 local coordinates) for reference configuration of bodies; all markers, markerRotation and other quantities are automatically computed</div>
<div class="line">- NOTE that this function is added to MainSystem via Python function MainSystemCreatePrismaticJoint.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>input</em>:</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">name</span></code>: name string for joint; markers get Marker0:name and Marker1:name</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">bodyNumbers</span></code>: a list of object numbers for body0 and body1; must be rigid body or ground object</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">position</span></code>: a 3D vector as list or np.array: if useGlobalFrame=True it describes the global position of the joint in reference configuration; else: local position in body0</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">axis</span></code>: a 3D vector as list or np.array containing the joint axis either in local body0 coordinates (useGlobalFrame=False), or in global reference configuration (useGlobalFrame=True)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">useGlobalFrame</span></code>: if False, the position and axis vectors are defined in the local coordinate system of body0, otherwise in global (reference) coordinates</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">show</span></code>: if True, connector visualization is drawn</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">axisRadius</span></code>: radius of axis for connector graphical representation</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">axisLength</span></code>: length of axis for connector graphical representation</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">color</span></code>: color of connector</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>output</em>:</div>
<div class="line">ObjectIndex; returns index of created joint</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>example</em>:</div>
</div>
</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">exudyn</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">exu</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">exudyn.utilities</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span> <span class="c1">#includes itemInterface and rigidBodyUtilities</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="n">SC</span> <span class="o">=</span> <span class="n">exu</span><span class="o">.</span><span class="nc">SystemContainer</span><span class="p">()</span>
<span class="n">mbs</span> <span class="o">=</span> <span class="n">SC</span><span class="o">.</span><span class="nf">AddSystem</span><span class="p">()</span>
<span class="n">b0</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">CreateRigidBody</span><span class="p">(</span><span class="n">inertia</span> <span class="o">=</span> <span class="nc">InertiaCuboid</span><span class="p">(</span><span class="n">density</span><span class="o">=</span><span class="mi">5000</span><span class="p">,</span>
                                                 <span class="n">sideLengths</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.1</span><span class="p">]),</span>
                         <span class="n">referencePosition</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
                         <span class="n">initialVelocity</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
                         <span class="n">gravity</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">9.81</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
                         <span class="n">graphicsDataList</span> <span class="o">=</span> <span class="p">[</span><span class="n">exu</span><span class="o">.</span><span class="n">graphics</span><span class="o">.</span><span class="nf">Brick</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.1</span><span class="p">],</span>
                                                                      <span class="n">color</span><span class="o">=</span><span class="n">exu</span><span class="o">.</span><span class="n">graphics</span><span class="o">.</span><span class="n">color</span><span class="o">.</span><span class="n">steelblue</span><span class="p">)])</span>
<span class="n">oGround</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">AddObject</span><span class="p">(</span><span class="nc">ObjectGround</span><span class="p">())</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">CreatePrismaticJoint</span><span class="p">(</span><span class="n">bodyNumbers</span><span class="o">=</span><span class="p">[</span><span class="n">oGround</span><span class="p">,</span> <span class="n">b0</span><span class="p">],</span> <span class="n">position</span><span class="o">=</span><span class="p">[</span><span class="mf">3.5</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
                         <span class="n">useGlobalFrame</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">axisRadius</span><span class="o">=</span><span class="mf">0.02</span><span class="p">,</span> <span class="n">axisLength</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">Assemble</span><span class="p">()</span>
<span class="n">simulationSettings</span> <span class="o">=</span> <span class="n">exu</span><span class="o">.</span><span class="nc">SimulationSettings</span><span class="p">()</span> <span class="c1">#takes currently set values or default values</span>
<span class="n">simulationSettings</span><span class="o">.</span><span class="n">timeIntegration</span><span class="o">.</span><span class="n">numberOfSteps</span> <span class="o">=</span> <span class="mi">1000</span>
<span class="n">simulationSettings</span><span class="o">.</span><span class="n">timeIntegration</span><span class="o">.</span><span class="n">endTime</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">SolveDynamic</span><span class="p">(</span><span class="n">simulationSettings</span> <span class="o">=</span> <span class="n">simulationSettings</span><span class="p">)</span>
</pre></div>
</div>
<p>Relevant Examples (Ex) and TestModels (TM) with weblink to github:</p>
<blockquote>
<div><p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/addPrismaticJoint.py">addPrismaticJoint.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/chatGPTupdate.py">chatGPTupdate.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/chatGPTupdate2.py">chatGPTupdate2.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/mainSystemExtensionsTests.py">mainSystemExtensionsTests.py</a> (TM), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/pickleCopyMbs.py">pickleCopyMbs.py</a> (TM)</p>
</div></blockquote>
</section>
<section id="function-createsphericaljoint">
<span id="sec-mainsystemextensions-createsphericaljoint"></span><h3>Function: CreateSphericalJoint<a class="headerlink" href="#function-createsphericaljoint" title="Link to this heading"></a></h3>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/mainSystemExtensions.py#L1286">CreateSphericalJoint</a>(<code class="docutils literal notranslate"><span class="pre">name</span> <span class="pre">=</span> <span class="pre">''</span></code>, <code class="docutils literal notranslate"><span class="pre">bodyNumbers</span> <span class="pre">=</span> <span class="pre">[None,</span> <span class="pre">None]</span></code>, <code class="docutils literal notranslate"><span class="pre">position</span> <span class="pre">=</span> <span class="pre">[]</span></code>, <code class="docutils literal notranslate"><span class="pre">constrainedAxes</span> <span class="pre">=</span> <span class="pre">[1,1,1]</span></code>, <code class="docutils literal notranslate"><span class="pre">useGlobalFrame</span> <span class="pre">=</span> <span class="pre">True</span></code>, <code class="docutils literal notranslate"><span class="pre">show</span> <span class="pre">=</span> <span class="pre">True</span></code>, <code class="docutils literal notranslate"><span class="pre">jointRadius</span> <span class="pre">=</span> <span class="pre">0.1</span></code>, <code class="docutils literal notranslate"><span class="pre">color</span> <span class="pre">=</span> <span class="pre">exudyn.graphics.color.default</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>function description</em>:</div>
<div class="line">Create spherical joint between two bodies; definition of joint position in global coordinates (alternatively in body0 local coordinates) for reference configuration of bodies; all markers are automatically computed</div>
<div class="line">- NOTE that this function is added to MainSystem via Python function MainSystemCreateSphericalJoint.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>input</em>:</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">name</span></code>: name string for joint; markers get Marker0:name and Marker1:name</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">bodyNumbers</span></code>: a list of object numbers for body0 and body1; must be mass point, rigid body or ground object</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">position</span></code>: a 3D vector as list or np.array: if useGlobalFrame=True it describes the global position of the joint in reference configuration; else: local position in body0</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">constrainedAxes</span></code>: flags, which determines which (global) translation axes are constrained; each entry may only be 0 (=free) axis or 1 (=constrained axis)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">useGlobalFrame</span></code>: if False, the point and axis vectors are defined in the local coordinate system of body0</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">show</span></code>: if True, connector visualization is drawn</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">jointRadius</span></code>: radius of sphere for connector graphical representation</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">color</span></code>: color of connector</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>output</em>:</div>
<div class="line">ObjectIndex; returns index of created joint</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>example</em>:</div>
</div>
</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">exudyn</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">exu</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">exudyn.utilities</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span> <span class="c1">#includes itemInterface and rigidBodyUtilities</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="n">SC</span> <span class="o">=</span> <span class="n">exu</span><span class="o">.</span><span class="nc">SystemContainer</span><span class="p">()</span>
<span class="n">mbs</span> <span class="o">=</span> <span class="n">SC</span><span class="o">.</span><span class="nf">AddSystem</span><span class="p">()</span>
<span class="n">b0</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">CreateRigidBody</span><span class="p">(</span><span class="n">inertia</span> <span class="o">=</span> <span class="nc">InertiaCuboid</span><span class="p">(</span><span class="n">density</span><span class="o">=</span><span class="mi">5000</span><span class="p">,</span>
                                                 <span class="n">sideLengths</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.1</span><span class="p">]),</span>
                         <span class="n">referencePosition</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
                         <span class="n">initialAngularVelocity</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
                         <span class="n">gravity</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">9.81</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
                         <span class="n">graphicsDataList</span> <span class="o">=</span> <span class="p">[</span><span class="n">exu</span><span class="o">.</span><span class="n">graphics</span><span class="o">.</span><span class="nf">Brick</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.1</span><span class="p">],</span>
                                                                      <span class="n">color</span><span class="o">=</span><span class="n">exu</span><span class="o">.</span><span class="n">graphics</span><span class="o">.</span><span class="n">color</span><span class="o">.</span><span class="n">orange</span><span class="p">)])</span>
<span class="n">oGround</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">AddObject</span><span class="p">(</span><span class="nc">ObjectGround</span><span class="p">())</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">CreateSphericalJoint</span><span class="p">(</span><span class="n">bodyNumbers</span><span class="o">=</span><span class="p">[</span><span class="n">oGround</span><span class="p">,</span> <span class="n">b0</span><span class="p">],</span> <span class="n">position</span><span class="o">=</span><span class="p">[</span><span class="mf">5.5</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
                         <span class="n">useGlobalFrame</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">jointRadius</span><span class="o">=</span><span class="mf">0.06</span><span class="p">)</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">Assemble</span><span class="p">()</span>
<span class="n">simulationSettings</span> <span class="o">=</span> <span class="n">exu</span><span class="o">.</span><span class="nc">SimulationSettings</span><span class="p">()</span> <span class="c1">#takes currently set values or default values</span>
<span class="n">simulationSettings</span><span class="o">.</span><span class="n">timeIntegration</span><span class="o">.</span><span class="n">numberOfSteps</span> <span class="o">=</span> <span class="mi">1000</span>
<span class="n">simulationSettings</span><span class="o">.</span><span class="n">timeIntegration</span><span class="o">.</span><span class="n">endTime</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">SolveDynamic</span><span class="p">(</span><span class="n">simulationSettings</span> <span class="o">=</span> <span class="n">simulationSettings</span><span class="p">)</span>
</pre></div>
</div>
<p>Relevant Examples (Ex) and TestModels (TM) with weblink to github:</p>
<blockquote>
<div><p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/driveTrainTest.py">driveTrainTest.py</a> (TM), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/mainSystemExtensionsTests.py">mainSystemExtensionsTests.py</a> (TM)</p>
</div></blockquote>
</section>
<section id="function-creategenericjoint">
<span id="sec-mainsystemextensions-creategenericjoint"></span><h3>Function: CreateGenericJoint<a class="headerlink" href="#function-creategenericjoint" title="Link to this heading"></a></h3>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/mainSystemExtensions.py#L1376">CreateGenericJoint</a>(<code class="docutils literal notranslate"><span class="pre">name</span> <span class="pre">=</span> <span class="pre">''</span></code>, <code class="docutils literal notranslate"><span class="pre">bodyNumbers</span> <span class="pre">=</span> <span class="pre">[None,</span> <span class="pre">None]</span></code>, <code class="docutils literal notranslate"><span class="pre">position</span> <span class="pre">=</span> <span class="pre">[]</span></code>, <code class="docutils literal notranslate"><span class="pre">rotationMatrixAxes</span> <span class="pre">=</span> <span class="pre">np.eye(3)</span></code>, <code class="docutils literal notranslate"><span class="pre">constrainedAxes</span> <span class="pre">=</span> <span class="pre">[1,1,1,</span> <span class="pre">1,1,1]</span></code>, <code class="docutils literal notranslate"><span class="pre">useGlobalFrame</span> <span class="pre">=</span> <span class="pre">True</span></code>, <code class="docutils literal notranslate"><span class="pre">offsetUserFunction</span> <span class="pre">=</span> <span class="pre">0</span></code>, <code class="docutils literal notranslate"><span class="pre">offsetUserFunction_t</span> <span class="pre">=</span> <span class="pre">0</span></code>, <code class="docutils literal notranslate"><span class="pre">show</span> <span class="pre">=</span> <span class="pre">True</span></code>, <code class="docutils literal notranslate"><span class="pre">axesRadius</span> <span class="pre">=</span> <span class="pre">0.1</span></code>, <code class="docutils literal notranslate"><span class="pre">axesLength</span> <span class="pre">=</span> <span class="pre">0.4</span></code>, <code class="docutils literal notranslate"><span class="pre">color</span> <span class="pre">=</span> <span class="pre">exudyn.graphics.color.default</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>function description</em>:</div>
<div class="line">Create generic joint between two bodies; definition of joint position (position) and axes (rotationMatrixAxes) in global coordinates (useGlobalFrame=True) or in local coordinates of body0 (useGlobalFrame=False), where rotationMatrixAxes is an additional rotation to body0; all markers, markerRotation and other quantities are automatically computed</div>
<div class="line">- NOTE that this function is added to MainSystem via Python function MainSystemCreateGenericJoint.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>input</em>:</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">name</span></code>: name string for joint; markers get Marker0:name and Marker1:name</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">bodyNumber0</span></code>: a object number for body0, must be rigid body or ground object</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">bodyNumber1</span></code>: a object number for body1, must be rigid body or ground object</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">position</span></code>: a 3D vector as list or np.array: if useGlobalFrame=True it describes the global position of the joint in reference configuration; else: local position in body0</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">rotationMatrixAxes</span></code>: rotation matrix which defines orientation of constrainedAxes; if useGlobalFrame, this rotation matrix is global, else the rotation matrix is post-multiplied with the rotation of body0, identical with rotationMarker0 in the joint</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">constrainedAxes</span></code>: flag, which determines which translation (0,1,2) and rotation (3,4,5) axes are constrained; each entry may only be 0 (=free) axis or 1 (=constrained axis); ALL constrained Axes are defined relative to reference rotation of body0 times rotation0</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">useGlobalFrame</span></code>: if False, the position is defined in the local coordinate system of body0, otherwise it is defined in global coordinates</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">offsetUserFunction</span></code>: a user function offsetUserFunction(mbs, t, itemNumber, offsetUserFunctionParameters)-&gt;float ; this function replaces the internal (constant) by a user-defined offset. This allows to realize rheonomic joints and allows kinematic simulation</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">offsetUserFunction_t</span></code>: a user function offsetUserFunction_t(mbs, t, itemNumber, offsetUserFunctionParameters)-&gt;float ; this function replaces the internal (constant) by a user-defined offset velocity; this function is used instead of offsetUserFunction, if velocityLevel (index2) time integration</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">show</span></code>: if True, connector visualization is drawn</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">axesRadius</span></code>: radius of axes for connector graphical representation</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">axesLength</span></code>: length of axes for connector graphical representation</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">color</span></code>: color of connector</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>output</em>:</div>
<div class="line">ObjectIndex; returns index of created joint</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>example</em>:</div>
</div>
</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">exudyn</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">exu</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">exudyn.utilities</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span> <span class="c1">#includes itemInterface and rigidBodyUtilities</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="n">SC</span> <span class="o">=</span> <span class="n">exu</span><span class="o">.</span><span class="nc">SystemContainer</span><span class="p">()</span>
<span class="n">mbs</span> <span class="o">=</span> <span class="n">SC</span><span class="o">.</span><span class="nf">AddSystem</span><span class="p">()</span>
<span class="n">b0</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">CreateRigidBody</span><span class="p">(</span><span class="n">inertia</span> <span class="o">=</span> <span class="nc">InertiaCuboid</span><span class="p">(</span><span class="n">density</span><span class="o">=</span><span class="mi">5000</span><span class="p">,</span>
                                                 <span class="n">sideLengths</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.1</span><span class="p">]),</span>
                         <span class="n">referencePosition</span> <span class="o">=</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
                         <span class="n">initialAngularVelocity</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
                         <span class="n">gravity</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">9.81</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
                         <span class="n">graphicsDataList</span> <span class="o">=</span> <span class="p">[</span><span class="n">exu</span><span class="o">.</span><span class="n">graphics</span><span class="o">.</span><span class="nf">Brick</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.1</span><span class="p">],</span>
                                                                      <span class="n">color</span><span class="o">=</span><span class="n">exu</span><span class="o">.</span><span class="n">graphics</span><span class="o">.</span><span class="n">color</span><span class="o">.</span><span class="n">orange</span><span class="p">)])</span>
<span class="n">oGround</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">AddObject</span><span class="p">(</span><span class="nc">ObjectGround</span><span class="p">())</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">CreateGenericJoint</span><span class="p">(</span><span class="n">bodyNumbers</span><span class="o">=</span><span class="p">[</span><span class="n">oGround</span><span class="p">,</span> <span class="n">b0</span><span class="p">],</span> <span class="n">position</span><span class="o">=</span><span class="p">[</span><span class="mf">5.5</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
                       <span class="n">constrainedAxes</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
                       <span class="n">rotationMatrixAxes</span><span class="o">=</span><span class="nf">RotationMatrixX</span><span class="p">(</span><span class="mf">0.125</span><span class="o">*</span><span class="n">pi</span><span class="p">),</span> <span class="c1">#tilt axes</span>
                       <span class="n">useGlobalFrame</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">axesRadius</span><span class="o">=</span><span class="mf">0.02</span><span class="p">,</span> <span class="n">axesLength</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">Assemble</span><span class="p">()</span>
<span class="n">simulationSettings</span> <span class="o">=</span> <span class="n">exu</span><span class="o">.</span><span class="nc">SimulationSettings</span><span class="p">()</span> <span class="c1">#takes currently set values or default values</span>
<span class="n">simulationSettings</span><span class="o">.</span><span class="n">timeIntegration</span><span class="o">.</span><span class="n">numberOfSteps</span> <span class="o">=</span> <span class="mi">1000</span>
<span class="n">simulationSettings</span><span class="o">.</span><span class="n">timeIntegration</span><span class="o">.</span><span class="n">endTime</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">SolveDynamic</span><span class="p">(</span><span class="n">simulationSettings</span> <span class="o">=</span> <span class="n">simulationSettings</span><span class="p">)</span>
</pre></div>
</div>
<p>Relevant Examples (Ex) and TestModels (TM) with weblink to github:</p>
<blockquote>
<div><p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/bungeeJump.py">bungeeJump.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/pistonEngine.py">pistonEngine.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/universalJoint.py">universalJoint.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/bricardMechanism.py">bricardMechanism.py</a> (TM), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/complexEigenvaluesTest.py">complexEigenvaluesTest.py</a> (TM), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/computeODE2AEeigenvaluesTest.py">computeODE2AEeigenvaluesTest.py</a> (TM), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/driveTrainTest.py">driveTrainTest.py</a> (TM), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/generalContactImplicit2.py">generalContactImplicit2.py</a> (TM)</p>
</div></blockquote>
</section>
<section id="function-createdistanceconstraint">
<span id="sec-mainsystemextensions-createdistanceconstraint"></span><h3>Function: CreateDistanceConstraint<a class="headerlink" href="#function-createdistanceconstraint" title="Link to this heading"></a></h3>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/mainSystemExtensions.py#L1490">CreateDistanceConstraint</a>(<code class="docutils literal notranslate"><span class="pre">name</span> <span class="pre">=</span> <span class="pre">''</span></code>, <code class="docutils literal notranslate"><span class="pre">bodyNumbers</span> <span class="pre">=</span> <span class="pre">[None,</span> <span class="pre">None]</span></code>, <code class="docutils literal notranslate"><span class="pre">localPosition0</span> <span class="pre">=</span> <span class="pre">[0.,0.,0.]</span></code>, <code class="docutils literal notranslate"><span class="pre">localPosition1</span> <span class="pre">=</span> <span class="pre">[0.,0.,0.]</span></code>, <code class="docutils literal notranslate"><span class="pre">distance</span> <span class="pre">=</span> <span class="pre">None</span></code>, <code class="docutils literal notranslate"><span class="pre">bodyOrNodeList</span> <span class="pre">=</span> <span class="pre">[None,</span> <span class="pre">None]</span></code>, <code class="docutils literal notranslate"><span class="pre">bodyList</span> <span class="pre">=</span> <span class="pre">[None,</span> <span class="pre">None]</span></code>, <code class="docutils literal notranslate"><span class="pre">show</span> <span class="pre">=</span> <span class="pre">True</span></code>, <code class="docutils literal notranslate"><span class="pre">drawSize</span> <span class="pre">=</span> <span class="pre">-1.</span></code>, <code class="docutils literal notranslate"><span class="pre">color</span> <span class="pre">=</span> <span class="pre">exudyn.graphics.color.default</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>function description</em>:</div>
<div class="line">Create distance joint between two bodies; definition of joint positions in local coordinates of bodies or nodes; if distance=None, it is computed automatically from reference length; all markers are automatically computed</div>
<div class="line">- NOTE that this function is added to MainSystem via Python function MainSystemCreateDistanceConstraint.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>input</em>:</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">name</span></code>: name string for joint; markers get Marker0:name and Marker1:name</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">bodyNumbers</span></code>: a list of two body numbers (ObjectIndex) to be constrained</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">localPosition0</span></code>: local position (as 3D list or numpy array) on body0, if not a node number</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">localPosition1</span></code>: local position (as 3D list or numpy array) on body1, if not a node number</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">distance</span></code>: if None, distance is computed from reference position of bodies or nodes; if not None, this distance is prescribed between the two positions; if distance = 0, it will create a SphericalJoint as this case is not possible with a DistanceConstraint</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">bodyOrNodeList</span></code>: alternative to bodyNumbers; a list of object numbers (with specific localPosition0/1) or node numbers; may alse be mixed types; to use this case, set bodyNumbers = [None,None]</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">show</span></code>: if True, connector visualization is drawn</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">drawSize</span></code>: general drawing size of node</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">color</span></code>: color of connector</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>output</em>:</div>
<div class="line">ObjectIndex; returns index of created joint</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>example</em>:</div>
</div>
</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">exudyn</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">exu</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">exudyn.utilities</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span> <span class="c1">#includes itemInterface and rigidBodyUtilities</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="n">SC</span> <span class="o">=</span> <span class="n">exu</span><span class="o">.</span><span class="nc">SystemContainer</span><span class="p">()</span>
<span class="n">mbs</span> <span class="o">=</span> <span class="n">SC</span><span class="o">.</span><span class="nf">AddSystem</span><span class="p">()</span>
<span class="n">b0</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">CreateRigidBody</span><span class="p">(</span><span class="n">inertia</span> <span class="o">=</span> <span class="nc">InertiaCuboid</span><span class="p">(</span><span class="n">density</span><span class="o">=</span><span class="mi">5000</span><span class="p">,</span>
                                                  <span class="n">sideLengths</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.1</span><span class="p">]),</span>
                          <span class="n">referencePosition</span> <span class="o">=</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
                          <span class="n">gravity</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">9.81</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
                          <span class="n">graphicsDataList</span> <span class="o">=</span> <span class="p">[</span><span class="n">exu</span><span class="o">.</span><span class="n">graphics</span><span class="o">.</span><span class="nf">Brick</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.1</span><span class="p">],</span>
                                                                      <span class="n">color</span><span class="o">=</span><span class="n">exu</span><span class="o">.</span><span class="n">graphics</span><span class="o">.</span><span class="n">color</span><span class="o">.</span><span class="n">orange</span><span class="p">)])</span>
<span class="n">m1</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">CreateMassPoint</span><span class="p">(</span><span class="n">referencePosition</span><span class="o">=</span><span class="p">[</span><span class="mf">5.5</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
                         <span class="n">physicsMass</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">drawSize</span> <span class="o">=</span> <span class="mf">0.2</span><span class="p">)</span>
<span class="n">n1</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">GetObject</span><span class="p">(</span><span class="n">m1</span><span class="p">)[</span><span class="s1">&#39;nodeNumber&#39;</span><span class="p">]</span>
<span class="n">oGround</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">AddObject</span><span class="p">(</span><span class="nc">ObjectGround</span><span class="p">())</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">CreateDistanceConstraint</span><span class="p">(</span><span class="n">bodyNumbers</span><span class="o">=</span><span class="p">[</span><span class="n">oGround</span><span class="p">,</span> <span class="n">b0</span><span class="p">],</span>
                             <span class="n">localPosition0</span> <span class="o">=</span> <span class="p">[</span><span class="mf">6.5</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
                             <span class="n">localPosition1</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.5</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
                             <span class="n">distance</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="c1">#automatically computed</span>
                             <span class="n">drawSize</span><span class="o">=</span><span class="mf">0.06</span><span class="p">)</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">CreateDistanceConstraint</span><span class="p">(</span><span class="n">bodyOrNodeList</span><span class="o">=</span><span class="p">[</span><span class="n">b0</span><span class="p">,</span> <span class="n">n1</span><span class="p">],</span>
                             <span class="n">localPosition0</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mf">0.5</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
                             <span class="n">localPosition1</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">],</span> <span class="c1">#must be [0,0,0] for Node</span>
                             <span class="n">distance</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="c1">#automatically computed</span>
                             <span class="n">drawSize</span><span class="o">=</span><span class="mf">0.06</span><span class="p">)</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">Assemble</span><span class="p">()</span>
<span class="n">simulationSettings</span> <span class="o">=</span> <span class="n">exu</span><span class="o">.</span><span class="nc">SimulationSettings</span><span class="p">()</span> <span class="c1">#takes currently set values or default values</span>
<span class="n">simulationSettings</span><span class="o">.</span><span class="n">timeIntegration</span><span class="o">.</span><span class="n">numberOfSteps</span> <span class="o">=</span> <span class="mi">1000</span>
<span class="n">simulationSettings</span><span class="o">.</span><span class="n">timeIntegration</span><span class="o">.</span><span class="n">endTime</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">SolveDynamic</span><span class="p">(</span><span class="n">simulationSettings</span> <span class="o">=</span> <span class="n">simulationSettings</span><span class="p">)</span>
</pre></div>
</div>
<p>Relevant Examples (Ex) and TestModels (TM) with weblink to github:</p>
<blockquote>
<div><p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/chatGPTupdate.py">chatGPTupdate.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/chatGPTupdate2.py">chatGPTupdate2.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/newtonsCradle.py">newtonsCradle.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/mainSystemExtensionsTests.py">mainSystemExtensionsTests.py</a> (TM), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/taskmanagerTest.py">taskmanagerTest.py</a> (TM)</p>
</div></blockquote>
</section>
<section id="function-createrollingdisc">
<span id="sec-mainsystemextensions-createrollingdisc"></span><h3>Function: CreateRollingDisc<a class="headerlink" href="#function-createrollingdisc" title="Link to this heading"></a></h3>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/mainSystemExtensions.py#L1621">CreateRollingDisc</a>(<code class="docutils literal notranslate"><span class="pre">name</span> <span class="pre">=</span> <span class="pre">''</span></code>, <code class="docutils literal notranslate"><span class="pre">bodyNumbers</span> <span class="pre">=</span> <span class="pre">[None,</span> <span class="pre">None]</span></code>, <code class="docutils literal notranslate"><span class="pre">axisPosition</span> <span class="pre">=</span> <span class="pre">[]</span></code>, <code class="docutils literal notranslate"><span class="pre">axisVector</span> <span class="pre">=</span> <span class="pre">[1,0,0]</span></code>, <code class="docutils literal notranslate"><span class="pre">discRadius</span> <span class="pre">=</span> <span class="pre">0.</span></code>, <code class="docutils literal notranslate"><span class="pre">planePosition</span> <span class="pre">=</span> <span class="pre">[0,0,0]</span></code>, <code class="docutils literal notranslate"><span class="pre">planeNormal</span> <span class="pre">=</span> <span class="pre">[0,0,1]</span></code>, <code class="docutils literal notranslate"><span class="pre">constrainedAxes</span> <span class="pre">=</span> <span class="pre">[1,1,1]</span></code>, <code class="docutils literal notranslate"><span class="pre">show</span> <span class="pre">=</span> <span class="pre">True</span></code>, <code class="docutils literal notranslate"><span class="pre">discWidth</span> <span class="pre">=</span> <span class="pre">0.1</span></code>, <code class="docutils literal notranslate"><span class="pre">color</span> <span class="pre">=</span> <span class="pre">exudyn.graphics.color.default</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>function description</em>:</div>
<div class="line">Create an ideal rolling disc joint between wheel rigid body and ground; the disc is infinitely thin and the ground is a perfectly flat plane; the wheel may lift off; definition of joint position and axis in global coordinates (alternatively in wheel (body1) local coordinates) for reference configuration of bodies; all markers and other quantities are automatically computed; some constraint conditions may be deactivated, e.g. to resolve redundancy of constraints for multi-wheel vehicles</div>
<div class="line">- NOTE that this function is added to MainSystem via Python function MainSystemCreateRollingDisc.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>input</em>:</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">name</span></code>: name string for joint; markers get Marker0:name and Marker1:name</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">bodyNumbers</span></code>: a list of object numbers for body0=ground and body1=wheel; must be rigid body or ground object</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">axisPosition</span></code>: a 3D vector as list or np.array: position of wheel axis in local body1=wheel coordinates</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">axisVector</span></code>: a 3D vector as list or np.array containing the joint (=wheel) axis in local body1=wheel coordinates</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">discRadius</span></code>: radius of the disc</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">planePosition</span></code>: any 3D position vector of plane in ground object; given as local coordinates in ground object</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">planeNormal</span></code>: 3D normal vector of the rolling (contact) plane on ground; given as local coordinates in ground object</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">constrainedAxes</span></code>: [j0,j1,j2] flags, which determine which constraints are active, in which j0 represents the constraint for lateral motion, j1 longitudinal (forward/backward) motion and j2 represents the normal (contact) direction</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">show</span></code>: if True, connector visualization is drawn</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">discWidth</span></code>: disc with, only used for drawing</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">color</span></code>: color of connector</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>output</em>:</div>
<div class="line">ObjectIndex; returns index of created joint</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>example</em>:</div>
</div>
</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">exudyn</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">exu</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">exudyn.utilities</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span> <span class="c1">#includes itemInterface and rigidBodyUtilities</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="n">SC</span> <span class="o">=</span> <span class="n">exu</span><span class="o">.</span><span class="nc">SystemContainer</span><span class="p">()</span>
<span class="n">mbs</span> <span class="o">=</span> <span class="n">SC</span><span class="o">.</span><span class="nf">AddSystem</span><span class="p">()</span>
<span class="n">r</span> <span class="o">=</span> <span class="mf">0.2</span>
<span class="n">oDisc</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">CreateRigidBody</span><span class="p">(</span><span class="n">inertia</span> <span class="o">=</span> <span class="nc">InertiaCylinder</span><span class="p">(</span><span class="n">density</span><span class="o">=</span><span class="mi">5000</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">outerRadius</span><span class="o">=</span><span class="n">r</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">),</span>
                          <span class="n">referencePosition</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">r</span><span class="p">],</span>
                          <span class="n">initialAngularVelocity</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="o">*</span><span class="mi">2</span><span class="o">*</span><span class="n">pi</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
                          <span class="n">initialVelocity</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="n">r</span><span class="o">*</span><span class="mi">3</span><span class="o">*</span><span class="mi">2</span><span class="o">*</span><span class="n">pi</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
                          <span class="n">gravity</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">9.81</span><span class="p">],</span>
                          <span class="n">graphicsDataList</span> <span class="o">=</span> <span class="p">[</span><span class="n">exu</span><span class="o">.</span><span class="n">graphics</span><span class="o">.</span><span class="nf">Cylinder</span><span class="p">(</span><span class="n">pAxis</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mf">0.05</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="n">vAxis</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="n">radius</span> <span class="o">=</span> <span class="n">r</span><span class="o">*</span><span class="mf">0.99</span><span class="p">,</span>
                                                                    <span class="n">color</span><span class="o">=</span><span class="n">exu</span><span class="o">.</span><span class="n">graphics</span><span class="o">.</span><span class="n">color</span><span class="o">.</span><span class="n">blue</span><span class="p">),</span>
                                              <span class="n">exu</span><span class="o">.</span><span class="n">graphics</span><span class="o">.</span><span class="nf">Basis</span><span class="p">(</span><span class="n">length</span><span class="o">=</span><span class="mi">2</span><span class="o">*</span><span class="n">r</span><span class="p">)])</span>
<span class="n">oGround</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">CreateGround</span><span class="p">(</span><span class="n">graphicsDataList</span><span class="o">=</span><span class="p">[</span><span class="n">exu</span><span class="o">.</span><span class="n">graphics</span><span class="o">.</span><span class="nf">CheckerBoard</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">4</span><span class="p">)])</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">CreateRollingDisc</span><span class="p">(</span><span class="n">bodyNumbers</span><span class="o">=</span><span class="p">[</span><span class="n">oGround</span><span class="p">,</span> <span class="n">oDisc</span><span class="p">],</span>
                      <span class="n">axisPosition</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="n">axisVector</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="c1">#on local wheel frame</span>
                      <span class="n">planePosition</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="n">planeNormal</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span>  <span class="c1">#in ground frame</span>
                      <span class="n">discRadius</span> <span class="o">=</span> <span class="n">r</span><span class="p">,</span>
                      <span class="n">discWidth</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">exu</span><span class="o">.</span><span class="n">graphics</span><span class="o">.</span><span class="n">color</span><span class="o">.</span><span class="n">steelblue</span><span class="p">)</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">Assemble</span><span class="p">()</span>
<span class="n">simulationSettings</span> <span class="o">=</span> <span class="n">exu</span><span class="o">.</span><span class="nc">SimulationSettings</span><span class="p">()</span>
<span class="n">simulationSettings</span><span class="o">.</span><span class="n">timeIntegration</span><span class="o">.</span><span class="n">numberOfSteps</span> <span class="o">=</span> <span class="mi">1000</span>
<span class="n">simulationSettings</span><span class="o">.</span><span class="n">timeIntegration</span><span class="o">.</span><span class="n">endTime</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">SolveDynamic</span><span class="p">(</span><span class="n">simulationSettings</span> <span class="o">=</span> <span class="n">simulationSettings</span><span class="p">)</span>
</pre></div>
</div>
<p>Relevant Examples (Ex) and TestModels (TM) with weblink to github:</p>
<blockquote>
<div><p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/createRollingDiscTest.py">createRollingDiscTest.py</a> (TM)</p>
</div></blockquote>
</section>
<section id="function-createrollingdiscpenalty">
<span id="sec-mainsystemextensions-createrollingdiscpenalty"></span><h3>Function: CreateRollingDiscPenalty<a class="headerlink" href="#function-createrollingdiscpenalty" title="Link to this heading"></a></h3>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/mainSystemExtensions.py#L1729">CreateRollingDiscPenalty</a>(<code class="docutils literal notranslate"><span class="pre">name</span> <span class="pre">=</span> <span class="pre">''</span></code>, <code class="docutils literal notranslate"><span class="pre">bodyNumbers</span> <span class="pre">=</span> <span class="pre">[None,</span> <span class="pre">None]</span></code>, <code class="docutils literal notranslate"><span class="pre">axisPosition</span> <span class="pre">=</span> <span class="pre">[]</span></code>, <code class="docutils literal notranslate"><span class="pre">axisVector</span> <span class="pre">=</span> <span class="pre">[1,0,0]</span></code>, <code class="docutils literal notranslate"><span class="pre">discRadius</span> <span class="pre">=</span> <span class="pre">0.</span></code>, <code class="docutils literal notranslate"><span class="pre">planePosition</span> <span class="pre">=</span> <span class="pre">[0,0,0]</span></code>, <code class="docutils literal notranslate"><span class="pre">planeNormal</span> <span class="pre">=</span> <span class="pre">[0,0,1]</span></code>, <code class="docutils literal notranslate"><span class="pre">contactStiffness</span> <span class="pre">=</span> <span class="pre">0.</span></code>, <code class="docutils literal notranslate"><span class="pre">contactDamping</span> <span class="pre">=</span> <span class="pre">0.</span></code>, <code class="docutils literal notranslate"><span class="pre">dryFriction</span> <span class="pre">=</span> <span class="pre">[0,0]</span></code>, <code class="docutils literal notranslate"><span class="pre">dryFrictionAngle</span> <span class="pre">=</span> <span class="pre">0.</span></code>, <code class="docutils literal notranslate"><span class="pre">dryFrictionProportionalZone</span> <span class="pre">=</span> <span class="pre">0.</span></code>, <code class="docutils literal notranslate"><span class="pre">viscousFriction</span> <span class="pre">=</span> <span class="pre">[0,0]</span></code>, <code class="docutils literal notranslate"><span class="pre">rollingFrictionViscous</span> <span class="pre">=</span> <span class="pre">0.</span></code>, <code class="docutils literal notranslate"><span class="pre">useLinearProportionalZone</span> <span class="pre">=</span> <span class="pre">False</span></code>, <code class="docutils literal notranslate"><span class="pre">#activeConnector</span> <span class="pre">=</span> <span class="pre">True</span></code>, <code class="docutils literal notranslate"><span class="pre">show</span> <span class="pre">=</span> <span class="pre">True</span></code>, <code class="docutils literal notranslate"><span class="pre">discWidth</span> <span class="pre">=</span> <span class="pre">0.1</span></code>, <code class="docutils literal notranslate"><span class="pre">color</span> <span class="pre">=</span> <span class="pre">exudyn.graphics.color.default</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>function description</em>:</div>
<div class="line">Create penalty-based rolling disc joint between wheel rigid body and ground; the disc is infinitely thin and the ground is a perfectly flat plane; the wheel may lift off; definition of joint position and axis in global coordinates (alternatively in wheel (body1) local coordinates) for reference configuration of bodies; all markers and other quantities are automatically computed</div>
<div class="line">- NOTE that this function is added to MainSystem via Python function MainSystemCreateRollingDiscPenalty.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>input</em>:</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">name</span></code>: name string for joint; markers get Marker0:name and Marker1:name</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">bodyNumbers</span></code>: a list of object numbers for body0=ground and body1=wheel; must be rigid body or ground object</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">axisPosition</span></code>: a 3D vector as list or np.array: position of wheel axis in local body1=wheel coordinates</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">axisVector</span></code>: a 3D vector as list or np.array containing the joint (=wheel) axis in local body1=wheel coordinates</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">discRadius</span></code>: radius of the disc</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">planePosition</span></code>: any 3D position vector of plane in ground object; given as local coordinates in ground object</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">planeNormal</span></code>: 3D normal vector of the rolling (contact) plane on ground; given as local coordinates in ground object</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">dryFrictionAngle</span></code>: angle (radiant) which defines a rotation of the local tangential coordinates dry friction; this allows to model Mecanum wheels with specified roll angle</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">contactStiffness</span></code>: normal contact stiffness</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">contactDamping</span></code>: normal contact damping</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">dryFriction</span></code>: 2D list of friction parameters; dry friction coefficients in local wheel coordinates, where for dryFrictionAngle=0, the first parameter refers to forward direction and the second parameter to lateral direction</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">viscousFriction</span></code>: 2D list of viscous friction coefficients [SI:1/(m/s)] in local wheel coordinates; proportional to slipping velocity, leading to increasing slipping friction force for increasing slipping velocity; directions are same as in dryFriction</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">dryFrictionProportionalZone</span></code>: limit velocity [m/s] up to which the friction is proportional to velocity (for regularization / avoid numerical oscillations)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">rollingFrictionViscous</span></code>: rolling friction [SI:1], which acts against the velocity of the trail on ground and leads to a force proportional to the contact normal force;</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">useLinearProportionalZone</span></code>: if True, a linear proportional zone is used; the linear zone performs better in implicit time integration as the Jacobian has a constant tangent in the sticking case</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">show</span></code>: if True, connector visualization is drawn</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">discWidth</span></code>: disc with, only used for drawing</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">color</span></code>: color of connector</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>output</em>:</div>
<div class="line">ObjectIndex; returns index of created joint</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>example</em>:</div>
</div>
</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">exudyn</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">exu</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">exudyn.utilities</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span> <span class="c1">#includes itemInterface and rigidBodyUtilities</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="n">SC</span> <span class="o">=</span> <span class="n">exu</span><span class="o">.</span><span class="nc">SystemContainer</span><span class="p">()</span>
<span class="n">mbs</span> <span class="o">=</span> <span class="n">SC</span><span class="o">.</span><span class="nf">AddSystem</span><span class="p">()</span>
<span class="n">r</span> <span class="o">=</span> <span class="mf">0.2</span>
<span class="n">oDisc</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">CreateRigidBody</span><span class="p">(</span><span class="n">inertia</span> <span class="o">=</span> <span class="nc">InertiaCylinder</span><span class="p">(</span><span class="n">density</span><span class="o">=</span><span class="mi">5000</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">outerRadius</span><span class="o">=</span><span class="n">r</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">),</span>
                          <span class="n">referencePosition</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">r</span><span class="p">],</span>
                          <span class="n">initialAngularVelocity</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="o">*</span><span class="mi">2</span><span class="o">*</span><span class="n">pi</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
                          <span class="n">initialVelocity</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="n">r</span><span class="o">*</span><span class="mi">3</span><span class="o">*</span><span class="mi">2</span><span class="o">*</span><span class="n">pi</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
                          <span class="n">gravity</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">9.81</span><span class="p">],</span>
                          <span class="n">graphicsDataList</span> <span class="o">=</span> <span class="p">[</span><span class="n">exu</span><span class="o">.</span><span class="n">graphics</span><span class="o">.</span><span class="nf">Cylinder</span><span class="p">(</span><span class="n">pAxis</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mf">0.05</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="n">vAxis</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="n">radius</span> <span class="o">=</span> <span class="n">r</span><span class="o">*</span><span class="mf">0.99</span><span class="p">,</span>
                                                                    <span class="n">color</span><span class="o">=</span><span class="n">exu</span><span class="o">.</span><span class="n">graphics</span><span class="o">.</span><span class="n">color</span><span class="o">.</span><span class="n">blue</span><span class="p">),</span>
                                              <span class="n">exu</span><span class="o">.</span><span class="n">graphics</span><span class="o">.</span><span class="nf">Basis</span><span class="p">(</span><span class="n">length</span><span class="o">=</span><span class="mi">2</span><span class="o">*</span><span class="n">r</span><span class="p">)])</span>
<span class="n">oGround</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">CreateGround</span><span class="p">(</span><span class="n">graphicsDataList</span><span class="o">=</span><span class="p">[</span><span class="n">exu</span><span class="o">.</span><span class="n">graphics</span><span class="o">.</span><span class="nf">CheckerBoard</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">4</span><span class="p">)])</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">CreateRollingDiscPenalty</span><span class="p">(</span><span class="n">bodyNumbers</span><span class="o">=</span><span class="p">[</span><span class="n">oGround</span><span class="p">,</span> <span class="n">oDisc</span><span class="p">],</span> <span class="n">axisPosition</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="n">axisVector</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
                              <span class="n">discRadius</span> <span class="o">=</span> <span class="n">r</span><span class="p">,</span> <span class="n">planePosition</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="n">planeNormal</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span>
                              <span class="n">dryFriction</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.2</span><span class="p">,</span><span class="mf">0.2</span><span class="p">],</span>
                              <span class="n">contactStiffness</span> <span class="o">=</span> <span class="mf">1e5</span><span class="p">,</span> <span class="n">contactDamping</span> <span class="o">=</span> <span class="mf">2e3</span><span class="p">,</span>
                              <span class="n">discWidth</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">exu</span><span class="o">.</span><span class="n">graphics</span><span class="o">.</span><span class="n">color</span><span class="o">.</span><span class="n">steelblue</span><span class="p">)</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">Assemble</span><span class="p">()</span>
<span class="n">simulationSettings</span> <span class="o">=</span> <span class="n">exu</span><span class="o">.</span><span class="nc">SimulationSettings</span><span class="p">()</span>
<span class="n">simulationSettings</span><span class="o">.</span><span class="n">timeIntegration</span><span class="o">.</span><span class="n">numberOfSteps</span> <span class="o">=</span> <span class="mi">1000</span>
<span class="n">simulationSettings</span><span class="o">.</span><span class="n">timeIntegration</span><span class="o">.</span><span class="n">endTime</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">SolveDynamic</span><span class="p">(</span><span class="n">simulationSettings</span> <span class="o">=</span> <span class="n">simulationSettings</span><span class="p">)</span>
</pre></div>
</div>
<p>Relevant Examples (Ex) and TestModels (TM) with weblink to github:</p>
<blockquote>
<div><p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/createRollingDiscPenaltyTest.py">createRollingDiscPenaltyTest.py</a> (TM)</p>
</div></blockquote>
</section>
<section id="function-createforce">
<span id="sec-mainsystemextensions-createforce"></span><h3>Function: CreateForce<a class="headerlink" href="#function-createforce" title="Link to this heading"></a></h3>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/mainSystemExtensions.py#L1840">CreateForce</a>(<code class="docutils literal notranslate"><span class="pre">name</span> <span class="pre">=</span> <span class="pre">''</span></code>, <code class="docutils literal notranslate"><span class="pre">bodyNumber</span> <span class="pre">=</span> <span class="pre">None</span></code>, <code class="docutils literal notranslate"><span class="pre">loadVector</span> <span class="pre">=</span> <span class="pre">[0.,0.,0.]</span></code>, <code class="docutils literal notranslate"><span class="pre">localPosition</span> <span class="pre">=</span> <span class="pre">[0.,0.,0.]</span></code>, <code class="docutils literal notranslate"><span class="pre">bodyFixed</span> <span class="pre">=</span> <span class="pre">False</span></code>, <code class="docutils literal notranslate"><span class="pre">loadVectorUserFunction</span> <span class="pre">=</span> <span class="pre">0</span></code>, <code class="docutils literal notranslate"><span class="pre">show</span> <span class="pre">=</span> <span class="pre">True</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>function description</em>:</div>
<div class="line">helper function to create force applied to given body</div>
<div class="line">- NOTE that this function is added to MainSystem via Python function MainSystemCreateForce.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>input</em>:</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">name</span></code>: name string for object</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">bodyNumber</span></code>: body number (ObjectIndex) at which the force is applied to</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">loadVector</span></code>: force vector (as 3D list or numpy array)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">localPosition</span></code>: local position (as 3D list or numpy array) where force is applied</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">bodyFixed</span></code>: if True, the force is corotated with the body; else, the force is global</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">loadVectorUserFunction</span></code>: A Python function f(mbs, t, load)-&gt;loadVector which defines the time-dependent load and replaces loadVector in every time step; the arg load is the static loadVector</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">show</span></code>: if True, load is drawn</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>output</em>:</div>
<div class="line">LoadIndex; returns load index</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>example</em>:</div>
</div>
</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">exudyn</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">exu</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">exudyn.utilities</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span> <span class="c1">#includes itemInterface and rigidBodyUtilities</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="n">SC</span> <span class="o">=</span> <span class="n">exu</span><span class="o">.</span><span class="nc">SystemContainer</span><span class="p">()</span>
<span class="n">mbs</span> <span class="o">=</span> <span class="n">SC</span><span class="o">.</span><span class="nf">AddSystem</span><span class="p">()</span>
<span class="n">b0</span><span class="o">=</span><span class="n">mbs</span><span class="o">.</span><span class="nf">CreateMassPoint</span><span class="p">(</span><span class="n">referencePosition</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
                       <span class="n">initialVelocity</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
                       <span class="n">physicsMass</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">gravity</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">9.81</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
                       <span class="n">drawSize</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">exu</span><span class="o">.</span><span class="n">graphics</span><span class="o">.</span><span class="n">color</span><span class="o">.</span><span class="n">blue</span><span class="p">)</span>
<span class="n">f0</span><span class="o">=</span><span class="n">mbs</span><span class="o">.</span><span class="nf">CreateForce</span><span class="p">(</span><span class="n">bodyNumber</span><span class="o">=</span><span class="n">b0</span><span class="p">,</span> <span class="n">loadVector</span><span class="o">=</span><span class="p">[</span><span class="mi">100</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
                   <span class="n">localPosition</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">Assemble</span><span class="p">()</span>
<span class="n">simulationSettings</span> <span class="o">=</span> <span class="n">exu</span><span class="o">.</span><span class="nc">SimulationSettings</span><span class="p">()</span> <span class="c1">#takes currently set values or default values</span>
<span class="n">simulationSettings</span><span class="o">.</span><span class="n">timeIntegration</span><span class="o">.</span><span class="n">numberOfSteps</span> <span class="o">=</span> <span class="mi">1000</span>
<span class="n">simulationSettings</span><span class="o">.</span><span class="n">timeIntegration</span><span class="o">.</span><span class="n">endTime</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">SolveDynamic</span><span class="p">(</span><span class="n">simulationSettings</span> <span class="o">=</span> <span class="n">simulationSettings</span><span class="p">)</span>
</pre></div>
</div>
<p>Relevant Examples (Ex) and TestModels (TM) with weblink to github:</p>
<blockquote>
<div><p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/cartesianSpringDamper.py">cartesianSpringDamper.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/cartesianSpringDamperUserFunction.py">cartesianSpringDamperUserFunction.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/chatGPTupdate.py">chatGPTupdate.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/chatGPTupdate2.py">chatGPTupdate2.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/rigidBodyTutorial3.py">rigidBodyTutorial3.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/loadUserFunctionTest.py">loadUserFunctionTest.py</a> (TM), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/mainSystemExtensionsTests.py">mainSystemExtensionsTests.py</a> (TM), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/simulatorCouplingTwoMbs.py">simulatorCouplingTwoMbs.py</a> (TM)</p>
</div></blockquote>
</section>
<section id="function-createtorque">
<span id="sec-mainsystemextensions-createtorque"></span><h3>Function: CreateTorque<a class="headerlink" href="#function-createtorque" title="Link to this heading"></a></h3>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/mainSystemExtensions.py#L1918">CreateTorque</a>(<code class="docutils literal notranslate"><span class="pre">name</span> <span class="pre">=</span> <span class="pre">''</span></code>, <code class="docutils literal notranslate"><span class="pre">bodyNumber</span> <span class="pre">=</span> <span class="pre">None</span></code>, <code class="docutils literal notranslate"><span class="pre">loadVector</span> <span class="pre">=</span> <span class="pre">[0.,0.,0.]</span></code>, <code class="docutils literal notranslate"><span class="pre">localPosition</span> <span class="pre">=</span> <span class="pre">[0.,0.,0.]</span></code>, <code class="docutils literal notranslate"><span class="pre">bodyFixed</span> <span class="pre">=</span> <span class="pre">False</span></code>, <code class="docutils literal notranslate"><span class="pre">loadVectorUserFunction</span> <span class="pre">=</span> <span class="pre">0</span></code>, <code class="docutils literal notranslate"><span class="pre">show</span> <span class="pre">=</span> <span class="pre">True</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>function description</em>:</div>
<div class="line">helper function to create torque applied to given body</div>
<div class="line">- NOTE that this function is added to MainSystem via Python function MainSystemCreateTorque.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>input</em>:</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">name</span></code>: name string for object</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">bodyNumber</span></code>: body number (ObjectIndex) at which the torque is applied to</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">loadVector</span></code>: torque vector (as 3D list or numpy array)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">localPosition</span></code>: local position (as 3D list or numpy array) where torque is applied</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">bodyFixed</span></code>: if True, the torque is corotated with the body; else, the torque is global</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">loadVectorUserFunction</span></code>: A Python function f(mbs, t, load)-&gt;loadVector which defines the time-dependent load and replaces loadVector in every time step; the arg load is the static loadVector</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">show</span></code>: if True, load is drawn</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>output</em>:</div>
<div class="line">LoadIndex; returns load index</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>example</em>:</div>
</div>
</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">exudyn</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">exu</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">exudyn.utilities</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span> <span class="c1">#includes itemInterface and rigidBodyUtilities</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="n">SC</span> <span class="o">=</span> <span class="n">exu</span><span class="o">.</span><span class="nc">SystemContainer</span><span class="p">()</span>
<span class="n">mbs</span> <span class="o">=</span> <span class="n">SC</span><span class="o">.</span><span class="nf">AddSystem</span><span class="p">()</span>
<span class="n">b0</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">CreateRigidBody</span><span class="p">(</span><span class="n">inertia</span> <span class="o">=</span> <span class="nc">InertiaCuboid</span><span class="p">(</span><span class="n">density</span><span class="o">=</span><span class="mi">5000</span><span class="p">,</span>
                                                 <span class="n">sideLengths</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.1</span><span class="p">]),</span>
                         <span class="n">referencePosition</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
                         <span class="n">gravity</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">9.81</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
                         <span class="n">graphicsDataList</span> <span class="o">=</span> <span class="p">[</span><span class="n">exu</span><span class="o">.</span><span class="n">graphics</span><span class="o">.</span><span class="nf">Brick</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.1</span><span class="p">],</span>
                                                                      <span class="n">color</span><span class="o">=</span><span class="n">exu</span><span class="o">.</span><span class="n">graphics</span><span class="o">.</span><span class="n">color</span><span class="o">.</span><span class="n">red</span><span class="p">)])</span>
<span class="n">f0</span><span class="o">=</span><span class="n">mbs</span><span class="o">.</span><span class="nf">CreateTorque</span><span class="p">(</span><span class="n">bodyNumber</span><span class="o">=</span><span class="n">b0</span><span class="p">,</span> <span class="n">loadVector</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">Assemble</span><span class="p">()</span>
<span class="n">simulationSettings</span> <span class="o">=</span> <span class="n">exu</span><span class="o">.</span><span class="nc">SimulationSettings</span><span class="p">()</span> <span class="c1">#takes currently set values or default values</span>
<span class="n">simulationSettings</span><span class="o">.</span><span class="n">timeIntegration</span><span class="o">.</span><span class="n">numberOfSteps</span> <span class="o">=</span> <span class="mi">1000</span>
<span class="n">simulationSettings</span><span class="o">.</span><span class="n">timeIntegration</span><span class="o">.</span><span class="n">endTime</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">SolveDynamic</span><span class="p">(</span><span class="n">simulationSettings</span> <span class="o">=</span> <span class="n">simulationSettings</span><span class="p">)</span>
</pre></div>
</div>
<p>Relevant Examples (Ex) and TestModels (TM) with weblink to github:</p>
<blockquote>
<div><p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/chatGPTupdate.py">chatGPTupdate.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/chatGPTupdate2.py">chatGPTupdate2.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/rigidBodyTutorial3.py">rigidBodyTutorial3.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/mainSystemExtensionsTests.py">mainSystemExtensionsTests.py</a> (TM), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/pickleCopyMbs.py">pickleCopyMbs.py</a> (TM), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/simulatorCouplingTwoMbs.py">simulatorCouplingTwoMbs.py</a> (TM)</p>
</div></blockquote>
</section>
</section>
<section id="mainsystem-extensions-general">
<span id="sec-mainsystem-pythonextensions"></span><h2>MainSystem extensions (general)<a class="headerlink" href="#mainsystem-extensions-general" title="Link to this heading"></a></h2>
<p>This section represents general extensions to MainSystem, which are direct calls to Python functions, such as PlotSensor or SolveDynamic; these extensions allow a more intuitive interaction with the MainSystem class, see the following example. For activation, import <code class="docutils literal notranslate"><span class="pre">exudyn.mainSystemExtensions</span></code> or <code class="docutils literal notranslate"><span class="pre">exudyn.utilities</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1">#this example sketches the usage</span>
<span class="linenos"> 2</span><span class="c1">#for complete examples see Examples/ or TestModels/ folders</span>
<span class="linenos"> 3</span><span class="c1">#create some multibody system (mbs) first:</span>
<span class="linenos"> 4</span><span class="c1"># ...</span>
<span class="linenos"> 5</span><span class="c1">#</span>
<span class="linenos"> 6</span><span class="c1">#compute system degree of freedom:</span>
<span class="linenos"> 7</span><span class="n">mbs</span><span class="o">.</span><span class="nf">ComputeSystemDegreeOfFreedom</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos"> 8</span><span class="c1">#</span>
<span class="linenos"> 9</span><span class="c1">#call solver function directly from mbs:</span>
<span class="linenos">10</span><span class="n">mbs</span><span class="o">.</span><span class="nf">SolveDynamic</span><span class="p">(</span><span class="n">exu</span><span class="o">.</span><span class="nc">SimulationSettings</span><span class="p">())</span>
<span class="linenos">11</span><span class="c1">#</span>
<span class="linenos">12</span><span class="c1">#plot sensor directly from mbs:</span>
<span class="linenos">13</span><span class="n">mbs</span><span class="o">.</span><span class="nf">PlotSensor</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
<section id="function-solutionviewer">
<span id="sec-mainsystemextensions-solutionviewer"></span><h3>Function: SolutionViewer<a class="headerlink" href="#function-solutionviewer" title="Link to this heading"></a></h3>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/interactive.py#L786">SolutionViewer</a>(<code class="docutils literal notranslate"><span class="pre">solution</span> <span class="pre">=</span> <span class="pre">None</span></code>, <code class="docutils literal notranslate"><span class="pre">rowIncrement</span> <span class="pre">=</span> <span class="pre">1</span></code>, <code class="docutils literal notranslate"><span class="pre">timeout</span> <span class="pre">=</span> <span class="pre">0.04</span></code>, <code class="docutils literal notranslate"><span class="pre">runOnStart</span> <span class="pre">=</span> <span class="pre">True</span></code>, <code class="docutils literal notranslate"><span class="pre">runMode</span> <span class="pre">=</span> <span class="pre">2</span></code>, <code class="docutils literal notranslate"><span class="pre">fontSize</span> <span class="pre">=</span> <span class="pre">12</span></code>, <code class="docutils literal notranslate"><span class="pre">title</span> <span class="pre">=</span> <span class="pre">''</span></code>, <code class="docutils literal notranslate"><span class="pre">checkRenderEngineStopFlag</span> <span class="pre">=</span> <span class="pre">True</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>function description</em>:</div>
<div class="line">open interactive dialog and visulation (animate) solution loaded with LoadSolutionFile(…); Change slider ‘Increment’ to change the automatic increment of time frames; Change mode between continuous run, one cycle (fits perfect for animation recording) or ‘Static’ (to change Solution steps manually with the mouse); update period also lets you change the speed of animation; Press Run / Stop button to start/stop interactive mode (updating of grpahics)</div>
<div class="line">- NOTE that this function is added to MainSystem via Python function SolutionViewer.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>input</em>:</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">solution</span></code>: solution dictionary previously loaded with exudyn.utilities.LoadSolutionFile(…); will be played from first to last row; if solution==None, it tries to load the file coordinatesSolutionFileName as stored in mbs.sys[‘simulationSettings’], which are the simulationSettings of the previous simulation</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">rowIncrement</span></code>: can be set larger than 1 in order to skip solution frames: e.g. rowIncrement=10 visualizes every 10th row (frame)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">timeout</span></code>: in seconds is used between frames in order to limit the speed of animation; e.g. use timeout=0.04 to achieve approximately 25 frames per second</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">runOnStart</span></code>: immediately go into ‘Run’ mode</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">runMode</span></code>: 0=continuous run, 1=one cycle, 2=static (use slider/mouse to vary time steps)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">fontSize</span></code>: define font size for labels in InteractiveDialog</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">title</span></code>: if empty, it uses default; otherwise define specific title</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">checkRenderEngineStopFlag</span></code>: if True, stopping renderer (pressing Q or Escape) also causes stopping the interactive dialog</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>output</em>:</div>
<div class="line">None; updates current visualization state, renders the scene continuously (after pressing button ‘Run’)</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>example</em>:</div>
</div>
</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#HERE, mbs must contain same model as solution stored in coordinatesSolution.txt</span>
<span class="c1">#adjust autoFitScence, otherwise it may lead to unwanted fit to scene</span>
<span class="n">SC</span><span class="o">.</span><span class="nf">visualizationSettings</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">autoFitScene</span> <span class="o">=</span> <span class="kc">False</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">exudyn.interactive</span><span class="w"> </span><span class="kn">import</span> <span class="nf">SolutionViewer</span> <span class="c1">#import function</span>
<span class="n">sol</span> <span class="o">=</span> <span class="nf">LoadSolutionFile</span><span class="p">(</span><span class="s1">&#39;coordinatesSolution.txt&#39;</span><span class="p">)</span> <span class="c1">#load solution: adjust to your file name</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">SolutionViewer</span><span class="p">(</span><span class="n">sol</span><span class="p">)</span> <span class="c1">#call via MainSystem</span>
</pre></div>
</div>
<p>Relevant Examples (Ex) and TestModels (TM) with weblink to github:</p>
<blockquote>
<div><p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/addPrismaticJoint.py">addPrismaticJoint.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/addRevoluteJoint.py">addRevoluteJoint.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/ANCFcableCantilevered.py">ANCFcableCantilevered.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/ANCFrotatingCable2D.py">ANCFrotatingCable2D.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/basicTutorial2024.py">basicTutorial2024.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/ACFtest.py">ACFtest.py</a> (TM), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/ANCFbeltDrive.py">ANCFbeltDrive.py</a> (TM), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/ANCFgeneralContactCircle.py">ANCFgeneralContactCircle.py</a> (TM)</p>
</div></blockquote>
</section>
<section id="function-plotsensor">
<span id="sec-mainsystemextensions-plotsensor"></span><h3>Function: PlotSensor<a class="headerlink" href="#function-plotsensor" title="Link to this heading"></a></h3>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/plot.py#L230">PlotSensor</a>(<code class="docutils literal notranslate"><span class="pre">sensorNumbers</span> <span class="pre">=</span> <span class="pre">[]</span></code>, <code class="docutils literal notranslate"><span class="pre">components</span> <span class="pre">=</span> <span class="pre">0</span></code>, <code class="docutils literal notranslate"><span class="pre">xLabel</span> <span class="pre">=</span> <span class="pre">'time</span> <span class="pre">(s)'</span></code>, <code class="docutils literal notranslate"><span class="pre">yLabel</span> <span class="pre">=</span> <span class="pre">None</span></code>, <code class="docutils literal notranslate"><span class="pre">labels</span> <span class="pre">=</span> <span class="pre">[]</span></code>, <code class="docutils literal notranslate"><span class="pre">colorCodeOffset</span> <span class="pre">=</span> <span class="pre">0</span></code>, <code class="docutils literal notranslate"><span class="pre">newFigure</span> <span class="pre">=</span> <span class="pre">True</span></code>, <code class="docutils literal notranslate"><span class="pre">closeAll</span> <span class="pre">=</span> <span class="pre">False</span></code>, <code class="docutils literal notranslate"><span class="pre">componentsX</span> <span class="pre">=</span> <span class="pre">[]</span></code>, <code class="docutils literal notranslate"><span class="pre">title</span> <span class="pre">=</span> <span class="pre">''</span></code>, <code class="docutils literal notranslate"><span class="pre">figureName</span> <span class="pre">=</span> <span class="pre">''</span></code>, <code class="docutils literal notranslate"><span class="pre">fontSize</span> <span class="pre">=</span> <span class="pre">16</span></code>, <code class="docutils literal notranslate"><span class="pre">colors</span> <span class="pre">=</span> <span class="pre">[]</span></code>, <code class="docutils literal notranslate"><span class="pre">lineStyles</span> <span class="pre">=</span> <span class="pre">[]</span></code>, <code class="docutils literal notranslate"><span class="pre">lineWidths</span> <span class="pre">=</span> <span class="pre">[]</span></code>, <code class="docutils literal notranslate"><span class="pre">markerStyles</span> <span class="pre">=</span> <span class="pre">[]</span></code>, <code class="docutils literal notranslate"><span class="pre">markerSizes</span> <span class="pre">=</span> <span class="pre">[]</span></code>, <code class="docutils literal notranslate"><span class="pre">markerDensity</span> <span class="pre">=</span> <span class="pre">0.08</span></code>, <code class="docutils literal notranslate"><span class="pre">rangeX</span> <span class="pre">=</span> <span class="pre">[]</span></code>, <code class="docutils literal notranslate"><span class="pre">rangeY</span> <span class="pre">=</span> <span class="pre">[]</span></code>, <code class="docutils literal notranslate"><span class="pre">majorTicksX</span> <span class="pre">=</span> <span class="pre">10</span></code>, <code class="docutils literal notranslate"><span class="pre">majorTicksY</span> <span class="pre">=</span> <span class="pre">10</span></code>, <code class="docutils literal notranslate"><span class="pre">offsets</span> <span class="pre">=</span> <span class="pre">[]</span></code>, <code class="docutils literal notranslate"><span class="pre">factors</span> <span class="pre">=</span> <span class="pre">[]</span></code>, <code class="docutils literal notranslate"><span class="pre">subPlot</span> <span class="pre">=</span> <span class="pre">[]</span></code>, <code class="docutils literal notranslate"><span class="pre">sizeInches</span> <span class="pre">=</span> <span class="pre">[6.4,4.8]</span></code>, <code class="docutils literal notranslate"><span class="pre">fileName</span> <span class="pre">=</span> <span class="pre">''</span></code>, <code class="docutils literal notranslate"><span class="pre">useXYZcomponents</span> <span class="pre">=</span> <span class="pre">True</span></code>, <code class="docutils literal notranslate"><span class="pre">**kwargs</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>function description</em>:</div>
<div class="line">Helper function for direct and easy visualization of sensor outputs, without need for loading text files, etc.; PlotSensor can be used to simply plot, e.g., the measured x-Position over time in a figure. PlotSensor provides an interface to matplotlib (which needs to be installed). Default values of many function arguments can be changed using the exudyn.plot function PlotSensorDefaults(), see there for usage.</div>
<div class="line">- NOTE that this function is added to MainSystem via Python function PlotSensor.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>input</em>:</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">sensorNumbers</span></code>: consists of one or a list of sensor numbers (type SensorIndex or int) as returned by the mbs function AddSensor(…); sensors need to set writeToFile=True and/or storeInternal=True for PlotSensor to work; alternatively, it may contain FILENAMES (incl. path) to stored sensor or solution files OR a numpy array instead of sensor numbers; the format of data (file or numpy array) must contain per row the time and according solution values in columns; if components is a list and sensorNumbers is a scalar, sensorNumbers is adjusted automatically to the components</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">components</span></code>: consists of one or a list of components according to the component of the sensor to be plotted at y-axis; if components is a list and sensorNumbers is a scalar, sensorNumbers is adjusted automatically to the components; as always, components are zero-based, meaning 0=X, 1=Y, etc.; for regular sensor files, time will be component=-1; to show the norm (e.g., of a force vector), use component=[plot.componentNorm] for according sensors; norm will consider all values of sensor except time (for 3D force, it will be <span class="math notranslate nohighlight">\(\sqrt{f_0^2+f_1^2+f_2^2}\)</span>); offsets and factors are mapped on norm (plot value=factor*(norm(values) + offset) ), not on component values</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">componentsX</span></code>: default componentsX=[] uses time in files; otherwise provide componentsX as list of components (or scalar) representing x components of sensors in plotted curves; DON’T forget to change xLabel accordingly!</div>
<div class="line">Using componentsX=[…] with a list of column indices specifies the respective columns used for the x-coordinates in all sensors; by default, values are plotted against the first column in the files, which is time; according to counting in PlotSensor, this represents componentX=-1;</div>
<div class="line">plotting y over x in a position sensor thus reads: components=[1], componentsX=[0];</div>
<div class="line">plotting time over x reads: components=[-1], componentsX=[0];</div>
<div class="line">the default value reads componentsX=[-1,-1,…]</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">xLabel</span></code>: string for text at x-axis</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">yLabel</span></code>: string for text at y-axis (default: None==&gt; label is automatically computed from sensor value types)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">labels</span></code>: string (for one sensor) or list of strings (according to number of sensors resp. components) representing the labels used in legend; if labels=[], automatically generated legend is used</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">rangeX</span></code>: default rangeX=[]: computes range automatically; otherwise use rangeX to set range (limits) for x-axis provided as sorted list of two floats, e.g., rangeX=[0,4]</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">rangeY</span></code>: default rangeY=[]: computes range automatically; otherwise use rangeY to set range (limits) for y-axis provided as sorted list of two floats, e.g., rangeY=[-1,1]</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">figureName</span></code>: optional name for figure, if newFigure=True</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">fontSize</span></code>: change general fontsize of axis, labels, etc. (matplotlib default is 12, default in PlotSensor: 16)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">title</span></code>: optional string representing plot title</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">offsets</span></code>: provide as scalar, list of scalars (per sensor) or list of 2D numpy.arrays (per sensor, having same rows/columns as sensor data; in this case it will also influence x-axis if componentsX is different from -1) to add offset to each sensor output; for an original value fOrig, the new value reads fNew = factor*(fOrig+offset); for offset provided as numpy array (with same time values), the ‘time’ column is ignored in the offset computation; can be used to compute difference of sensors; if offsets=[], no offset is used</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">factors</span></code>: provide as scalar or list (per sensor) to add factor to each sensor output; for an original value fOrig, the new value reads fNew = factor*(fOrig+offset); if factor=[], no factor is used</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">majorTicksX</span></code>: number of major ticks on x-axis; default: 10</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">majorTicksY</span></code>: number of major ticks on y-axis; default: 10</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">colorCodeOffset</span></code>: int offset for color code, color codes going from 0 to 27 (see PlotLineCode(…)); automatic line/color codes are used if no colors and lineStyles are used</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">colors</span></code>: color is automatically selected from colorCodeOffset if colors=[]; otherwise chose from ‘b’, ‘g’, ‘r’, ‘c’, ‘m’, ‘y’, ‘k’ and many other colors see <a class="reference external" href="https://matplotlib.org/stable/gallery/color/named_colors.html">https://matplotlib.org/stable/gallery/color/named_colors.html</a></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">lineStyles</span></code>: line style is automatically selected from colorCodeOffset if lineStyles=[]; otherwise define for all lines with string or with list of strings, chosing from ‘-’, ‘–’, ‘-.’, ‘:’, or ‘’</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">lineWidths</span></code>: float to define line width by float (default=1); either use single float for all sensors or list of floats with length &gt;= number of sensors</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">markerStyles</span></code>: if different from [], marker styles are defined as list of marker style strings or single string for one sensor; chose from ‘.’, ‘o’, ‘x’, ‘+’ … check listMarkerStylesFilled and listMarkerStyles in exudyn.plot and see <a class="reference external" href="https://matplotlib.org/stable/api/markers_api.html">https://matplotlib.org/stable/api/markers_api.html</a> ; ADD a space to markers to make them empty (transparent), e.g. ‘o ‘ will create an empty circle</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">markerSizes</span></code>: float to define marker size by float (default=6); either use single float for all sensors or list of floats with length &gt;= number of sensors</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">markerDensity</span></code>: if int, it defines approx. the total number of markers used along each graph; if float, this defines the distance of markers relative to the diagonal of the plot (default=0.08); if None, it adds a marker to every data point if marker style is specified for sensor</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">newFigure</span></code>: if True, a new matplotlib.pyplot figure is created; otherwise, existing figures are overwritten</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">subPlot</span></code>: given as list [nx, ny, position] with nx, ny being the number of subplots in x and y direction (nx=cols, ny=rows), and position in [1,…, nx*ny] gives the position in the subplots; use the same structure for first PlotSensor (with newFigure=True) and all subsequent PlotSensor calls with newFigure=False, which creates the according subplots; default=[](no subplots)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">sizeInches</span></code>: given as list [sizeX, sizeY] with the sizes per (sub)plot given in inches; default: [6.4, 4.8]; in case of sub plots, the total size of the figure is computed from nx*sizeInches[0] and ny*sizeInches[1]</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">fileName</span></code>: if this string is non-empty, figure will be saved to given path and filename (use figName.pdf to safe as PDF or figName.png to save as PNG image); use matplotlib.use(‘Agg’) in order not to open figures if you just want to save them</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">useXYZcomponents</span></code>: of True, it will use X, Y and Z for sensor components, e.g., measuring Position, Velocity, etc. wherever possible</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">closeAll</span></code>: if True, close all figures before opening new one (do this only in first PlotSensor command!)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">[*kwargs]</span></code>:</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">minorTicksXon</span></code>: if True, turn minor ticks for x-axis on</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">minorTicksYon</span></code>: if True, turn minor ticks for y-axis on</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">logScaleX</span></code>: use log scale for x-axis</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">logScaleY</span></code>: use log scale for y-axis</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">fileCommentChar</span></code>: if exists, defines the comment character in files (#,</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">fileDelimiterChar</span></code>: if exists, defines the character indicating the columns for data (‘,’, ‘ ‘, ‘;’, …)</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>output</em>:</div>
<div class="line">[Any, Any, Any, Any]; plots the sensor data; returns [plt, fig, ax, line] in which plt is matplotlib.pyplot, fig is the figure (or None), ax is the axis (or None) and line is the return value of plt.plot (or None) which could be changed hereafter</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>notes</em>:</div>
<div class="line">adjust default values by modifying the variables exudyn.plot.plotSensorDefault…, e.g., exudyn.plot.plotSensorDefaultFontSize</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>example</em>:</div>
</div>
</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#assume to have some position-based nodes 0 and 1:</span>
<span class="n">s0</span><span class="o">=</span><span class="n">mbs</span><span class="o">.</span><span class="nf">AddSensor</span><span class="p">(</span><span class="nc">SensorNode</span><span class="p">(</span><span class="n">nodeNumber</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">fileName</span><span class="o">=</span><span class="s1">&#39;s0.txt&#39;</span><span class="p">,</span>
                            <span class="n">outputVariableType</span><span class="o">=</span><span class="n">exu</span><span class="o">.</span><span class="nc">OutputVariableType</span><span class="o">.</span><span class="n">Position</span><span class="p">))</span>
<span class="n">s1</span><span class="o">=</span><span class="n">mbs</span><span class="o">.</span><span class="nf">AddSensor</span><span class="p">(</span><span class="nc">SensorNode</span><span class="p">(</span><span class="n">nodeNumber</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">fileName</span><span class="o">=</span><span class="s1">&#39;s1.txt&#39;</span><span class="p">,</span>
                            <span class="n">outputVariableType</span><span class="o">=</span><span class="n">exu</span><span class="o">.</span><span class="nc">OutputVariableType</span><span class="o">.</span><span class="n">Position</span><span class="p">))</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">PlotSensor</span><span class="p">(</span><span class="n">s0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="c1">#plot x-coordinate</span>
<span class="c1">#plot x for s0 and z for s1:</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">PlotSensor</span><span class="p">(</span><span class="n">sensorNumbers</span><span class="o">=</span><span class="p">[</span><span class="n">s0</span><span class="p">,</span><span class="n">s1</span><span class="p">],</span> <span class="n">components</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="n">yLabel</span><span class="o">=</span><span class="s1">&#39;this is the position in meter&#39;</span><span class="p">)</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">PlotSensor</span><span class="p">(</span><span class="n">sensorNumbers</span><span class="o">=</span><span class="n">s0</span><span class="p">,</span> <span class="n">components</span><span class="o">=</span><span class="n">plot</span><span class="o">.</span><span class="n">componentNorm</span><span class="p">)</span> <span class="c1">#norm of position</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">PlotSensor</span><span class="p">(</span><span class="n">sensorNumbers</span><span class="o">=</span><span class="n">s0</span><span class="p">,</span> <span class="n">components</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="n">factors</span><span class="o">=</span><span class="mf">1000.</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Answers to the big questions&#39;</span><span class="p">)</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">PlotSensor</span><span class="p">(</span><span class="n">sensorNumbers</span><span class="o">=</span><span class="n">s0</span><span class="p">,</span> <span class="n">components</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span>
           <span class="n">yLabel</span><span class="o">=</span><span class="s1">&#39;Coordantes with offset 1</span><span class="se">\n</span><span class="s1">and scaled with $</span><span class="se">\\</span><span class="s1">frac</span><span class="si">{1}{1000}</span><span class="s1">$&#39;</span><span class="p">,</span>
           <span class="n">factors</span><span class="o">=</span><span class="mf">1e-3</span><span class="p">,</span> <span class="n">offsets</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">fontSize</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">closeAll</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="c1">#assume to have body sensor sBody, marker sensor sMarker:</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">PlotSensor</span><span class="p">(</span><span class="n">sensorNumbers</span><span class="o">=</span><span class="p">[</span><span class="n">sBody</span><span class="p">]</span><span class="o">*</span><span class="mi">3</span><span class="o">+</span><span class="p">[</span><span class="n">sMarker</span><span class="p">]</span><span class="o">*</span><span class="mi">3</span><span class="p">,</span> <span class="n">components</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span>
           <span class="n">colorCodeOffset</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">newFigure</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">fontSize</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
           <span class="n">yLabel</span><span class="o">=</span><span class="s1">&#39;Rotation $</span><span class="se">\\</span><span class="s1">alpha, </span><span class="se">\\</span><span class="s1">beta, </span><span class="se">\\</span><span class="s1">gamma$ and</span><span class="se">\n</span><span class="s1"> Position $x,y,z$&#39;</span><span class="p">,</span>
           <span class="n">title</span><span class="o">=</span><span class="s1">&#39;compare marker and body sensor&#39;</span><span class="p">)</span>
<span class="c1">#assume having file plotSensorNode.txt:</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">PlotSensor</span><span class="p">(</span><span class="n">sensorNumbers</span><span class="o">=</span><span class="p">[</span><span class="n">s0</span><span class="p">]</span><span class="o">*</span><span class="mi">3</span><span class="o">+</span> <span class="p">[</span><span class="n">filedir</span><span class="o">+</span><span class="s1">&#39;plotSensorNode.txt&#39;</span><span class="p">]</span><span class="o">*</span><span class="mi">3</span><span class="p">,</span>
           <span class="n">components</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span>
<span class="c1">#plot y over x:</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">PlotSensor</span><span class="p">(</span><span class="n">sensorNumbers</span><span class="o">=</span><span class="n">s0</span><span class="p">,</span> <span class="n">componentsX</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">components</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">xLabel</span><span class="o">=</span><span class="s1">&#39;x-Position&#39;</span><span class="p">,</span> <span class="n">yLabel</span><span class="o">=</span><span class="s1">&#39;y-Position&#39;</span><span class="p">)</span>
<span class="c1">#for further examples, see also Examples/plotSensorExamples.py</span>
</pre></div>
</div>
<p>Relevant Examples (Ex) and TestModels (TM) with weblink to github:</p>
<blockquote>
<div><p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/ANCFALEtest.py">ANCFALEtest.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/beltDriveALE.py">beltDriveALE.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/beltDriveReevingSystem.py">beltDriveReevingSystem.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/beltDrivesComparison.py">beltDrivesComparison.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/bicycleIftommBenchmark.py">bicycleIftommBenchmark.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/ACFtest.py">ACFtest.py</a> (TM), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/ANCFbeltDrive.py">ANCFbeltDrive.py</a> (TM), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/ANCFgeneralContactCircle.py">ANCFgeneralContactCircle.py</a> (TM)</p>
</div></blockquote>
</section>
<section id="function-solvestatic">
<span id="sec-mainsystemextensions-solvestatic"></span><h3>Function: SolveStatic<a class="headerlink" href="#function-solvestatic" title="Link to this heading"></a></h3>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/solver.py#L157">SolveStatic</a>(<code class="docutils literal notranslate"><span class="pre">simulationSettings</span> <span class="pre">=</span> <span class="pre">exudyn.SimulationSettings()</span></code>, <code class="docutils literal notranslate"><span class="pre">updateInitialValues</span> <span class="pre">=</span> <span class="pre">False</span></code>, <code class="docutils literal notranslate"><span class="pre">storeSolver</span> <span class="pre">=</span> <span class="pre">True</span></code>, <code class="docutils literal notranslate"><span class="pre">showHints</span> <span class="pre">=</span> <span class="pre">False</span></code>, <code class="docutils literal notranslate"><span class="pre">showCausingItems</span> <span class="pre">=</span> <span class="pre">True</span></code>, <code class="docutils literal notranslate"><span class="pre">autoAssemble</span> <span class="pre">=</span> <span class="pre">True</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>function description</em>:</div>
<div class="line">solves the static mbs problem using simulationSettings; check theDoc.pdf for MainSolverStatic for further details of the static solver; this function is also available in exudyn (using exudyn.SolveStatic(…))</div>
<div class="line">- NOTE that this function is added to MainSystem via Python function SolveStatic.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>input</em>:</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">simulationSettings</span></code>: specific simulation settings out of exu.SimulationSettings(), as described in Section <a class="reference internal" href="../structures/SimulationSettings.html#sec-solutionsettings"><span class="std std-ref">SolutionSettings</span></a>; use options for newton, discontinuous settings, etc., from staticSolver sub-items</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">updateInitialValues</span></code>: if True, the results are written to initial values, such at a consecutive simulation uses the results of this simulation as the initial values of the next simulation</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">storeSolver</span></code>: if True, the staticSolver object is stored in the mbs.sys dictionary as mbs.sys[‘staticSolver’], and simulationSettings are stored as mbs.sys[‘simulationSettings’]</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">showHints</span></code>: show additional hints, if solver fails</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">showCausingItems</span></code>: if linear solver fails, this option helps to identify objects, etc. which are related to a singularity in the linearized system matrix</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">autoAssemble</span></code>: if True: if mbs.systemIsConsistent=False (system is not assembled), call mbs.Assemble() before solver calls</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>output</em>:</div>
<div class="line">bool; returns True, if successful, False if fails; if storeSolver = True, mbs.sys contains staticSolver, which allows to investigate solver problems (check theDoc.pdf Section <a class="reference internal" href="../structures/CSolverStructures.html#sec-solversubstructures"><span class="std std-ref">Solver substructures</span></a> and the items described in Section <a class="reference internal" href="../structures/MainSolver.html#sec-mainsolverstatic"><span class="std std-ref">MainSolverStatic</span></a>)</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>example</em>:</div>
</div>
</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">exudyn</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">exu</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">exudyn.itemInterface</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
<span class="n">SC</span> <span class="o">=</span> <span class="n">exu</span><span class="o">.</span><span class="nc">SystemContainer</span><span class="p">()</span>
<span class="n">mbs</span> <span class="o">=</span> <span class="n">SC</span><span class="o">.</span><span class="nf">AddSystem</span><span class="p">()</span>
<span class="c1">#create simple system:</span>
<span class="n">ground</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">AddObject</span><span class="p">(</span><span class="nc">ObjectGround</span><span class="p">())</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">AddNode</span><span class="p">(</span><span class="nc">NodePoint</span><span class="p">())</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">AddObject</span><span class="p">(</span><span class="nc">MassPoint</span><span class="p">(</span><span class="n">physicsMass</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">nodeNumber</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>
<span class="n">m0</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">AddMarker</span><span class="p">(</span><span class="nc">MarkerBodyPosition</span><span class="p">(</span><span class="n">bodyNumber</span><span class="o">=</span><span class="n">ground</span><span class="p">))</span>
<span class="n">m1</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">AddMarker</span><span class="p">(</span><span class="nc">MarkerBodyPosition</span><span class="p">(</span><span class="n">bodyNumber</span><span class="o">=</span><span class="n">body</span><span class="p">))</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">AddObject</span><span class="p">(</span><span class="nc">CartesianSpringDamper</span><span class="p">(</span><span class="n">markerNumbers</span><span class="o">=</span><span class="p">[</span><span class="n">m0</span><span class="p">,</span><span class="n">m1</span><span class="p">],</span> <span class="n">stiffness</span><span class="o">=</span><span class="p">[</span><span class="mi">100</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span><span class="mi">100</span><span class="p">]))</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">AddLoad</span><span class="p">(</span><span class="nc">LoadForceVector</span><span class="p">(</span><span class="n">markerNumber</span><span class="o">=</span><span class="n">m1</span><span class="p">,</span> <span class="n">loadVector</span><span class="o">=</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">]))</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">Assemble</span><span class="p">()</span>
<span class="n">simulationSettings</span> <span class="o">=</span> <span class="n">exu</span><span class="o">.</span><span class="nc">SimulationSettings</span><span class="p">()</span>
<span class="n">simulationSettings</span><span class="o">.</span><span class="n">timeIntegration</span><span class="o">.</span><span class="n">endTime</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">success</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">SolveStatic</span><span class="p">(</span><span class="n">simulationSettings</span><span class="p">,</span> <span class="n">storeSolver</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;success =&quot;</span><span class="p">,</span> <span class="n">success</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;iterations = &quot;</span><span class="p">,</span> <span class="n">mbs</span><span class="o">.</span><span class="n">sys</span><span class="p">[</span><span class="s1">&#39;staticSolver&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">it</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;pos=&quot;</span><span class="p">,</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">GetObjectOutputBody</span><span class="p">(</span><span class="n">body</span><span class="p">,</span><span class="n">localPosition</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
      <span class="n">variableType</span><span class="o">=</span><span class="n">exu</span><span class="o">.</span><span class="nc">OutputVariableType</span><span class="o">.</span><span class="n">Position</span><span class="p">))</span>
</pre></div>
</div>
<p>Relevant Examples (Ex) and TestModels (TM) with weblink to github:</p>
<blockquote>
<div><p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/3SpringsDistance.py">3SpringsDistance.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/ALEANCFpipe.py">ALEANCFpipe.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/ANCFALEtest.py">ANCFALEtest.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/ANCFcantileverTest.py">ANCFcantileverTest.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/ANCFcontactCircle.py">ANCFcontactCircle.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/ANCFBeamTest.py">ANCFBeamTest.py</a> (TM), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/ANCFbeltDrive.py">ANCFbeltDrive.py</a> (TM), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/ANCFcontactCircleTest.py">ANCFcontactCircleTest.py</a> (TM)</p>
</div></blockquote>
</section>
<section id="function-solvedynamic">
<span id="sec-mainsystemextensions-solvedynamic"></span><h3>Function: SolveDynamic<a class="headerlink" href="#function-solvedynamic" title="Link to this heading"></a></h3>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/solver.py#L224">SolveDynamic</a>(<code class="docutils literal notranslate"><span class="pre">simulationSettings</span> <span class="pre">=</span> <span class="pre">exudyn.SimulationSettings()</span></code>, <code class="docutils literal notranslate"><span class="pre">solverType</span> <span class="pre">=</span> <span class="pre">exudyn.DynamicSolverType.GeneralizedAlpha</span></code>, <code class="docutils literal notranslate"><span class="pre">updateInitialValues</span> <span class="pre">=</span> <span class="pre">False</span></code>, <code class="docutils literal notranslate"><span class="pre">storeSolver</span> <span class="pre">=</span> <span class="pre">True</span></code>, <code class="docutils literal notranslate"><span class="pre">showHints</span> <span class="pre">=</span> <span class="pre">False</span></code>, <code class="docutils literal notranslate"><span class="pre">showCausingItems</span> <span class="pre">=</span> <span class="pre">True</span></code>, <code class="docutils literal notranslate"><span class="pre">autoAssemble</span> <span class="pre">=</span> <span class="pre">True</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>function description</em>:</div>
<div class="line">solves the dynamic mbs problem using simulationSettings and solver type; check theDoc.pdf for MainSolverImplicitSecondOrder for further details of the dynamic solver; this function is also available in exudyn (using exudyn.SolveDynamic(…))</div>
<div class="line">- NOTE that this function is added to MainSystem via Python function SolveDynamic.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>input</em>:</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">simulationSettings</span></code>: specific simulation settings out of exu.SimulationSettings(), as described in Section <a class="reference internal" href="../structures/SimulationSettings.html#sec-solutionsettings"><span class="std std-ref">SolutionSettings</span></a>; use options for newton, discontinuous settings, etc., from timeIntegration; therein, implicit second order solvers use settings from generalizedAlpha and explict solvers from explicitIntegration; be careful with settings, as the influence accuracy (step size!), convergence and performance (see special Section <a class="reference internal" href="../ExudynBasics.html#sec-overview-basics-speedup"><span class="std std-ref">Performance and ways to speed up computations</span></a>)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">solverType</span></code>: use exudyn.DynamicSolverType to set specific solver (default=generalized alpha)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">updateInitialValues</span></code>: if True, the results are written to initial values, such at a consecutive simulation uses the results of this simulation as the initial values of the next simulation</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">storeSolver</span></code>: if True, the staticSolver object is stored in the mbs.sys dictionary as mbs.sys[‘staticSolver’], and simulationSettings are stored as mbs.sys[‘simulationSettings’]</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">showHints</span></code>: show additional hints, if solver fails</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">showCausingItems</span></code>: if linear solver fails, this option helps to identify objects, etc. which are related to a singularity in the linearized system matrix</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">autoAssemble</span></code>: if True: if mbs.systemIsConsistent=False (system is not assembled), call mbs.Assemble() before solver calls</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>output</em>:</div>
<div class="line">bool; returns True, if successful, False if fails; if storeSolver = True, mbs.sys contains staticSolver, which allows to investigate solver problems (check theDoc.pdf Section <a class="reference internal" href="../structures/CSolverStructures.html#sec-solversubstructures"><span class="std std-ref">Solver substructures</span></a> and the items described in Section <a class="reference internal" href="../structures/MainSolver.html#sec-mainsolverstatic"><span class="std std-ref">MainSolverStatic</span></a>)</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>example</em>:</div>
</div>
</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">exudyn</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">exu</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">exudyn.itemInterface</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
<span class="n">SC</span> <span class="o">=</span> <span class="n">exu</span><span class="o">.</span><span class="nc">SystemContainer</span><span class="p">()</span>
<span class="n">mbs</span> <span class="o">=</span> <span class="n">SC</span><span class="o">.</span><span class="nf">AddSystem</span><span class="p">()</span>
<span class="c1">#create simple system:</span>
<span class="n">ground</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">AddObject</span><span class="p">(</span><span class="nc">ObjectGround</span><span class="p">())</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">AddNode</span><span class="p">(</span><span class="nc">NodePoint</span><span class="p">())</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">AddObject</span><span class="p">(</span><span class="nc">MassPoint</span><span class="p">(</span><span class="n">physicsMass</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">nodeNumber</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>
<span class="n">m0</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">AddMarker</span><span class="p">(</span><span class="nc">MarkerBodyPosition</span><span class="p">(</span><span class="n">bodyNumber</span><span class="o">=</span><span class="n">ground</span><span class="p">))</span>
<span class="n">m1</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">AddMarker</span><span class="p">(</span><span class="nc">MarkerBodyPosition</span><span class="p">(</span><span class="n">bodyNumber</span><span class="o">=</span><span class="n">body</span><span class="p">))</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">AddObject</span><span class="p">(</span><span class="nc">CartesianSpringDamper</span><span class="p">(</span><span class="n">markerNumbers</span><span class="o">=</span><span class="p">[</span><span class="n">m0</span><span class="p">,</span><span class="n">m1</span><span class="p">],</span> <span class="n">stiffness</span><span class="o">=</span><span class="p">[</span><span class="mi">100</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span><span class="mi">100</span><span class="p">]))</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">AddLoad</span><span class="p">(</span><span class="nc">LoadForceVector</span><span class="p">(</span><span class="n">markerNumber</span><span class="o">=</span><span class="n">m1</span><span class="p">,</span> <span class="n">loadVector</span><span class="o">=</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">]))</span>
<span class="c1">#</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">Assemble</span><span class="p">()</span>
<span class="n">simulationSettings</span> <span class="o">=</span> <span class="n">exu</span><span class="o">.</span><span class="nc">SimulationSettings</span><span class="p">()</span>
<span class="n">simulationSettings</span><span class="o">.</span><span class="n">timeIntegration</span><span class="o">.</span><span class="n">endTime</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">success</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">SolveDynamic</span><span class="p">(</span><span class="n">simulationSettings</span><span class="p">,</span> <span class="n">storeSolver</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;success =&quot;</span><span class="p">,</span> <span class="n">success</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;iterations = &quot;</span><span class="p">,</span> <span class="n">mbs</span><span class="o">.</span><span class="n">sys</span><span class="p">[</span><span class="s1">&#39;dynamicSolver&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">it</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;pos=&quot;</span><span class="p">,</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">GetObjectOutputBody</span><span class="p">(</span><span class="n">body</span><span class="p">,</span><span class="n">localPosition</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
      <span class="n">variableType</span><span class="o">=</span><span class="n">exu</span><span class="o">.</span><span class="nc">OutputVariableType</span><span class="o">.</span><span class="n">Position</span><span class="p">))</span>
</pre></div>
</div>
<p>Relevant Examples (Ex) and TestModels (TM) with weblink to github:</p>
<blockquote>
<div><p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/3SpringsDistance.py">3SpringsDistance.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/addPrismaticJoint.py">addPrismaticJoint.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/addRevoluteJoint.py">addRevoluteJoint.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/ALEANCFpipe.py">ALEANCFpipe.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/ANCFALEtest.py">ANCFALEtest.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/abaqusImportTest.py">abaqusImportTest.py</a> (TM), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/ACFtest.py">ACFtest.py</a> (TM), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/ANCFBeamEigTest.py">ANCFBeamEigTest.py</a> (TM)</p>
</div></blockquote>
</section>
<section id="function-computelinearizedsystem">
<span id="sec-mainsystemextensions-computelinearizedsystem"></span><h3>Function: ComputeLinearizedSystem<a class="headerlink" href="#function-computelinearizedsystem" title="Link to this heading"></a></h3>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/solver.py#L377">ComputeLinearizedSystem</a>(<code class="docutils literal notranslate"><span class="pre">simulationSettings</span> <span class="pre">=</span> <span class="pre">exudyn.SimulationSettings()</span></code>, <code class="docutils literal notranslate"><span class="pre">projectIntoConstraintNullspace</span> <span class="pre">=</span> <span class="pre">False</span></code>, <code class="docutils literal notranslate"><span class="pre">singularValuesTolerance</span> <span class="pre">=</span> <span class="pre">1e-12</span></code>, <code class="docutils literal notranslate"><span class="pre">returnConstraintJacobian</span> <span class="pre">=</span> <span class="pre">False</span></code>, <code class="docutils literal notranslate"><span class="pre">returnConstraintNullspace</span> <span class="pre">=</span> <span class="pre">False</span></code>, <code class="docutils literal notranslate"><span class="pre">autoAssemble</span> <span class="pre">=</span> <span class="pre">True</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>function description</em>:</div>
<div class="line">compute linearized system of equations for ODE2 part of mbs, not considering the effects of algebraic constraints; for computation of eigenvalues and advanced computation with constrained systems, see ComputeODE2Eigenvalues; the current implementation is also able to project into the constrained space, however, this currently does not generally work with non-holonomic systems</div>
<div class="line">- NOTE that this function is added to MainSystem via Python function ComputeLinearizedSystem.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>input</em>:</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">simulationSettings</span></code>: specific simulation settings used for computation of jacobian (e.g., sparse mode in static solver enables sparse computation)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">projectIntoConstraintNullspace</span></code>: if False, algebraic equations (and constraint jacobian) are not considered for the linearized system; if True, the equations are projected into the nullspace of the constraints in the current configuration, using singular value decomposition; in the latter case, the returned list contains [M, K, D, C, N] where C is the constraint jacobian and N is the nullspace matrix (C and N may be an empty list, depending on the following flags)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">singularValuesTolerance</span></code>: tolerance used to distinguish between zero and nonzero singular values for algebraic constraints projection</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">returnConstraintJacobian</span></code>: if True, the returned list contains [M, K, D, C, N] where C is the constraint jacobian and N is the nullspace matrix (may be empty)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">returnConstraintNullspace</span></code>: if True, the returned list contains [M, K, D, C, N] where C is the constraint jacobian (may be empty) and N is the nullspace matrix</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">autoAssemble</span></code>: if True: if mbs.systemIsConsistent=False (system is not assembled), call mbs.Assemble() before solver calls</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>output</em>:</div>
<div class="line">[ArrayLike, ArrayLike, ArrayLike]; [M, K, D]; list containing numpy mass matrix M, stiffness matrix K and damping matrix D; for constraints, see options with arguments above, return values may change to [M, K, D, C, N]</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>notes</em>:</div>
<div class="line">consider paper of Agundez, Vallejo, Freire, Mikkola, “The dependent coordinates in the linearization of constrained multibody systems: Handling and elimination”, <a class="reference external" href="https://www.sciencedirect.com/science/article/pii/S0020740324000791">https://www.sciencedirect.com/science/article/pii/S0020740324000791</a></div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>example</em>:</div>
</div>
</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">exudyn</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">exu</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">exudyn.utilities</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="n">SC</span> <span class="o">=</span> <span class="n">exu</span><span class="o">.</span><span class="nc">SystemContainer</span><span class="p">()</span>
<span class="n">mbs</span> <span class="o">=</span> <span class="n">SC</span><span class="o">.</span><span class="nf">AddSystem</span><span class="p">()</span>
<span class="c1">#</span>
<span class="n">b0</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">CreateMassPoint</span><span class="p">(</span><span class="n">referencePosition</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
                         <span class="n">initialVelocity</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="o">*</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
                         <span class="n">physicsMass</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">gravity</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">9.81</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
                         <span class="n">drawSize</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">graphics</span><span class="o">.</span><span class="n">color</span><span class="o">.</span><span class="n">blue</span><span class="p">)</span>
<span class="c1">#</span>
<span class="n">oGround</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">AddObject</span><span class="p">(</span><span class="nc">ObjectGround</span><span class="p">())</span>
<span class="c1">#add vertical spring</span>
<span class="n">oSD</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">CreateSpringDamper</span><span class="p">(</span><span class="n">bodyOrNodeList</span><span class="o">=</span><span class="p">[</span><span class="n">oGround</span><span class="p">,</span> <span class="n">b0</span><span class="p">],</span>
                             <span class="n">localPosition0</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
                             <span class="n">localPosition1</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
                             <span class="n">stiffness</span><span class="o">=</span><span class="mf">1e4</span><span class="p">,</span> <span class="n">damping</span><span class="o">=</span><span class="mf">1e2</span><span class="p">,</span>
                             <span class="n">drawSize</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>
<span class="c1">#</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">Assemble</span><span class="p">()</span>
<span class="p">[</span><span class="n">M</span><span class="p">,</span><span class="n">K</span><span class="p">,</span><span class="n">D</span><span class="p">]</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">ComputeLinearizedSystem</span><span class="p">()</span>
<span class="n">exu</span><span class="o">.</span><span class="nf">Print</span><span class="p">(</span><span class="s1">&#39;M=</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span><span class="n">M</span><span class="p">,</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">K=</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span><span class="n">K</span><span class="p">,</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">D=</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span><span class="n">D</span><span class="p">)</span>
</pre></div>
</div>
<p>Relevant Examples (Ex) and TestModels (TM) with weblink to github:</p>
<blockquote>
<div><p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/ANCFBeamEigTest.py">ANCFBeamEigTest.py</a> (TM), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/ANCFBeamTest.py">ANCFBeamTest.py</a> (TM), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/geometricallyExactBeamTest.py">geometricallyExactBeamTest.py</a> (TM), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/mainSystemExtensionsTests.py">mainSystemExtensionsTests.py</a> (TM)</p>
</div></blockquote>
</section>
<section id="function-computeode2eigenvalues">
<span id="sec-mainsystemextensions-computeode2eigenvalues"></span><h3>Function: ComputeODE2Eigenvalues<a class="headerlink" href="#function-computeode2eigenvalues" title="Link to this heading"></a></h3>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/solver.py#L515">ComputeODE2Eigenvalues</a>(<code class="docutils literal notranslate"><span class="pre">simulationSettings</span> <span class="pre">=</span> <span class="pre">exudyn.SimulationSettings()</span></code>, <code class="docutils literal notranslate"><span class="pre">useSparseSolver</span> <span class="pre">=</span> <span class="pre">False</span></code>, <code class="docutils literal notranslate"><span class="pre">numberOfEigenvalues</span> <span class="pre">=</span> <span class="pre">0</span></code>, <code class="docutils literal notranslate"><span class="pre">constrainedCoordinates</span> <span class="pre">=</span> <span class="pre">[]</span></code>, <code class="docutils literal notranslate"><span class="pre">convert2Frequencies</span> <span class="pre">=</span> <span class="pre">False</span></code>, <code class="docutils literal notranslate"><span class="pre">useAbsoluteValues</span> <span class="pre">=</span> <span class="pre">True</span></code>, <code class="docutils literal notranslate"><span class="pre">computeComplexEigenvalues</span> <span class="pre">=</span> <span class="pre">False</span></code>, <code class="docutils literal notranslate"><span class="pre">ignoreAlgebraicEquations</span> <span class="pre">=</span> <span class="pre">False</span></code>, <code class="docutils literal notranslate"><span class="pre">singularValuesTolerance</span> <span class="pre">=</span> <span class="pre">1e-12</span></code>, <code class="docutils literal notranslate"><span class="pre">autoAssemble</span> <span class="pre">=</span> <span class="pre">True</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>function description</em>:</div>
<div class="line">compute eigenvalues for unconstrained ODE2 part of mbs, which represent the square of the eigenfrequencies (in radiant) of the undamped system; the computation may include constraints in case that ignoreAlgebraicEquations=False (however, this currently does not generally work with non-holonomic systems); for algebraic constraints, however, a dense singular value decomposition of the constraint jacobian is used for the nullspace projection; the computation is done for the initial values of the mbs, independently of previous computations. If you would like to use the current state for the eigenvalue computation, you need to copy the current state to the initial state (using GetSystemState, SetSystemState, see Section <a class="reference internal" href="SystemData.html#sec-mbs-systemdata"><span class="std std-ref">SystemData</span></a>); note that mass and stiffness matrices are computed in dense mode so far, while eigenvalues are computed according to useSparseSolver.</div>
<div class="line">- NOTE that this function is added to MainSystem via Python function ComputeODE2Eigenvalues.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>input</em>:</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">simulationSettings</span></code>: specific simulation settings used for computation of jacobian (e.g., sparse mode in static solver enables sparse computation)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">useSparseSolver</span></code>: if False (only for small systems), all eigenvalues are computed in dense mode (slow for large systems!); if True, only the numberOfEigenvalues are computed (numberOfEigenvalues must be set!); Currently, the matrices are exported only in DENSE MODE from mbs, which means that intermediate matrices may become huge for more than 5000 coordinates! NOTE that the sparsesolver accuracy is much less than the dense solver</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">numberOfEigenvalues</span></code>: number of eigenvalues and eivenvectors to be computed; if numberOfEigenvalues==0, all eigenvalues will be computed (may be impossible for larger or sparse problems!)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">constrainedCoordinates</span></code>: if this list is non-empty (and there are no algebraic equations or ignoreAlgebraicEquations=True), the integer indices represent constrained coordinates of the system, which are fixed during eigenvalue/vector computation; according rows/columns of mass and stiffness matrices are erased; in this case, algebraic equations of the system are ignored</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">convert2Frequencies</span></code>: if True, the square root is computed for eigenvalues, they are converted into frequencies (Hz), and the output is [eigenFrequencies, eigenVectors]</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">useAbsoluteValues</span></code>: if True, abs(eigenvalues) is used, which avoids problems for small (close to zero) eigenvalues; needed, when converting to frequencies</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">computeComplexEigenvalues</span></code>: if True, the system is converted into a system of first order differential equations, including damping terms; returned eigenvalues are complex and contain the ‘damping’ (=real) part and the eigenfrequency (=complex) part; for this case, set useAbsoluteValues=False (otherwise you will not get the complex values; values are unsorted, however!); also, convert2Frequencies must be False in this case! only implemented for dense solver</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">ignoreAlgebraicEquations</span></code>: if True, algebraic equations (and constraint jacobian) are not considered for eigenvalue computation; otherwise, the solver tries to automatically project the system into the nullspace kernel of the constraint jacobian using a SVD; this gives eigenvalues of the constrained system; eigenvectors are not computed</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">singularValuesTolerance</span></code>: tolerance used to distinguish between zero and nonzero singular values for algebraic constraints projection</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">autoAssemble</span></code>: if True: if mbs.systemIsConsistent=False (system is not assembled), call mbs.Assemble() before solver calls</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>output</em>:</div>
<div class="line">[ArrayLike, ArrayLike]; [eigenValues, eigenVectors]; eigenValues being a numpy array of eigen values (<span class="math notranslate nohighlight">\(\omega_i^2\)</span>, being the squared eigen frequencies in (<span class="math notranslate nohighlight">\(\omega_i\)</span> in rad/s)!), eigenVectors a numpy array containing the eigenvectors in every column</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>author</em>:</div>
<div class="line">Johannes Gerstmayr, Michael Pieber</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>example</em>:</div>
</div>
</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span> <span class="c1">#take any example from the Examples or TestModels folder, e.g., &#39;cartesianSpringDamper.py&#39; and run it</span>
 <span class="c1">#specific example:</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">exudyn</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">exu</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">exudyn.utilities</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="n">SC</span> <span class="o">=</span> <span class="n">exu</span><span class="o">.</span><span class="nc">SystemContainer</span><span class="p">()</span>
<span class="n">mbs</span> <span class="o">=</span> <span class="n">SC</span><span class="o">.</span><span class="nf">AddSystem</span><span class="p">()</span>
<span class="c1">#</span>
<span class="n">b0</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">CreateMassPoint</span><span class="p">(</span><span class="n">referencePosition</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
                         <span class="n">physicsMass</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">gravity</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">9.81</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
                         <span class="n">drawSize</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">graphics</span><span class="o">.</span><span class="n">color</span><span class="o">.</span><span class="n">blue</span><span class="p">)</span>
<span class="c1">#</span>
<span class="n">oGround</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">AddObject</span><span class="p">(</span><span class="nc">ObjectGround</span><span class="p">())</span>
<span class="c1">#add vertical spring</span>
<span class="n">oSD</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">CreateSpringDamper</span><span class="p">(</span><span class="n">bodyOrNodeList</span><span class="o">=</span><span class="p">[</span><span class="n">oGround</span><span class="p">,</span> <span class="n">b0</span><span class="p">],</span>
                             <span class="n">localPosition0</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
                             <span class="n">localPosition1</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
                             <span class="n">stiffness</span><span class="o">=</span><span class="mf">1e4</span><span class="p">,</span> <span class="n">damping</span><span class="o">=</span><span class="mf">1e2</span><span class="p">,</span>
                             <span class="n">drawSize</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>
<span class="c1">#</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">Assemble</span><span class="p">()</span>
<span class="c1">#</span>
<span class="p">[</span><span class="n">eigenvalues</span><span class="p">,</span> <span class="n">eigenvectors</span><span class="p">]</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">ComputeODE2Eigenvalues</span><span class="p">()</span>
<span class="c1">#==&gt;eigenvalues contain the eigenvalues of the ODE2 part of the system in the current configuration</span>
<span class="c1">#</span>
<span class="c1">#compute eigenfrequencies in Hz (analytical: 100/2/pi Hz for y-direction):</span>
<span class="p">[</span><span class="n">eigenvaluesHz</span><span class="p">,</span> <span class="n">ev</span><span class="p">]</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">ComputeODE2Eigenvalues</span><span class="p">(</span><span class="n">convert2Frequencies</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="c1">#</span>
<span class="c1">#compute complex eigenvalues:</span>
<span class="p">[</span><span class="n">eigenvaluesComplex</span><span class="p">,</span> <span class="n">ev</span><span class="p">]</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">ComputeODE2Eigenvalues</span><span class="p">(</span><span class="n">computeComplexEigenvalues</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                                      <span class="n">useAbsoluteValues</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p>Relevant Examples (Ex) and TestModels (TM) with weblink to github:</p>
<blockquote>
<div><p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/nMassOscillator.py">nMassOscillator.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/nMassOscillatorEigenmodes.py">nMassOscillatorEigenmodes.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/nMassOscillatorInteractive.py">nMassOscillatorInteractive.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/ANCFBeamEigTest.py">ANCFBeamEigTest.py</a> (TM), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/ANCFBeamTest.py">ANCFBeamTest.py</a> (TM), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/bricardMechanism.py">bricardMechanism.py</a> (TM), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/complexEigenvaluesTest.py">complexEigenvaluesTest.py</a> (TM), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/computeODE2AEeigenvaluesTest.py">computeODE2AEeigenvaluesTest.py</a> (TM)</p>
</div></blockquote>
</section>
<section id="function-computesystemdegreeoffreedom">
<span id="sec-mainsystemextensions-computesystemdegreeoffreedom"></span><h3>Function: ComputeSystemDegreeOfFreedom<a class="headerlink" href="#function-computesystemdegreeoffreedom" title="Link to this heading"></a></h3>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/solver.py#L741">ComputeSystemDegreeOfFreedom</a>(<code class="docutils literal notranslate"><span class="pre">simulationSettings</span> <span class="pre">=</span> <span class="pre">exudyn.SimulationSettings()</span></code>, <code class="docutils literal notranslate"><span class="pre">threshold</span> <span class="pre">=</span> <span class="pre">1e-12</span></code>, <code class="docutils literal notranslate"><span class="pre">verbose</span> <span class="pre">=</span> <span class="pre">False</span></code>, <code class="docutils literal notranslate"><span class="pre">useSVD</span> <span class="pre">=</span> <span class="pre">False</span></code>, <code class="docutils literal notranslate"><span class="pre">autoAssemble</span> <span class="pre">=</span> <span class="pre">True</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>function description</em>:</div>
<div class="line">compute system DOF numerically, considering GrÃ¼bler-Kutzbach formula as well as redundant constraints; uses numpy matrix rank or singular value decomposition of scipy (useSVD=True)</div>
<div class="line">- NOTE that this function is added to MainSystem via Python function ComputeSystemDegreeOfFreedom.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>input</em>:</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">simulationSettings</span></code>: used e.g. for settings regarding numerical differentiation; default settings may be used in most cases</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">threshold</span></code>: threshold factor for singular values which estimate the redundant constraints</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">useSVD</span></code>: use singular value decomposition directly, also showing SVD values if verbose=True</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">verbose</span></code>: if True, it will show the singular values and one may decide if the threshold shall be adapted</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">autoAssemble</span></code>: if True: if mbs.systemIsConsistent=False (system is not assembled), call mbs.Assemble() before solver calls</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>output</em>:</div>
<div class="line">dict; returns dictionary with key words ‘degreeOfFreedom’, ‘redundantConstraints’, ‘nODE2’, ‘nODE1’, ‘nAE’, ‘nPureAE’, where: degreeOfFreedom = the system degree of freedom computed numerically, redundantConstraints=the number of redundant constraints, nODE2=number of ODE2 coordinates, nODE1=number of ODE1 coordinates, nAE=total number of constraints, nPureAE=number of constraints on algebraic variables (e.g., lambda=0) that are not coupled to ODE2 coordinates</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>notes</em>:</div>
<div class="line">this approach could possibly fail with special constraints! Currently only works with dense matrices, thus it will be slow for larger systems</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>example</em>:</div>
</div>
</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">exudyn</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">exu</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">exudyn.utilities</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="n">SC</span> <span class="o">=</span> <span class="n">exu</span><span class="o">.</span><span class="nc">SystemContainer</span><span class="p">()</span>
<span class="n">mbs</span> <span class="o">=</span> <span class="n">SC</span><span class="o">.</span><span class="nf">AddSystem</span><span class="p">()</span>
<span class="c1">#</span>
<span class="n">b0</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">CreateRigidBody</span><span class="p">(</span><span class="n">inertia</span> <span class="o">=</span> <span class="nc">InertiaCuboid</span><span class="p">(</span><span class="n">density</span><span class="o">=</span><span class="mi">5000</span><span class="p">,</span>
                                                 <span class="n">sideLengths</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.1</span><span class="p">]),</span>
                         <span class="n">referencePosition</span> <span class="o">=</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
                         <span class="n">initialAngularVelocity</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
                         <span class="n">gravity</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">9.81</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
                         <span class="n">graphicsDataList</span> <span class="o">=</span> <span class="p">[</span><span class="n">exu</span><span class="o">.</span><span class="n">graphics</span><span class="o">.</span><span class="nf">Brick</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.1</span><span class="p">],</span>
                                                                      <span class="n">color</span><span class="o">=</span><span class="n">graphics</span><span class="o">.</span><span class="n">color</span><span class="o">.</span><span class="n">orange</span><span class="p">)])</span>
<span class="n">oGround</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">AddObject</span><span class="p">(</span><span class="nc">ObjectGround</span><span class="p">())</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">CreateGenericJoint</span><span class="p">(</span><span class="n">bodyNumbers</span><span class="o">=</span><span class="p">[</span><span class="n">oGround</span><span class="p">,</span> <span class="n">b0</span><span class="p">],</span> <span class="n">position</span><span class="o">=</span><span class="p">[</span><span class="mf">5.5</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
                       <span class="n">constrainedAxes</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
                       <span class="n">rotationMatrixAxes</span><span class="o">=</span><span class="nf">RotationMatrixX</span><span class="p">(</span><span class="mf">0.125</span><span class="o">*</span><span class="n">pi</span><span class="p">),</span> <span class="c1">#tilt axes</span>
                       <span class="n">useGlobalFrame</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">axesRadius</span><span class="o">=</span><span class="mf">0.02</span><span class="p">,</span> <span class="n">axesLength</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>
<span class="c1">#</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">Assemble</span><span class="p">()</span>
<span class="n">dof</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">ComputeSystemDegreeOfFreedom</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="mi">1</span><span class="p">)[</span><span class="s1">&#39;degreeOfFreedom&#39;</span><span class="p">]</span> <span class="c1">#print out details</span>
</pre></div>
</div>
<p>Relevant Examples (Ex) and TestModels (TM) with weblink to github:</p>
<blockquote>
<div><p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/fourBarMechanism3D.py">fourBarMechanism3D.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/rigidBodyTutorial3.py">rigidBodyTutorial3.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/bricardMechanism.py">bricardMechanism.py</a> (TM), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/mainSystemExtensionsTests.py">mainSystemExtensionsTests.py</a> (TM)</p>
</div></blockquote>
</section>
<section id="function-createdistancesensorgeometry">
<span id="sec-mainsystemextensions-createdistancesensorgeometry"></span><h3>Function: CreateDistanceSensorGeometry<a class="headerlink" href="#function-createdistancesensorgeometry" title="Link to this heading"></a></h3>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/utilities.py#L195">CreateDistanceSensorGeometry</a>(<code class="docutils literal notranslate"><span class="pre">meshPoints</span></code>, <code class="docutils literal notranslate"><span class="pre">meshTrigs</span></code>, <code class="docutils literal notranslate"><span class="pre">rigidBodyMarkerIndex</span></code>, <code class="docutils literal notranslate"><span class="pre">searchTreeCellSize</span> <span class="pre">=</span> <span class="pre">[8,8,8]</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>function description</em>:</div>
<div class="line">Add geometry for distance sensor given by points and triangles (point indices) to mbs; use a rigid body marker where the geometry is put on;</div>
<div class="line">Creates a GeneralContact for efficient search on background. If you have several sets of points and trigs, first merge them or add them manually to the contact</div>
<div class="line">- NOTE that this function is added to MainSystem via Python function CreateDistanceSensorGeometry.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>input</em>:</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">meshPoints</span></code>: list of points (3D), as returned by graphics.ToPointsAndTrigs()</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">meshTrigs</span></code>: list of trigs (3 node indices each), as returned by graphics.ToPointsAndTrigs()</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">rigidBodyMarkerIndex</span></code>: rigid body marker to which the triangles are fixed on (ground or moving object)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">searchTreeCellSize</span></code>: size of search tree (X,Y,Z); use larger values in directions where more triangles are located</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>output</em>:</div>
<div class="line">int; returns ngc, which is the number of GeneralContact in mbs, to be used in CreateDistanceSensor(…); keep the gContact as deletion may corrupt data</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>notes</em>:</div>
<div class="line">should be used by CreateDistanceSensor(…) and AddLidar(…) for simple initialization of GeneralContact; old name: DistanceSensorSetupGeometry(…)</div>
</div>
</li>
</ul>
<p>Relevant Examples (Ex) and TestModels (TM) with weblink to github:</p>
<blockquote>
<div><p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/mobileMecanumWheelRobotWithLidar.py">mobileMecanumWheelRobotWithLidar.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/laserScannerTest.py">laserScannerTest.py</a> (TM)</p>
</div></blockquote>
</section>
<section id="function-createdistancesensor">
<span id="sec-mainsystemextensions-createdistancesensor"></span><h3>Function: CreateDistanceSensor<a class="headerlink" href="#function-createdistancesensor" title="Link to this heading"></a></h3>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/utilities.py#L228">CreateDistanceSensor</a>(<code class="docutils literal notranslate"><span class="pre">generalContactIndex</span></code>, <code class="docutils literal notranslate"><span class="pre">positionOrMarker</span></code>, <code class="docutils literal notranslate"><span class="pre">dirSensor</span></code>, <code class="docutils literal notranslate"><span class="pre">minDistance</span> <span class="pre">=</span> <span class="pre">-1e7</span></code>, <code class="docutils literal notranslate"><span class="pre">maxDistance</span> <span class="pre">=</span> <span class="pre">1e7</span></code>, <code class="docutils literal notranslate"><span class="pre">cylinderRadius</span> <span class="pre">=</span> <span class="pre">0</span></code>, <code class="docutils literal notranslate"><span class="pre">selectedTypeIndex</span> <span class="pre">=</span> <span class="pre">exudyn.ContactTypeIndex.IndexEndOfEnumList</span></code>, <code class="docutils literal notranslate"><span class="pre">storeInternal</span> <span class="pre">=</span> <span class="pre">False</span></code>, <code class="docutils literal notranslate"><span class="pre">fileName</span> <span class="pre">=</span> <span class="pre">''</span></code>, <code class="docutils literal notranslate"><span class="pre">measureVelocity</span> <span class="pre">=</span> <span class="pre">False</span></code>, <code class="docutils literal notranslate"><span class="pre">addGraphicsObject</span> <span class="pre">=</span> <span class="pre">False</span></code>, <code class="docutils literal notranslate"><span class="pre">drawDisplaced</span> <span class="pre">=</span> <span class="pre">True</span></code>, <code class="docutils literal notranslate"><span class="pre">color</span> <span class="pre">=</span> <span class="pre">exudyn.graphics.color.red</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>function description</em>:</div>
<div class="line">Function to create distance sensor based on GeneralContact in mbs; sensor can be either placed on absolute position or attached to rigid body marker; in case of marker, dirSensor is relative to the marker</div>
<div class="line">- NOTE that this function is added to MainSystem via Python function CreateDistanceSensor.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>input</em>:</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">generalContactIndex</span></code>: the number of the GeneralContact object in mbs; the index of the GeneralContact object which has been added with last AddGeneralContact(…) command is generalContactIndex=mbs.NumberOfGeneralContacts()-1</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">positionOrMarker</span></code>: either a 3D position as list or np.array, or a MarkerIndex with according rigid body marker</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">dirSensor</span></code>: the direction (no need to normalize) along which the distance is measured (must not be normalized); in case of marker, the direction is relative to marker orientation if marker contains orientation (BodyRigid, NodeRigid)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">minDistance</span></code>: the minimum distance which is accepted; smaller distance will be ignored</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">maxDistance</span></code>: the maximum distance which is accepted; items being at maxDistance or futher are ignored; if no items are found, the function returns maxDistance</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">cylinderRadius</span></code>: in case of spheres (selectedTypeIndex=ContactTypeIndex.IndexSpheresMarkerBased), a cylinder can be used which measures the shortest distance at a certain radius (geometrically interpreted as cylinder)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">selectedTypeIndex</span></code>: either this type has default value, meaning that all items in GeneralContact are measured, or there is a specific type index, which is the only type that is considered during measurement</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">storeInternal</span></code>: like with any SensorUserFunction, setting to True stores sensor data internally</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">fileName</span></code>: if defined, recorded data of SensorUserFunction is written to specified file</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">measureVelocity</span></code>: if True, the sensor measures additionally the velocity (component 0=distance, component 1=velocity); velocity is the velocity in direction ‘dirSensor’ and does not account for changes in geometry, thus it may be different from the time derivative of the distance!</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">addGraphicsObject</span></code>: if True, the distance sensor is also visualized graphically in a simplified manner with a red line having the length of dirSensor; NOTE that updates are ONLY performed during computation, not in visualization; for this reason, solutionSettings.sensorsWritePeriod should be accordingly small</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">drawDisplaced</span></code>: if True, the red line is drawn backwards such that it moves along the measured surface; if False, the beam is fixed to marker or position</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">color</span></code>: optional color for ‘laser beam’ to be drawn</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>output</em>:</div>
<div class="line">SensorIndex; creates sensor and returns according sensor number of SensorUserFunction</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>notes</em>:</div>
<div class="line">use generalContactIndex = CreateDistanceSensorGeometry(…) before to create GeneralContact module containing geometry; old name: AddDistanceSensor(…)</div>
</div>
</li>
</ul>
<p>Relevant Examples (Ex) and TestModels (TM) with weblink to github:</p>
<blockquote>
<div><p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/distanceSensor.py">distanceSensor.py</a> (TM), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/laserScannerTest.py">laserScannerTest.py</a> (TM)</p>
</div></blockquote>
</section>
<section id="function-drawsystemgraph">
<span id="sec-mainsystemextensions-drawsystemgraph"></span><h3>Function: DrawSystemGraph<a class="headerlink" href="#function-drawsystemgraph" title="Link to this heading"></a></h3>
<p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/exudyn/utilities.py#L883">DrawSystemGraph</a>(<code class="docutils literal notranslate"><span class="pre">showLoads</span> <span class="pre">=</span> <span class="pre">True</span></code>, <code class="docutils literal notranslate"><span class="pre">showSensors</span> <span class="pre">=</span> <span class="pre">True</span></code>, <code class="docutils literal notranslate"><span class="pre">useItemNames</span> <span class="pre">=</span> <span class="pre">False</span></code>, <code class="docutils literal notranslate"><span class="pre">useItemTypes</span> <span class="pre">=</span> <span class="pre">False</span></code>, <code class="docutils literal notranslate"><span class="pre">addItemTypeNames</span> <span class="pre">=</span> <span class="pre">True</span></code>, <code class="docutils literal notranslate"><span class="pre">multiLine</span> <span class="pre">=</span> <span class="pre">True</span></code>, <code class="docutils literal notranslate"><span class="pre">fontSizeFactor</span> <span class="pre">=</span> <span class="pre">1.</span></code>, <code class="docutils literal notranslate"><span class="pre">layoutDistanceFactor</span> <span class="pre">=</span> <span class="pre">3.</span></code>, <code class="docutils literal notranslate"><span class="pre">layoutIterations</span> <span class="pre">=</span> <span class="pre">100</span></code>, <code class="docutils literal notranslate"><span class="pre">showLegend</span> <span class="pre">=</span> <span class="pre">True</span></code>, <code class="docutils literal notranslate"><span class="pre">tightLayout</span> <span class="pre">=</span> <span class="pre">True</span></code>)</p>
<ul>
<li><div class="line-block">
<div class="line"><em>function description</em>:</div>
<div class="line">helper function which draws system graph of a MainSystem (mbs); several options let adjust the appearance of the graph; the graph visualization uses randomizer, which results in different graphs after every run!</div>
<div class="line">- NOTE that this function is added to MainSystem via Python function DrawSystemGraph.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>input</em>:</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">showLoads</span></code>: toggle appearance of loads in mbs</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">showSensors</span></code>: toggle appearance of sensors in mbs</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">useItemNames</span></code>: if True, object names are shown instead of basic object types (Node, Load, …)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">useItemTypes</span></code>: if True, object type names (MassPoint, JointRevolute, …) are shown instead of basic object types (Node, Load, …); Note that Node, Object, is omitted at the beginning of itemName (as compared to theDoc.pdf); item classes become clear from the legend</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">addItemTypeNames</span></code>: if True, type nymes (Node, Load, etc.) are added</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">multiLine</span></code>: if True, labels are multiline, improving readability</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">fontSizeFactor</span></code>: use this factor to scale fonts, allowing to fit larger graphs on the screen with values &lt; 1</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">showLegend</span></code>: shows legend for different item types</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">layoutDistanceFactor</span></code>: this factor influences the arrangement of labels; larger distance values lead to circle-like results</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">layoutIterations</span></code>: more iterations lead to better arrangement of the layout, but need more time for larger systems (use 1000-10000 to get good results)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">tightLayout</span></code>: if True, uses matplotlib plt.tight_layout() which may raise warning</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>output</em>:</div>
<div class="line">[Any, Any, Any]; returns [networkx, G, items] with nx being networkx, G the graph and item what is returned by nx.draw_networkx_labels(…)</div>
</div>
</li>
</ul>
<p>Relevant Examples (Ex) and TestModels (TM) with weblink to github:</p>
<blockquote>
<div><p><a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/fourBarMechanism3D.py">fourBarMechanism3D.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/rigidBodyTutorial3.py">rigidBodyTutorial3.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/Examples/rigidBodyTutorial3withMarkers.py">rigidBodyTutorial3withMarkers.py</a> (Ex), <a class="reference external" href="https://github.com/jgerstmayr/EXUDYN/blob/master/main/pythonDev/TestModels/mainSystemExtensionsTests.py">mainSystemExtensionsTests.py</a> (TM)</p>
</div></blockquote>
</section>
</section>
<section id="mainsystem-node">
<span id="sec-mainsystem-node"></span><h2>MainSystem: Node<a class="headerlink" href="#mainsystem-node" title="Link to this heading"></a></h2>
<p>This section provides functions for adding, reading and modifying nodes. Nodes are used to define coordinates (unknowns to the static system and degrees of freedom if constraints are not present). Nodes can provide various types of coordinates for second/first order differential equations (ODE2/ODE1), algebraic equations (AE) and for data (history) variables – which are not providing unknowns in the nonlinear solver but will be solved in an additional nonlinear iteration for e.g. contact, friction or plasticity.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kn">import</span><span class="w"> </span><span class="nn">exudyn</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">exu</span>               <span class="c1">#EXUDYN package including C++ core part</span>
<span class="linenos">2</span><span class="kn">from</span><span class="w"> </span><span class="nn">exudyn.itemInterface</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span> <span class="c1">#conversion of data to exudyn dictionaries</span>
<span class="linenos">3</span><span class="n">SC</span> <span class="o">=</span> <span class="n">exu</span><span class="o">.</span><span class="nc">SystemContainer</span><span class="p">()</span>         <span class="c1">#container of systems</span>
<span class="linenos">4</span><span class="n">mbs</span> <span class="o">=</span> <span class="n">SC</span><span class="o">.</span><span class="nf">AddSystem</span><span class="p">()</span>               <span class="c1">#add a new system to work with</span>
<span class="linenos">5</span><span class="n">nMP</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">AddNode</span><span class="p">(</span><span class="nc">NodePoint2D</span><span class="p">(</span><span class="n">referenceCoordinates</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]))</span>
</pre></div>
</div>
<p>The class <strong>MainSystem</strong> has the following <strong>functions and structures</strong> regarding <strong>nodes</strong>:</p>
<ul>
<li><div class="line-block">
<div class="line"><strong>AddNode</strong>(<em>pyObject</em>):</div>
<div class="line">add a node with nodeDefinition from Python node class; returns (global) node index (type NodeIndex) of newly added node; use int(nodeIndex) to convert to int, if needed (but not recommended in order not to mix up index types of nodes, objects, markers, …)</div>
<div class="line"><em>Example</em>:</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">item</span> <span class="o">=</span> <span class="nc">Rigid2D</span><span class="p">(</span> <span class="n">referenceCoordinates</span><span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.5</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="n">initialVelocities</span><span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">AddNode</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
<span class="n">nodeDict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;nodeType&#39;</span><span class="p">:</span> <span class="s1">&#39;Point&#39;</span><span class="p">,</span>
<span class="s1">&#39;referenceCoordinates&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>
<span class="s1">&#39;initialCoordinates&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>
<span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;example node&#39;</span><span class="p">}</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">AddNode</span><span class="p">(</span><span class="n">nodeDict</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>GetNodeNumber</strong>(<em>nodeName</em>):</div>
<div class="line">get node’s number by name (string)</div>
<div class="line"><em>Example</em>:</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">n</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">GetNodeNumber</span><span class="p">(</span><span class="s1">&#39;example node&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>GetNode</strong>(<em>nodeNumber</em>):</div>
<div class="line">get node’s dictionary by node number (type NodeIndex)</div>
<div class="line"><em>Example</em>:</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">nodeDict</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">GetNode</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>ModifyNode</strong>(<em>nodeNumber</em>, <em>nodeDict</em>):</div>
<div class="line">modify node’s dictionary by node number (type NodeIndex)</div>
<div class="line"><em>Example</em>:</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">mbs</span><span class="o">.</span><span class="nf">ModifyNode</span><span class="p">(</span><span class="n">nodeNumber</span><span class="p">,</span> <span class="n">nodeDict</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>GetNodeDefaults</strong>(<em>typeName</em>):</div>
<div class="line">get node’s default values for a certain nodeType as (dictionary)</div>
<div class="line"><em>Example</em>:</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">nodeType</span> <span class="o">=</span> <span class="s1">&#39;Point&#39;</span>
<span class="n">nodeDict</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">GetNodeDefaults</span><span class="p">(</span><span class="n">nodeType</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>GetNodeOutput</strong>(<em>nodeNumber</em>, <em>variableType</em>, <em>configuration</em> = exu.ConfigurationType.Current):</div>
<div class="line">get the ouput of the node specified with the OutputVariableType; output may be scalar or array (e.g. displacement vector)</div>
<div class="line"><em>Example</em>:</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">mbs</span><span class="o">.</span><span class="nf">GetNodeOutput</span><span class="p">(</span><span class="n">nodeNumber</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">variableType</span><span class="o">=</span><span class="n">exu</span><span class="o">.</span><span class="nc">OutputVariableType</span><span class="o">.</span><span class="n">Displacement</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>GetNodeODE2Index</strong>(<em>nodeNumber</em>):</div>
<div class="line">get index in the global ODE2 coordinate vector for the first node coordinate of the specified node</div>
<div class="line"><em>Example</em>:</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">mbs</span><span class="o">.</span><span class="nf">GetNodeODE2Index</span><span class="p">(</span><span class="n">nodeNumber</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>GetNodeODE1Index</strong>(<em>nodeNumber</em>):</div>
<div class="line">get index in the global ODE1 coordinate vector for the first node coordinate of the specified node</div>
<div class="line"><em>Example</em>:</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">mbs</span><span class="o">.</span><span class="nf">GetNodeODE1Index</span><span class="p">(</span><span class="n">nodeNumber</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>GetNodeAEIndex</strong>(<em>nodeNumber</em>):</div>
<div class="line">get index in the global AE coordinate vector for the first node coordinate of the specified node</div>
<div class="line"><em>Example</em>:</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">mbs</span><span class="o">.</span><span class="nf">GetNodeAEIndex</span><span class="p">(</span><span class="n">nodeNumber</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>GetNodeParameter</strong>(<em>nodeNumber</em>, <em>parameterName</em>):</div>
<div class="line">get nodes’s parameter from node number (type NodeIndex) and parameterName; parameter names can be found for the specific items in the reference manual; for visualization parameters, use a ‘V’ as a prefix</div>
<div class="line"><em>Example</em>:</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">mbs</span><span class="o">.</span><span class="nf">GetNodeParameter</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;referenceCoordinates&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>SetNodeParameter</strong>(<em>nodeNumber</em>, <em>parameterName</em>, <em>value</em>):</div>
<div class="line">set parameter ‘parameterName’ of node with node number (type NodeIndex) to value; parameter names can be found for the specific items in the reference manual; for visualization parameters, use a ‘V’ as a prefix</div>
<div class="line"><em>Example</em>:</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">mbs</span><span class="o">.</span><span class="nf">SetNodeParameter</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Vshow&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="mainsystem-object">
<span id="sec-mainsystem-object"></span><h2>MainSystem: Object<a class="headerlink" href="#mainsystem-object" title="Link to this heading"></a></h2>
<p>This section provides functions for adding, reading and modifying objects, which can be bodies (mass point, rigid body, finite element, …), connectors (spring-damper or joint) or general objects. Objects provided terms to the residual of equations resulting from every coordinate given by the nodes. Single-noded objects (e.g.~mass point) provides exactly residual terms for its nodal coordinates. Connectors constrain or penalize two markers, which can be, e.g., position, rigid or coordinate markers. Thus, the dependence of objects is either on the coordinates of the marker-objects/nodes or on nodes which the objects possess themselves.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kn">import</span><span class="w"> </span><span class="nn">exudyn</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">exu</span>               <span class="c1">#EXUDYN package including C++ core part</span>
<span class="linenos">2</span><span class="kn">from</span><span class="w"> </span><span class="nn">exudyn.itemInterface</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span> <span class="c1">#conversion of data to exudyn dictionaries</span>
<span class="linenos">3</span><span class="n">SC</span> <span class="o">=</span> <span class="n">exu</span><span class="o">.</span><span class="nc">SystemContainer</span><span class="p">()</span>         <span class="c1">#container of systems</span>
<span class="linenos">4</span><span class="n">mbs</span> <span class="o">=</span> <span class="n">SC</span><span class="o">.</span><span class="nf">AddSystem</span><span class="p">()</span>               <span class="c1">#add a new system to work with</span>
<span class="linenos">5</span><span class="n">nMP</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">AddNode</span><span class="p">(</span><span class="nc">NodePoint2D</span><span class="p">(</span><span class="n">referenceCoordinates</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]))</span>
<span class="linenos">6</span><span class="n">mbs</span><span class="o">.</span><span class="nf">AddObject</span><span class="p">(</span><span class="nc">ObjectMassPoint2D</span><span class="p">(</span><span class="n">physicsMass</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">nodeNumber</span><span class="o">=</span><span class="n">nMP</span> <span class="p">))</span>
</pre></div>
</div>
<p>The class <strong>MainSystem</strong> has the following <strong>functions and structures</strong> regarding <strong>objects</strong>:</p>
<ul>
<li><div class="line-block">
<div class="line"><strong>AddObject</strong>(<em>pyObject</em>):</div>
<div class="line">add an object with objectDefinition from Python object class; returns (global) object number (type ObjectIndex) of newly added object</div>
<div class="line"><em>Example</em>:</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">item</span> <span class="o">=</span> <span class="nc">MassPoint</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;heavy object&#39;</span><span class="p">,</span> <span class="n">nodeNumber</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">physicsMass</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">AddObject</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
<span class="n">objectDict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;objectType&#39;</span><span class="p">:</span> <span class="s1">&#39;MassPoint&#39;</span><span class="p">,</span>
<span class="s1">&#39;physicsMass&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
<span class="s1">&#39;nodeNumber&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
<span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;example object&#39;</span><span class="p">}</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">AddObject</span><span class="p">(</span><span class="n">objectDict</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>GetObjectNumber</strong>(<em>objectName</em>):</div>
<div class="line">get object’s number by name (string)</div>
<div class="line"><em>Example</em>:</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">n</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">GetObjectNumber</span><span class="p">(</span><span class="s1">&#39;heavy object&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>GetObject</strong>(<em>objectNumber</em>, <em>addGraphicsData</em> = False):</div>
<div class="line">get object’s dictionary by object number (type ObjectIndex); NOTE: visualization parameters have a prefix ‘V’; in order to also get graphicsData written, use addGraphicsData=True (which is by default False, as it would spoil the information)</div>
<div class="line"><em>Example</em>:</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">objectDict</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">GetObject</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>ModifyObject</strong>(<em>objectNumber</em>, <em>objectDict</em>):</div>
<div class="line">modify object’s dictionary by object number (type ObjectIndex); NOTE: visualization parameters have a prefix ‘V’</div>
<div class="line"><em>Example</em>:</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">mbs</span><span class="o">.</span><span class="nf">ModifyObject</span><span class="p">(</span><span class="n">objectNumber</span><span class="p">,</span> <span class="n">objectDict</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>GetObjectDefaults</strong>(<em>typeName</em>):</div>
<div class="line">get object’s default values for a certain objectType as (dictionary)</div>
<div class="line"><em>Example</em>:</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">objectType</span> <span class="o">=</span> <span class="s1">&#39;MassPoint&#39;</span>
<span class="n">objectDict</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">GetObjectDefaults</span><span class="p">(</span><span class="n">objectType</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>GetObjectOutput</strong>(<em>objectNumber</em>, <em>variableType</em>, <em>configuration</em> = exu.ConfigurationType.Current):</div>
<div class="line">get object’s current output variable from object number (type ObjectIndex) and OutputVariableType; for connectors, it can only be computed for exu.ConfigurationType.Current configuration!</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>GetObjectOutputBody</strong>(<em>objectNumber</em>, <em>variableType</em>, <em>localPosition</em> = [0,0,0], <em>configuration</em> = exu.ConfigurationType.Current):</div>
<div class="line">get body’s output variable from object number (type ObjectIndex) and OutputVariableType, using the localPosition as defined in the body, and as used in MarkerBody and SensorBody</div>
<div class="line"><em>Example</em>:</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">u</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">GetObjectOutputBody</span><span class="p">(</span><span class="n">objectNumber</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">variableType</span> <span class="o">=</span> <span class="n">exu</span><span class="o">.</span><span class="nc">OutputVariableType</span><span class="o">.</span><span class="n">Position</span><span class="p">,</span> <span class="n">localPosition</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="n">configuration</span> <span class="o">=</span> <span class="n">exu</span><span class="o">.</span><span class="nc">ConfigurationType</span><span class="o">.</span><span class="n">Initial</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>GetObjectOutputSuperElement</strong>(<em>objectNumber</em>, <em>variableType</em>, <em>meshNodeNumber</em>, <em>configuration</em> = exu.ConfigurationType.Current):</div>
<div class="line">get output variable from mesh node number of object with type SuperElement (GenericODE2, FFRF, FFRFreduced - CMS) with specific OutputVariableType; the meshNodeNumber is the object’s local node number, not the global node number!</div>
<div class="line"><em>Example</em>:</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">u</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">GetObjectOutputSuperElement</span><span class="p">(</span><span class="n">objectNumber</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">variableType</span> <span class="o">=</span> <span class="n">exu</span><span class="o">.</span><span class="nc">OutputVariableType</span><span class="o">.</span><span class="n">Position</span><span class="p">,</span> <span class="n">meshNodeNumber</span> <span class="o">=</span> <span class="mi">12</span><span class="p">,</span> <span class="n">configuration</span> <span class="o">=</span> <span class="n">exu</span><span class="o">.</span><span class="nc">ConfigurationType</span><span class="o">.</span><span class="n">Initial</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>GetObjectParameter</strong>(<em>objectNumber</em>, <em>parameterName</em>):</div>
<div class="line">get objects’s parameter from object number (type ObjectIndex) and parameterName; parameter names can be found for the specific items in the reference manual; for visualization parameters, use a ‘V’ as a prefix; NOTE that BodyGraphicsData cannot be get or set, use dictionary access instead</div>
<div class="line"><em>Example</em>:</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">mbs</span><span class="o">.</span><span class="nf">GetObjectParameter</span><span class="p">(</span><span class="n">objectNumber</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">parameterName</span> <span class="o">=</span> <span class="s1">&#39;nodeNumber&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>SetObjectParameter</strong>(<em>objectNumber</em>, <em>parameterName</em>, <em>value</em>):</div>
<div class="line">set parameter ‘parameterName’ of object with object number (type ObjectIndex) to value;; parameter names can be found for the specific items in the reference manual; for visualization parameters, use a ‘V’ as a prefix; NOTE that BodyGraphicsData cannot be get or set, use dictionary access instead</div>
<div class="line"><em>Example</em>:</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">mbs</span><span class="o">.</span><span class="nf">SetObjectParameter</span><span class="p">(</span><span class="n">objectNumber</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">parameterName</span> <span class="o">=</span> <span class="s1">&#39;Vshow&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="mainsystem-marker">
<span id="sec-mainsystem-marker"></span><h2>MainSystem: Marker<a class="headerlink" href="#mainsystem-marker" title="Link to this heading"></a></h2>
<p>This section provides functions for adding, reading and modifying markers. Markers define how to measure primal kinematical quantities on objects or nodes (e.g., position, orientation or coordinates themselves), and how to act on the quantities which are dual to the kinematical quantities (e.g., force, torque and generalized forces). Markers provide unique interfaces for loads, sensors and constraints in order to address these quantities independently of the structure of the object or node (e.g., rigid or flexible body).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kn">import</span><span class="w"> </span><span class="nn">exudyn</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">exu</span>               <span class="c1">#EXUDYN package including C++ core part</span>
<span class="linenos">2</span><span class="kn">from</span><span class="w"> </span><span class="nn">exudyn.itemInterface</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span> <span class="c1">#conversion of data to exudyn dictionaries</span>
<span class="linenos">3</span><span class="n">SC</span> <span class="o">=</span> <span class="n">exu</span><span class="o">.</span><span class="nc">SystemContainer</span><span class="p">()</span>         <span class="c1">#container of systems</span>
<span class="linenos">4</span><span class="n">mbs</span> <span class="o">=</span> <span class="n">SC</span><span class="o">.</span><span class="nf">AddSystem</span><span class="p">()</span>               <span class="c1">#add a new system to work with</span>
<span class="linenos">5</span><span class="n">nMP</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">AddNode</span><span class="p">(</span><span class="nc">NodePoint2D</span><span class="p">(</span><span class="n">referenceCoordinates</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]))</span>
<span class="linenos">6</span><span class="n">mbs</span><span class="o">.</span><span class="nf">AddObject</span><span class="p">(</span><span class="nc">ObjectMassPoint2D</span><span class="p">(</span><span class="n">physicsMass</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">nodeNumber</span><span class="o">=</span><span class="n">nMP</span> <span class="p">))</span>
<span class="linenos">7</span><span class="n">mMP</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">AddMarker</span><span class="p">(</span><span class="nc">MarkerNodePosition</span><span class="p">(</span><span class="n">nodeNumber</span> <span class="o">=</span> <span class="n">nMP</span><span class="p">))</span>
</pre></div>
</div>
<p>The class <strong>MainSystem</strong> has the following <strong>functions and structures</strong> regarding <strong>markers</strong>:</p>
<ul>
<li><div class="line-block">
<div class="line"><strong>AddMarker</strong>(<em>pyObject</em>):</div>
<div class="line">add a marker with markerDefinition from Python marker class; returns (global) marker number (type MarkerIndex) of newly added marker</div>
<div class="line"><em>Example</em>:</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">item</span> <span class="o">=</span> <span class="nc">MarkerNodePosition</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;my marker&#39;</span><span class="p">,</span><span class="n">nodeNumber</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">AddMarker</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
<span class="n">markerDict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;markerType&#39;</span><span class="p">:</span> <span class="s1">&#39;NodePosition&#39;</span><span class="p">,</span>
  <span class="s1">&#39;nodeNumber&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;position0&#39;</span><span class="p">}</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">AddMarker</span><span class="p">(</span><span class="n">markerDict</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>GetMarkerNumber</strong>(<em>markerName</em>):</div>
<div class="line">get marker’s number by name (string)</div>
<div class="line"><em>Example</em>:</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">n</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">GetMarkerNumber</span><span class="p">(</span><span class="s1">&#39;my marker&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>GetMarker</strong>(<em>markerNumber</em>):</div>
<div class="line">get marker’s dictionary by index</div>
<div class="line"><em>Example</em>:</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">markerDict</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">GetMarker</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>ModifyMarker</strong>(<em>markerNumber</em>, <em>markerDict</em>):</div>
<div class="line">modify marker’s dictionary by index</div>
<div class="line"><em>Example</em>:</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">mbs</span><span class="o">.</span><span class="nf">ModifyMarker</span><span class="p">(</span><span class="n">markerNumber</span><span class="p">,</span> <span class="n">markerDict</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>GetMarkerDefaults</strong>(<em>typeName</em>):</div>
<div class="line">get marker’s default values for a certain markerType as (dictionary)</div>
<div class="line"><em>Example</em>:</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">markerType</span> <span class="o">=</span> <span class="s1">&#39;NodePosition&#39;</span>
<span class="n">markerDict</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">GetMarkerDefaults</span><span class="p">(</span><span class="n">markerType</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>GetMarkerParameter</strong>(<em>markerNumber</em>, <em>parameterName</em>):</div>
<div class="line">get markers’s parameter from markerNumber and parameterName; parameter names can be found for the specific items in the reference manual</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>SetMarkerParameter</strong>(<em>markerNumber</em>, <em>parameterName</em>, <em>value</em>):</div>
<div class="line">set parameter ‘parameterName’ of marker with markerNumber to value; parameter names can be found for the specific items in the reference manual</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>GetMarkerOutput</strong>(<em>markerNumber</em>, <em>variableType</em>, <em>configuration</em> = exu.ConfigurationType.Current):</div>
<div class="line">get the ouput of the marker specified with the OutputVariableType; currently only provides Displacement, Position and Velocity for position based markers, and RotationMatrix, Rotation and AngularVelocity(Local) for markers providing orientation; Coordinates and Coordinates_t available for coordinate markers</div>
<div class="line"><em>Example</em>:</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">mbs</span><span class="o">.</span><span class="nf">GetMarkerOutput</span><span class="p">(</span><span class="n">markerNumber</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">variableType</span><span class="o">=</span><span class="n">exu</span><span class="o">.</span><span class="nc">OutputVariableType</span><span class="o">.</span><span class="n">Position</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="mainsystem-load">
<span id="sec-mainsystem-load"></span><h2>MainSystem: Load<a class="headerlink" href="#mainsystem-load" title="Link to this heading"></a></h2>
<p>This section provides functions for adding, reading and modifying operating loads. Loads are used to act on the quantities which are dual to the primal kinematic quantities, such as displacement and rotation. Loads represent, e.g., forces, torques or generalized forces.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kn">import</span><span class="w"> </span><span class="nn">exudyn</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">exu</span>               <span class="c1">#EXUDYN package including C++ core part</span>
<span class="linenos">2</span><span class="kn">from</span><span class="w"> </span><span class="nn">exudyn.itemInterface</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span> <span class="c1">#conversion of data to exudyn dictionaries</span>
<span class="linenos">3</span><span class="n">SC</span> <span class="o">=</span> <span class="n">exu</span><span class="o">.</span><span class="nc">SystemContainer</span><span class="p">()</span>         <span class="c1">#container of systems</span>
<span class="linenos">4</span><span class="n">mbs</span> <span class="o">=</span> <span class="n">SC</span><span class="o">.</span><span class="nf">AddSystem</span><span class="p">()</span>               <span class="c1">#add a new system to work with</span>
<span class="linenos">5</span><span class="n">nMP</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">AddNode</span><span class="p">(</span><span class="nc">NodePoint2D</span><span class="p">(</span><span class="n">referenceCoordinates</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]))</span>
<span class="linenos">6</span><span class="n">mbs</span><span class="o">.</span><span class="nf">AddObject</span><span class="p">(</span><span class="nc">ObjectMassPoint2D</span><span class="p">(</span><span class="n">physicsMass</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">nodeNumber</span><span class="o">=</span><span class="n">nMP</span> <span class="p">))</span>
<span class="linenos">7</span><span class="n">mMP</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">AddMarker</span><span class="p">(</span><span class="nc">MarkerNodePosition</span><span class="p">(</span><span class="n">nodeNumber</span> <span class="o">=</span> <span class="n">nMP</span><span class="p">))</span>
<span class="linenos">8</span><span class="n">mbs</span><span class="o">.</span><span class="nf">AddLoad</span><span class="p">(</span><span class="nc">Force</span><span class="p">(</span><span class="n">markerNumber</span> <span class="o">=</span> <span class="n">mMP</span><span class="p">,</span> <span class="n">loadVector</span><span class="o">=</span><span class="p">[</span><span class="mf">0.001</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]))</span>
</pre></div>
</div>
<p>The class <strong>MainSystem</strong> has the following <strong>functions and structures</strong> regarding <strong>loads</strong>:</p>
<ul>
<li><div class="line-block">
<div class="line"><strong>AddLoad</strong>(<em>pyObject</em>):</div>
<div class="line">add a load with loadDefinition from Python load class; returns (global) load number (type LoadIndex) of newly added load</div>
<div class="line"><em>Example</em>:</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">item</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">AddLoad</span><span class="p">(</span><span class="nc">LoadForceVector</span><span class="p">(</span><span class="n">loadVector</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="n">markerNumber</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;heavy load&#39;</span><span class="p">))</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">AddLoad</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
<span class="n">loadDict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;loadType&#39;</span><span class="p">:</span> <span class="s1">&#39;ForceVector&#39;</span><span class="p">,</span>
  <span class="s1">&#39;markerNumber&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="s1">&#39;loadVector&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>
  <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;heavy load&#39;</span><span class="p">}</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">AddLoad</span><span class="p">(</span><span class="n">loadDict</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>GetLoadNumber</strong>(<em>loadName</em>):</div>
<div class="line">get load’s number by name (string)</div>
<div class="line"><em>Example</em>:</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">n</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">GetLoadNumber</span><span class="p">(</span><span class="s1">&#39;heavy load&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>GetLoad</strong>(<em>loadNumber</em>):</div>
<div class="line">get load’s dictionary by index</div>
<div class="line"><em>Example</em>:</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">loadDict</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">GetLoad</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>ModifyLoad</strong>(<em>loadNumber</em>, <em>loadDict</em>):</div>
<div class="line">modify load’s dictionary by index</div>
<div class="line"><em>Example</em>:</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">mbs</span><span class="o">.</span><span class="nf">ModifyLoad</span><span class="p">(</span><span class="n">loadNumber</span><span class="p">,</span> <span class="n">loadDict</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>GetLoadDefaults</strong>(<em>typeName</em>):</div>
<div class="line">get load’s default values for a certain loadType as (dictionary)</div>
<div class="line"><em>Example</em>:</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">loadType</span> <span class="o">=</span> <span class="s1">&#39;ForceVector&#39;</span>
<span class="n">loadDict</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">GetLoadDefaults</span><span class="p">(</span><span class="n">loadType</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>GetLoadValues</strong>(<em>loadNumber</em>):</div>
<div class="line">Get current load values, specifically if user-defined loads are used; can be scalar or vector-valued return value</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>GetLoadParameter</strong>(<em>loadNumber</em>, <em>parameterName</em>):</div>
<div class="line">get loads’s parameter from loadNumber and parameterName; parameter names can be found for the specific items in the reference manual</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>SetLoadParameter</strong>(<em>loadNumber</em>, <em>parameterName</em>, <em>value</em>):</div>
<div class="line">set parameter ‘parameterName’ of load with loadNumber to value; parameter names can be found for the specific items in the reference manual</div>
</div>
</li>
</ul>
</section>
<section id="mainsystem-sensor">
<span id="sec-mainsystem-sensor"></span><h2>MainSystem: Sensor<a class="headerlink" href="#mainsystem-sensor" title="Link to this heading"></a></h2>
<p>This section provides functions for adding, reading and modifying operating sensors. Sensors are used to measure information in nodes, objects, markers, and loads for output in a file.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">import</span><span class="w"> </span><span class="nn">exudyn</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">exu</span>               <span class="c1">#EXUDYN package including C++ core part</span>
<span class="linenos"> 2</span><span class="kn">from</span><span class="w"> </span><span class="nn">exudyn.itemInterface</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span> <span class="c1">#conversion of data to exudyn dictionaries</span>
<span class="linenos"> 3</span><span class="n">SC</span> <span class="o">=</span> <span class="n">exu</span><span class="o">.</span><span class="nc">SystemContainer</span><span class="p">()</span>         <span class="c1">#container of systems</span>
<span class="linenos"> 4</span><span class="n">mbs</span> <span class="o">=</span> <span class="n">SC</span><span class="o">.</span><span class="nf">AddSystem</span><span class="p">()</span>               <span class="c1">#add a new system to work with</span>
<span class="linenos"> 5</span><span class="n">nMP</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">AddNode</span><span class="p">(</span><span class="nc">NodePoint</span><span class="p">(</span><span class="n">referenceCoordinates</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]))</span>
<span class="linenos"> 6</span><span class="n">mbs</span><span class="o">.</span><span class="nf">AddObject</span><span class="p">(</span><span class="nc">ObjectMassPoint</span><span class="p">(</span><span class="n">physicsMass</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">nodeNumber</span><span class="o">=</span><span class="n">nMP</span> <span class="p">))</span>
<span class="linenos"> 7</span><span class="n">mMP</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">AddMarker</span><span class="p">(</span><span class="nc">MarkerNodePosition</span><span class="p">(</span><span class="n">nodeNumber</span> <span class="o">=</span> <span class="n">nMP</span><span class="p">))</span>
<span class="linenos"> 8</span><span class="n">mbs</span><span class="o">.</span><span class="nf">AddLoad</span><span class="p">(</span><span class="nc">Force</span><span class="p">(</span><span class="n">markerNumber</span> <span class="o">=</span> <span class="n">mMP</span><span class="p">,</span> <span class="n">loadVector</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">]))</span>
<span class="linenos"> 9</span><span class="n">sMP</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">AddSensor</span><span class="p">(</span><span class="nc">SensorNode</span><span class="p">(</span><span class="n">nodeNumber</span><span class="o">=</span><span class="n">nMP</span><span class="p">,</span> <span class="n">storeInternal</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="linenos">10</span>                               <span class="n">outputVariableType</span><span class="o">=</span><span class="n">exu</span><span class="o">.</span><span class="nc">OutputVariableType</span><span class="o">.</span><span class="n">Position</span><span class="p">))</span>
<span class="linenos">11</span><span class="n">mbs</span><span class="o">.</span><span class="nf">Assemble</span><span class="p">()</span>
<span class="linenos">12</span><span class="n">exu</span><span class="o">.</span><span class="nf">SolveDynamic</span><span class="p">(</span><span class="n">mbs</span><span class="p">,</span> <span class="n">exu</span><span class="o">.</span><span class="nc">SimulationSettings</span><span class="p">())</span>
<span class="linenos">13</span><span class="kn">from</span><span class="w"> </span><span class="nn">exudyn.plot</span><span class="w"> </span><span class="kn">import</span> <span class="nf">PlotSensor</span>
<span class="linenos">14</span><span class="nf">PlotSensor</span><span class="p">(</span><span class="n">mbs</span><span class="p">,</span> <span class="n">sMP</span><span class="p">,</span> <span class="n">components</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">])</span>
</pre></div>
</div>
<p>The class <strong>MainSystem</strong> has the following <strong>functions and structures</strong> regarding <strong>sensors</strong>:</p>
<ul>
<li><div class="line-block">
<div class="line"><strong>AddSensor</strong>(<em>pyObject</em>):</div>
<div class="line">add a sensor with sensor definition from Python sensor class; returns (global) sensor number (type SensorIndex) of newly added sensor</div>
<div class="line"><em>Example</em>:</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">item</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">AddSensor</span><span class="p">(</span><span class="nc">SensorNode</span><span class="p">(</span><span class="n">sensorType</span><span class="o">=</span> <span class="n">exu</span><span class="o">.</span><span class="n">SensorType</span><span class="o">.</span><span class="nc">Node</span><span class="p">,</span> <span class="n">nodeNumber</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;test sensor&#39;</span><span class="p">))</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">AddSensor</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
<span class="n">sensorDict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;sensorType&#39;</span><span class="p">:</span> <span class="s1">&#39;Node&#39;</span><span class="p">,</span>
  <span class="s1">&#39;nodeNumber&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="s1">&#39;fileName&#39;</span><span class="p">:</span> <span class="s1">&#39;sensor.txt&#39;</span><span class="p">,</span>
  <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;test sensor&#39;</span><span class="p">}</span>
<span class="n">mbs</span><span class="o">.</span><span class="nf">AddSensor</span><span class="p">(</span><span class="n">sensorDict</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>GetSensorNumber</strong>(<em>sensorName</em>):</div>
<div class="line">get sensor’s number by name (string)</div>
<div class="line"><em>Example</em>:</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">n</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">GetSensorNumber</span><span class="p">(</span><span class="s1">&#39;test sensor&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>GetSensor</strong>(<em>sensorNumber</em>):</div>
<div class="line">get sensor’s dictionary by index</div>
<div class="line"><em>Example</em>:</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sensorDict</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">GetSensor</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>ModifySensor</strong>(<em>sensorNumber</em>, <em>sensorDict</em>):</div>
<div class="line">modify sensor’s dictionary by index</div>
<div class="line"><em>Example</em>:</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">mbs</span><span class="o">.</span><span class="nf">ModifySensor</span><span class="p">(</span><span class="n">sensorNumber</span><span class="p">,</span> <span class="n">sensorDict</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>GetSensorDefaults</strong>(<em>typeName</em>):</div>
<div class="line">get sensor’s default values for a certain sensorType as (dictionary)</div>
<div class="line"><em>Example</em>:</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sensorType</span> <span class="o">=</span> <span class="s1">&#39;Node&#39;</span>
<span class="n">sensorDict</span> <span class="o">=</span> <span class="n">mbs</span><span class="o">.</span><span class="nf">GetSensorDefaults</span><span class="p">(</span><span class="n">sensorType</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>GetSensorValues</strong>(<em>sensorNumber</em>, <em>configuration</em> = exu.ConfigurationType.Current):</div>
<div class="line">get sensors’s values for configuration; can be a scalar or vector-valued return value!</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>GetSensorStoredData</strong>(<em>sensorNumber</em>):</div>
<div class="line">get sensors’s internally stored data as matrix (all time points stored); rows are containing time and sensor values as obtained by sensor (e.g., time, and x, y, and z value of position)</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>GetSensorParameter</strong>(<em>sensorNumber</em>, <em>parameterName</em>):</div>
<div class="line">get sensors’s parameter from sensorNumber and parameterName; parameter names can be found for the specific items in the reference manual</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>SetSensorParameter</strong>(<em>sensorNumber</em>, <em>parameterName</em>, <em>value</em>):</div>
<div class="line">set parameter ‘parameterName’ of sensor with sensorNumber to value; parameter names can be found for the specific items in the reference manual</div>
</div>
</li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="SystemContainer.html" class="btn btn-neutral float-left" title="SystemContainer" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="SystemData.html" class="btn btn-neutral float-right" title="SystemData" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>